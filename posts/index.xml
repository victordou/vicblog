<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Victor</title><link>https://vicfree.com/posts/</link><description>Recent content in Posts on Victor</description><generator>Hugo -- gohugo.io</generator><language>zh-hans</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Mon, 20 Feb 2023 22:17:36 +0800</lastBuildDate><atom:link href="https://vicfree.com/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>Windows å®‰è£… Zsh in Git Bash</title><link>https://vicfree.com/2023/02/install-zsh-in-git-bash-for-windows/</link><pubDate>Mon, 20 Feb 2023 22:17:36 +0800</pubDate><guid>https://vicfree.com/2023/02/install-zsh-in-git-bash-for-windows/</guid><description>å‚è€ƒï¼š https://dominikrys.com/posts/zsh-in-git-bash-on-windows/ http://i.lckiss.com/?p=6268 https://zhuanlan.zhihu.com/p/455925403 ä¸ºå•¥è¦ç”¨ Zsh æœ€è¿‘æç½‘ç»œå’Œè¿™ä¸ªåšå®¢ï¼ŒWindows çš„ç»ˆç«¯è¶Šæ¥è¶Šä¸é¡ºæ‰‹ï¼Œå¸¸ç”¨å·¥å…·è¿˜æ˜¯ Linux å¼ºï¼Œåˆšå¼€å§‹ç”¨ Scoop å®‰è£…äº† Git Bashï¼Œè‡ªå¸¦äº†å¾ˆå¤šå·¥å…·ï¼Œ</description><content type="html"><![CDATA[<p>å‚è€ƒï¼š</p>
<p><a href="https://dominikrys.com/posts/zsh-in-git-bash-on-windows/">https://dominikrys.com/posts/zsh-in-git-bash-on-windows/</a></p>
<p><a href="http://i.lckiss.com/?p=6268">http://i.lckiss.com/?p=6268</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/455925403">https://zhuanlan.zhihu.com/p/455925403</a></p>
<h2 id="ä¸ºå•¥è¦ç”¨-zsh">ä¸ºå•¥è¦ç”¨ <code>Zsh</code></h2>
<p>æœ€è¿‘æç½‘ç»œå’Œè¿™ä¸ªåšå®¢ï¼ŒWindows çš„ç»ˆç«¯è¶Šæ¥è¶Šä¸é¡ºæ‰‹ï¼Œå¸¸ç”¨å·¥å…·è¿˜æ˜¯ Linux å¼ºï¼Œåˆšå¼€å§‹ç”¨ <a href="https://scoop.sh/">Scoop</a> å®‰è£…äº† <a href="https://gitforwindows.org/">Git Bash</a>ï¼Œè‡ªå¸¦äº†å¾ˆå¤šå·¥å…·ï¼ŒçœŸçš„ä¸å¤Ÿä¹Ÿå¯ä»¥ç”¨ Scoop å®‰è£…ã€‚</p>
<p>ä½†æ˜¯æœ€è¿‘ç© <a href="https://www.kali.org/">Kali Linux</a> æ‰å‘ç°å®ƒè‡ªå¸¦ <a href="https://zsh.sourceforge.io/">Zsh</a> è¶…çº§é¡ºæ‰‹ï¼Œæœ€å¿ƒåŠ¨çš„å½“ç„¶æ˜¯<a href="https://github.com/zsh-users/zsh-autosuggestions">å†å²å‘½ä»¤è‡ªåŠ¨è¡¥å…¨/zsh-autosuggestions</a>ï¼Œä¸Šç½‘ä¸€æŸ¥å‘ç°æ”¯æŒè¿™ä¸ªåŠŸèƒ½çš„ Shell å±ˆæŒ‡å¯æ•°ï¼Œå°±ä¸‰ä¸ªï¼šZsh, Fish, PowerShell å®‰è£… PSReadLine æ¨¡å—ã€‚</p>
<p>PowerShell è‡ªå¸¦çš„é‚£äº›å‘½ä»¤ï¼ŒçœŸçš„æ˜¯éš¾è®°ï¼Œä¹Ÿç”¨ Scoop å®‰è£…è¿‡ <a href="https://ohmyposh.dev/">Oh My Posh</a>, ç®—äº†ï¼Œæ”¾å¼ƒã€‚</p>
<p>ç„¶åå‘ç°ç½‘ä¸Š Windows å®‰è£… Zsh, è¦ä¹ˆæ˜¯ WSL, è¦ä¹ˆæ˜¯ <a href="https://www.msys2.org/">MSYS2</a>, WSL è®¿é—®æœ¬åœ°æ–‡ä»¶è¿˜æ˜¯æœ‰ç‚¹ç¹ç<code>cd /mnt/c/Users/</code>, MSYS2 éœ€è¦å®‰è£… Zsh æ’ä»¶ <code>pacman -S zsh git vim</code>, æœ€åä¸€ä¸ªåŠæ³•å°±æ˜¯æœ¬æ–‡æƒ³ä»‹ç»çš„ã€‚</p>
<p><img src="/images/Zsh.png" alt="img" title="Zsh Shell"></p>
<h2 id="å®‰è£…-git-bash-å’Œ-zsh">å®‰è£… Git Bash å’Œ Zsh</h2>
<ol>
<li>
<p>ä¸‹è½½ <code>Git For Windows</code>, ä»ä¸‹é¢é€‰æ‹©é€‚åˆä½ çš„:</p>
<ul>
<li><a href="https://scoop.sh/">Scoop</a> <code>scoop install git</code></li>
<li><a href="https://git-scm.com/">Gitå®˜ç½‘</a>ä¸‹è½½ <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a>, ä¸‹è½½ç‚¹å‡»å®‰è£…ï¼Œå®‰è£…è¿‡ç¨‹ä¸€åˆ‡é»˜è®¤ã€‚</li>
<li><a href="https://www.microsoft.com/store/productId/9NBLGGH4NNS1">Windows10/11 å•†åº—</a>è‡ªå¸¦ <a href="https://aka.ms/getwinget">winget</a>, <code>winget install -e --id Git.Git</code></li>
</ul>
</li>
<li>
<p>ä¸‹è½½ <code>Zsh</code> æ’ä»¶</p>
<ul>
<li>æ‰“å¼€ <a href="https://packages.msys2.org/package/zsh?repo=msys&amp;variant=x86_64">https://packages.msys2.org/package/zsh?repo=msys&amp;variant=x86_64</a></li>
<li>ç‚¹å‡»ä¸‹è½½ File: <a href="https://mirror.msys2.org/msys/x86_64/zsh-5.9-2-x86_64.pkg.tar.zst">https://mirror.msys2.org/msys/x86_64/zsh-5.9-2-x86_64.pkg.tar.zst</a></li>
</ul>
<blockquote>
<p>Git Bash(Git For Windows) æ˜¯åŸºäº MSYS2 MINGW64 ç¯å¢ƒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦æ‰‹åŠ¨ä¸‹è½½ MSYS2 çš„ Zsh æ’ä»¶æ‰‹åŠ¨è§£å‹åˆ° Git ç›®å½•å³å¯ã€‚</p>
</blockquote>
</li>
<li>
<p>å°† <code>*.tar.zst</code> è§£å‹ç¼©æˆ <code>*.tar</code>, è¿™æ ·å¯ä»¥ç”¨ä»»æ„å‹ç¼©è½¯ä»¶æ‰“å¼€ <code>*.tar</code>. æœ‰ä¸‹é¢ä¸¤ä¸ªåŠæ³•ï¼š</p>
<ul>
<li>ä¸‹è½½ Windows è§£å‹å·¥å…· <a href="https://peazip.github.io/">PeaZip</a> æˆ–è€… <a href="https://github.com/mcmilk/7-Zip-zstd/releases">7-Zip æ’ä»¶</a></li>
<li>WSL å®‰è£… ztsd è§£å‹ï¼Œ<code>sudo apt update &amp;&amp; sudo apt install zstd -y</code> ç„¶å <code>unzstd filename.tar.zst</code></li>
</ul>
</li>
<li>
<p>å°†å‹ç¼©åŒ…æ‰€æœ‰æ–‡ä»¶ (ä¸»è¦æ˜¯ <code>etc</code> <code>usr</code>) è§£å‹åˆ°ä½ çš„ Git å®‰è£…ç›®å½•ï¼Œæ³¨æ„æ˜¯åˆå¹¶æ–‡ä»¶å¤¹ï¼Œä¸ä¼šæç¤ºè¦†ç›–æ–‡ä»¶ã€‚</p>
<ul>
<li><code>%USERPROFILE%\scoop\apps\git\current\</code></li>
<li><code>C:\Program Files\Git\</code></li>
</ul>
</li>
<li>
<p>æ‰“å¼€ Git Bash è¿è¡Œ <code>Zsh</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">zsh
</span></span></code></pre></div></li>
<li>
<p><strong>é‡è¦</strong> å¦‚æœä½ ä¸å°å¿ƒè·³è¿‡äº† <code>Zsh</code> é…ç½®é¡µé¢ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤é‡æ–°é…ç½®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">autoload -U zsh-newuser-install
</span></span><span class="line"><span class="cl">zsh-newuser-install -f
</span></span></code></pre></div><ul>
<li>æŒ‰ <code>1</code> &ldquo;Continue to the main menu.&rdquo; è¿›å…¥é…ç½®é¡µé¢</li>
<li>æŒ‰ <code>1</code> é…ç½®å‘½ä»¤å†å²ï¼ŒæŒ‰ <code>1-3</code> æ¥ä¿®æ”¹å‘½ä»¤å†å²å¤§å°å’Œä½ç½®ï¼ŒæŒ‰ <code>0</code> è¿”å›ã€‚</li>
<li>æŒ‰ <code>2</code> é…ç½®è¡¥å…¨ï¼ŒæŒ‰ <code>1</code> é€‰æ‹© &ldquo;Use the new completion system&rdquo;, æœ‰æç¤ºç­‰å¾…ç¡®è®¤å°±æŒ‰<code>å›è½¦</code>ï¼ŒæŒ‰ <code>0</code> è¿”å›ï¼Œå†æ¬¡æç¤ºæ˜¯å¦ä¿å­˜æŒ‰ <code>y</code></li>
<li>æŒ‰ <code>0</code> ä¿å­˜ï¼Œå®Œæˆ</li>
</ul>
</li>
<li>
<p><code>Zsh</code> è®¾ç½®ä¸ºé»˜è®¤çš„ Shell, æœ‰ä¸¤ç§åŠæ³•:</p>
<ol>
<li><strong>æ¨è</strong>ï¼Œåœ¨ <code>%USERPROFILE%\scoop\apps\git\current\usr\bin\bash.exe -i -l -c zsh</code>, æœ«å°¾åŠ å…¥ <code> -i -l -c zsh</code>.</li>
<li>ä¸æ¨èï¼Œæ–°å»º <code>.profile</code> åˆ°<strong>ç”¨æˆ·æ–‡ä»¶å¤¹</strong> <code>%USERPROFILE%</code>, ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ <code>nano ~/.profile</code> ç²˜è´´ä¸‹é¢çš„å†…å®¹ï¼Œ<code>Crtl+S</code> ä¿å­˜ã€‚
<blockquote>
<p>ä¹Ÿå¯æ·»åŠ åˆ°ä»¥ä¸‹æ–‡ä»¶ <code>.profile</code> &gt; <code>.bash_profile</code> &gt; <code>.bashrc</code>, ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå…¼å®¹è¶Šå¥½ï¼Œè¿˜èƒ½æ‰‹åŠ¨åˆ‡æ¢åˆ° bash.</p>
</blockquote>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -x /usr/bin/zsh.exe<span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl"><span class="nb">exec</span> zsh
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="å®‰è£…zshæ’ä»¶">å®‰è£…Zshæ’ä»¶</h2>
<ol>
<li>
<p>å…ˆ clone æ‰€æœ‰åº“ï¼Œåˆ°ä½ ç”µè„‘æœ¬åœ°ç£ç›˜ä¸Šï¼Œå¦‚<strong>ç”¨æˆ·æ–‡ä»¶å¤¹</strong> <code>%USERPROFILE%</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/zsh-users/zsh-completions
</span></span><span class="line"><span class="cl">git clone https://github.com/zsh-users/zsh-syntax-highlighting
</span></span><span class="line"><span class="cl">git clone https://github.com/zsh-users/zsh-autosuggestions
</span></span></code></pre></div></li>
<li>
<p>ä½¿ç”¨ä½ é¡ºæ‰‹çš„ç¼–è¾‘å™¨æ‰“å¼€ <code>.zshrc</code>, æ·»åŠ ä¸‹é¢è¿™äº›ä¸œè¥¿ï¼Œåˆ°ç¬¬ä¸€è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">source</span> ~/zsh-autosuggestions/zsh-autosuggestions.zsh
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/zsh-completions/zsh-completions.plugin.zsh
</span></span></code></pre></div></li>
<li>
<p>å¦‚æœä½ ä¿®æ”¹äº† <code>Git Clone</code> ç›®å½•ï¼Œè¯·è‡ªå·±ä¿®æ”¹ä¸Šé¢çš„è·¯å¾„ï¼Œæ¯”å¦‚ <code>/c/Users/xxxx/xxxx</code></p>
</li>
</ol>
<h2 id="è‡ªå®šä¹‰zshrcå¹¶æ·»åŠ -git-branch">è‡ªå®šä¹‰<code>.zshrc</code>ï¼Œå¹¶æ·»åŠ  Git Branch.</h2>
<ol>
<li>
<p>ä¿®æ”¹PROMPTï¼Œé‡Œé¢è¯¦ç»†å«ä¹‰è¯·çœ‹è¿™é‡Œ<a href="https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html">https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">PROMPT</span><span class="o">=</span><span class="s1">$&#39;\n%F{%(#.blue.green)}â”Œâ”€â”€(%B%F{%(#.red.blue)}%*&#39;$&#39;%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/â€¦/%4~.%5~)%b%F{%(#.blue.green)}]\nâ””â”€%B%(#.%F{red}#.%F{blue}$)%b%F{reset} &#39;</span>
</span></span></code></pre></div></li>
<li>
<p>ä¿®æ”¹Titleï¼Œä¸ºæ–‡ä»¶è·¯å¾„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">case</span> <span class="nv">$TERM</span> in xterm*<span class="o">)</span>
</span></span><span class="line"><span class="cl">    precmd <span class="o">()</span> <span class="o">{</span>print -Pn <span class="s2">&#34;\e]0;%~\a&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span></code></pre></div></li>
<li>
<p>æ·»åŠ  Git Branch ä¿¡æ¯-æ–¹æ³•1ï¼Œä½¿ç”¨ Git å‘½ä»¤</p>
<blockquote>
<p><del>å’Œ<strong>Windows Terminal</strong>ä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒZshè¾“å…¥æ¡†ä¸ºç©ºæ—¶<a href="https://github.com/msys2/MSYS2-packages/issues/2820">æ”¹å˜çª—å£å¤§å°ä¼šå¯¼è‡´å¡æ­»</a>ã€‚</del></p>
</blockquote>
<blockquote>
<p>é‡æ–°ä¿®æ”¹äº†ä»£ç ï¼Œä½¿ç”¨<a href="https://code.mendhak.com/simple-bash-prompt-for-developers-ps1-git/">è¿™ä½å…„å¼Ÿçš„ä»£ç </a>,æˆ‘å¢åŠ äº†<code>if [ -d ./.git ]; then</code>ï¼Œå†è®© <em>New Bing</em> å¸®æˆ‘åˆå¹¶ä¸¤ä¸ªfunctionä¸ºä¸€ä¸ªã€‚bash å’Œ zsh é€šç”¨ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">function</span> parse_git_branch <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> -d ./.git <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">branch</span><span class="o">=</span><span class="k">$(</span>git branch --no-color 2&gt; /dev/null <span class="p">|</span> sed -e <span class="s1">&#39;/^[^*]/d&#39;</span> -e <span class="s2">&#34;s/* \(.*\)/\1/&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">dirty</span><span class="o">=</span><span class="k">$(</span>git status --porcelain 2&gt; /dev/null <span class="p">|</span> wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="nv">$dirty</span> -gt <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34; on </span><span class="nv">$branch</span><span class="s2">*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34; on </span><span class="nv">$branch</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">setopt prompt_subst
</span></span><span class="line"><span class="cl"><span class="nv">RPROMPT</span><span class="o">=</span>%F<span class="o">{</span>yellow<span class="o">}</span><span class="se">\$</span><span class="o">(</span>parse_git_branch<span class="o">)</span>%f
</span></span></code></pre></div></li>
<li>
<p>æ·»åŠ  Git Branch ä¿¡æ¯-æ–¹æ³•2ï¼Œä½¿ç”¨ <code>Zsh</code> è‡ªå¸¦çš„ <code>vcs_info</code> æ¨¡å—ã€‚åŒæ—¶åŒ…å«äº† 1-3 çš„ä¿®æ”¹ã€‚</p>
<blockquote>
<p>å› ä¸ºå¼•ç”¨ <code>vcs_info</code> ä¼šå¯¼è‡´å“åº”é€Ÿåº¦ä¸‹é™ï¼Œæ¨èä½¿ç”¨æ–¹æ³•1.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">autoload -Uz vcs_info
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nv">$TERM</span> in xterm*<span class="o">)</span>
</span></span><span class="line"><span class="cl">    precmd <span class="o">()</span> <span class="o">{</span>vcs_info <span class="o">&amp;&amp;</span> print -Pn <span class="s2">&#34;\e]0;%~\a&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:vcs_info:git:*&#39;</span> formats <span class="s1">&#39;on %b&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">setopt prompt_subst
</span></span><span class="line"><span class="cl"><span class="nv">PROMPT</span><span class="o">=</span><span class="s1">$&#39;\n%F{%(#.blue.green)}â”Œâ”€â”€(%B%F{%(#.red.blue)}%*&#39;$&#39;%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/â€¦/%4~.%5~)%b%F{%(#.blue.green)}]\nâ””â”€%B%(#.%F{red}#.%F{blue}$)%b%F{reset} &#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">RPROMPT</span><span class="o">=</span>%F<span class="o">{</span>yellow<span class="o">}</span><span class="se">\$</span>vcs_info_msg_0_%f
</span></span></code></pre></div></li>
<li>
<p>å¼ºåˆ¶å…³é—­ <code>Zsh</code>æ—¶, å¯¼è‡´ç”Ÿæˆäº† <code>.zsh-histfile.lock</code> ä¼šä½¿å¾— <code>Zsh</code> æ‰“å¼€å¡ä½ï¼Œæ·»åŠ ä¸‹é¢è¿™ä¸ªè§£å†³ã€‚</p>
<pre tabindex="0"><code>setopt HIST_FCNTL_LOCK
</code></pre></li>
</ol>
<h2 id="æ·»åŠ -zsh-è‡³-windows-terminal">æ·»åŠ  Zsh è‡³ Windows Terminal</h2>
<blockquote>
<p>è®¾ç½® -&gt; æ–°å¢ç©ºé…ç½® -&gt; å¡«å…¥å‘½ä»¤è¡Œ<code>bash.exe -i -l -c zsh</code>ï¼Œå…¶ä»–å¯å¡«å¯ä¸å¡«ï¼Œçœ‹ä½ å¿ƒæƒ…ã€‚</p>
</blockquote>
<blockquote>
<p>-i = &ndash;interactive, -l = &ndash;login, -c = execute command</p>
</blockquote>
<pre tabindex="0"><code>{
    &#34;closeOnExit&#34;: &#34;always&#34;,
    &#34;commandline&#34;: &#34;%USERPROFILE%\\scoop\\apps\\git\\current\\usr\\bin\\bash.exe -i -l -c zsh&#34;,
    &#34;guid&#34;: &#34;{9e15491f-01ea-44bf-878c-c90f7749c9a8}&#34;,
    &#34;hidden&#34;: false,
    &#34;icon&#34;: &#34;%USERPROFILE%\\scoop\\apps\\git\\current\\usr\\share\\git\\git-for-windows.ico&#34;,
    &#34;name&#34;: &#34;Git Bash&#34;,
    &#34;startingDirectory&#34;: &#34;%USERPROFILE%&#34;
},
</code></pre><blockquote>
<p>å…¶å®ä¸Šé¢å¯ä»¥å¡« <code>zsh.exe -i -l</code>, ä½†æ˜¯åœ¨åˆå§‹åŒ– <code>/etc/profile</code> å’Œ <code>/mingw64/share/git/completion/git-completion.bash</code>ï¼Œè„šæœ¬å‘¢æœ‰å¥è¯ <code>ERROR: this script is obsolete, please see git-completion.zsh</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> -n <span class="si">${</span><span class="nv">ZSH_VERSION</span><span class="p">-</span><span class="si">}</span> <span class="o">&amp;&amp;</span> -z <span class="si">${</span><span class="nv">GIT_SOURCING_ZSH_COMPLETION</span><span class="p">-</span><span class="si">}</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;ERROR: this script is obsolete, please see git-completion.zsh&#34;</span> 1&gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><h2 id="ç¾åŒ–zsh">ç¾åŒ–Zsh</h2>
<ul>
<li>
<p>å®‰è£… oh-my-zshï¼Œå¯ä»¥ç¾åŒ–Zshï¼Œä¸”åŒ…å«äº†ä¸Šé¢å¾ˆå¤šåŠŸèƒ½ï¼Œä½†æ˜¯å› ä¸ºåŠŸèƒ½å¤šï¼Œå¯¼è‡´é€Ÿåº¦ä¸æ˜¯å¾ˆå¿«ã€‚æˆ‘æ˜¯é‡å®ç”¨ï¼Œä¸ä¸­ç¾è§‚çš„ã€‚</p>
</li>
<li>
<p>ä½†æ˜¯ä½ æƒ³å®‰è£…å°±ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å®‰è£…ï¼š</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sh -c <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span></code></pre></div><h2 id="é«˜å¤§å…¨zshrcæ¨¡æ¿">é«˜å¤§å…¨.zshrcæ¨¡æ¿</h2>
<blockquote>
<p>å¤åˆ¶åœ¨å³ä¸‹è§’</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># History configurations</span>
</span></span><span class="line"><span class="cl"><span class="nv">HISTFILE</span><span class="o">=</span>~/.zsh-history
</span></span><span class="line"><span class="cl"><span class="nv">HISTSIZE</span><span class="o">=</span><span class="m">1000</span>
</span></span><span class="line"><span class="cl"><span class="nv">SAVEHIST</span><span class="o">=</span><span class="m">2000</span>
</span></span><span class="line"><span class="cl"><span class="nv">HISTORY_IGNORE</span><span class="o">=</span><span class="s1">&#39;(history*|h|ls|ll|la|l|cd|pwd|exit|cd ..)&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># configure key keybindings</span>
</span></span><span class="line"><span class="cl">bindkey -e                                        <span class="c1"># emacs key bindings</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39; &#39;</span> magic-space                           <span class="c1"># do history expansion on space</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^U&#39;</span> backward-kill-line                   <span class="c1"># ctrl + U</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[3;5~&#39;</span> kill-word                       <span class="c1"># ctrl + Supr</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[3~&#39;</span> delete-char                       <span class="c1"># delete</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[1;5C&#39;</span> forward-word                    <span class="c1"># ctrl + -&gt;</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[1;5D&#39;</span> backward-word                   <span class="c1"># ctrl + &lt;-</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[5~&#39;</span> beginning-of-buffer-or-history    <span class="c1"># page up</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[6~&#39;</span> end-of-buffer-or-history          <span class="c1"># page down</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[H&#39;</span> beginning-of-line                  <span class="c1"># home</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[F&#39;</span> end-of-line                        <span class="c1"># end</span>
</span></span><span class="line"><span class="cl">bindkey <span class="s1">&#39;^[[Z&#39;</span> undo                               <span class="c1"># shift + tab undo last action</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># https://zsh.sourceforge.io/Doc/Release/Options.html</span>
</span></span><span class="line"><span class="cl"><span class="c1">#setopt APPEND_HISTORY      # append their history list to the history file, rather than replace it.</span>
</span></span><span class="line"><span class="cl">setopt INC_APPEND_HISTORY   <span class="c1"># history lines are added to the $HISTFILE incrementally</span>
</span></span><span class="line"><span class="cl">setopt HIST_FCNTL_LOCK      <span class="c1"># add zsh history file lock avoid corruption</span>
</span></span><span class="line"><span class="cl">setopt HIST_IGNORE_ALL_DUPS <span class="c1"># history list duplicates an older one, the older command is removed from the list</span>
</span></span><span class="line"><span class="cl"><span class="c1"># setopt hist_ignore_dups   # ignore duplicated commands history list</span>
</span></span><span class="line"><span class="cl">setopt hist_ignore_space    <span class="c1"># ignore commands that start with space</span>
</span></span><span class="line"><span class="cl">setopt hist_verify          <span class="c1"># show command with history expansion to user before running it</span>
</span></span><span class="line"><span class="cl">setopt autocd               <span class="c1"># change directory just by typing its name</span>
</span></span><span class="line"><span class="cl">setopt interactivecomments  <span class="c1"># allow comments in interactive mode</span>
</span></span><span class="line"><span class="cl">setopt numericglobsort      <span class="c1"># sort filenames numerically when it makes sense</span>
</span></span><span class="line"><span class="cl">setopt prompt_subst         <span class="c1"># prompt extend function, for git branch display</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># xterm set the title</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nv">$TERM</span> in xterm*<span class="o">)</span>
</span></span><span class="line"><span class="cl">    precmd <span class="o">()</span> <span class="o">{</span>print -Pn <span class="s2">&#34;\e]0;%~\a&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Shows Git branch name in prompt.</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> parse_git_branch <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> -d ./.git <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">branch</span><span class="o">=</span><span class="k">$(</span>git branch --no-color 2&gt; /dev/null <span class="p">|</span> sed -e <span class="s1">&#39;/^[^*]/d&#39;</span> -e <span class="s2">&#34;s/* \(.*\)/\1/&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">dirty</span><span class="o">=</span><span class="k">$(</span>git status --porcelain 2&gt; /dev/null <span class="p">|</span> wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="nv">$dirty</span> -gt <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34; on </span><span class="nv">$branch</span><span class="s2">*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34; on </span><span class="nv">$branch</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html</span>
</span></span><span class="line"><span class="cl"><span class="nv">RPROMPT</span><span class="o">=</span>%F<span class="o">{</span>yellow<span class="o">}</span><span class="se">\$</span><span class="o">(</span>parse_git_branch<span class="o">)</span>%f
</span></span><span class="line"><span class="cl"><span class="nv">PROMPT</span><span class="o">=</span><span class="s1">$&#39;\n%F{%(#.blue.green)}â”Œâ”€â”€(%B%F{%(#.red.blue)}%*&#39;$&#39;%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/â€¦/%4~.%5~)%b%F{%(#.blue.green)}]\nâ””â”€%B%(#.%F{red}#.%F{blue}$)%b%F{reset} &#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># enable color support of ls, less and man, and also add handy aliases</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -x /usr/bin/dircolors <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">test</span> -r ~/.dircolors <span class="o">&amp;&amp;</span> <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>dircolors -b ~/.dircolors<span class="k">)</span><span class="s2">&#34;</span> <span class="o">||</span> <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>dircolors -b<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LS_COLORS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$LS_COLORS</span><span class="s2">:ow=30;44:&#34;</span> <span class="c1"># fix ls color for folders with 777 permissions</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">ls</span><span class="o">=</span><span class="s1">&#39;ls --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#alias dir=&#39;dir --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#alias vdir=&#39;vdir --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">grep</span><span class="o">=</span><span class="s1">&#39;grep --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">fgrep</span><span class="o">=</span><span class="s1">&#39;fgrep --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">egrep</span><span class="o">=</span><span class="s1">&#39;egrep --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">diff</span><span class="o">=</span><span class="s1">&#39;diff --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">ip</span><span class="o">=</span><span class="s1">&#39;ip --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_mb</span><span class="o">=</span><span class="s1">$&#39;\E[1;31m&#39;</span>     <span class="c1"># begin blink</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_md</span><span class="o">=</span><span class="s1">$&#39;\E[1;36m&#39;</span>     <span class="c1"># begin bold</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_me</span><span class="o">=</span><span class="s1">$&#39;\E[0m&#39;</span>        <span class="c1"># reset bold/blink</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_so</span><span class="o">=</span><span class="s1">$&#39;\E[01;33m&#39;</span>    <span class="c1"># begin reverse video</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_se</span><span class="o">=</span><span class="s1">$&#39;\E[0m&#39;</span>        <span class="c1"># reset reverse video</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_us</span><span class="o">=</span><span class="s1">$&#39;\E[1;32m&#39;</span>     <span class="c1"># begin underline</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_ue</span><span class="o">=</span><span class="s1">$&#39;\E[0m&#39;</span>        <span class="c1"># reset underline</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Take advantage of $LS_COLORS for completion as well</span>
</span></span><span class="line"><span class="cl">    zstyle <span class="s1">&#39;:completion:*&#39;</span> list-colors <span class="s2">&#34;</span><span class="si">${</span><span class="p">(s.:.)LS_COLORS</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    zstyle <span class="s1">&#39;:completion:*:*:kill:*:processes&#39;</span> list-colors <span class="s1">&#39;=(#b) #([0-9]#)*=0=01;31&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># some useful aliases</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">ll</span><span class="o">=</span><span class="s1">&#39;ls -laFh&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">la</span><span class="o">=</span><span class="s1">&#39;ls -A&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">l</span><span class="o">=</span><span class="s1">&#39;ls -AF1&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># be paranoid</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">cp</span><span class="o">=</span><span class="s1">&#39;cp -i&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">mv</span><span class="o">=</span><span class="s1">&#39;mv -i&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">rm</span><span class="o">=</span><span class="s1">&#39;rm -i&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">extract <span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="o">[</span> -f <span class="nv">$1</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">       <span class="k">case</span> <span class="nv">$1</span> in
</span></span><span class="line"><span class="cl">           *.tar.bz2<span class="o">)</span>   tar xvjf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tar.gz<span class="o">)</span>    tar xvzf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.bz2<span class="o">)</span>       bunzip2 <span class="nv">$1</span>     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.rar<span class="o">)</span>       unrar x <span class="nv">$1</span>       <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.gz<span class="o">)</span>        gunzip <span class="nv">$1</span>      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tar<span class="o">)</span>       tar xvf <span class="nv">$1</span>     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tbz2<span class="o">)</span>      tar xvjf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tgz<span class="o">)</span>       tar xvzf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.zip<span class="o">)</span>       unzip <span class="nv">$1</span>       <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.Z<span class="o">)</span>         uncompress <span class="nv">$1</span>  <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.7z<span class="o">)</span>        7z x <span class="nv">$1</span>        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *<span class="o">)</span>           <span class="nb">echo</span> <span class="s2">&#34;don&#39;t know how to extract &#39;</span><span class="nv">$1</span><span class="s2">&#39;...&#34;</span> <span class="p">;;</span>
</span></span><span class="line"><span class="cl">       <span class="k">esac</span>
</span></span><span class="line"><span class="cl">   <span class="k">else</span>
</span></span><span class="line"><span class="cl">       <span class="nb">echo</span> <span class="s2">&#34;&#39;</span><span class="nv">$1</span><span class="s2">&#39; is not a valid file!&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="k">fi</span>
</span></span><span class="line"><span class="cl"> <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># enable syntax-highlighting</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -f ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    . ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</span></span><span class="line"><span class="cl">    <span class="nv">ZSH_HIGHLIGHT_HIGHLIGHTERS</span><span class="o">=(</span>main brackets pattern<span class="o">)</span>
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>default<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>unknown-token<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>white,underline
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>reserved-word<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>cyan,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>suffix-alias<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green,underline
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>global-alias<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>precommand<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green,underline
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>commandseparator<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>blue,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>autodirectory<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green,underline
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>path<span class="o">]=</span>bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>path_pathseparator<span class="o">]=</span>
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>path_prefix_pathseparator<span class="o">]=</span>
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>globbing<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>blue,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>history-expansion<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>blue,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>command-substitution<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>command-substitution-delimiter<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>process-substitution<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>process-substitution-delimiter<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>single-hyphen-option<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>double-hyphen-option<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>back-quoted-argument<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>back-quoted-argument-delimiter<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>blue,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>single-quoted-argument<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>yellow
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>double-quoted-argument<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>yellow
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>dollar-quoted-argument<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>yellow
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>rc-quote<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>dollar-double-quoted-argument<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>back-double-quoted-argument<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>back-dollar-quoted-argument<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>assign<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>redirection<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>blue,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>comment<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>black,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>named-fd<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>numeric-fd<span class="o">]=</span>none
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>arg0<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>cyan
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>bracket-error<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>red,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>bracket-level-1<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>blue,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>bracket-level-2<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>green,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>bracket-level-3<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>magenta,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>bracket-level-4<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>yellow,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>bracket-level-5<span class="o">]=</span><span class="nv">fg</span><span class="o">=</span>cyan,bold
</span></span><span class="line"><span class="cl">    ZSH_HIGHLIGHT_STYLES<span class="o">[</span>cursor-matchingbracket<span class="o">]=</span>standout
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># enable auto-suggestions based on the history</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -f ~/zsh-autosuggestions/zsh-autosuggestions.zsh <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    . ~/zsh-autosuggestions/zsh-autosuggestions.zsh
</span></span><span class="line"><span class="cl">    <span class="c1"># change suggestion color</span>
</span></span><span class="line"><span class="cl">    <span class="nv">ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE</span><span class="o">=</span><span class="s1">&#39;fg=#9e9e9e&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="c1"># enable extend completion</span>
</span></span><span class="line"><span class="cl"><span class="nv">fpath</span><span class="o">=(</span>~/zsh-completions/src <span class="nv">$fpath</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># old way add funtion</span>
</span></span><span class="line"><span class="cl"><span class="c1">#source ~/zsh-autosuggestions/zsh-autosuggestions.zsh</span>
</span></span><span class="line"><span class="cl"><span class="c1">#source ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</span>
</span></span><span class="line"><span class="cl"><span class="c1">#source ~/zsh-completions/zsh-completions.plugin.zsh</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># The following lines were added by compinstall</span>
</span></span><span class="line"><span class="cl">zstyle :compinstall filename <span class="s1">&#39;~/.zshrc&#39;</span>
</span></span><span class="line"><span class="cl">autoload -Uz compinit
</span></span><span class="line"><span class="cl">compinit -d ~/.zcompdump
</span></span><span class="line"><span class="cl"><span class="c1"># End of lines added by compinstall</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*:*:*:*:*&#39;</span> menu <span class="k">select</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> auto-description <span class="s1">&#39;specify: %d&#39;</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> completer _expand _complete
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> format <span class="s1">&#39;Completing %d&#39;</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> group-name <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> list-colors <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> list-prompt %SAt %p: Hit TAB <span class="k">for</span> more, or the character to insert%s
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> matcher-list <span class="s1">&#39;m:{a-zA-Z}={A-Za-z}&#39;</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> rehash <span class="nb">true</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> <span class="k">select</span>-prompt %SScrolling active: current selection at %p%s
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> use-compctl <span class="nb">false</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*&#39;</span> verbose <span class="nb">true</span>
</span></span><span class="line"><span class="cl">zstyle <span class="s1">&#39;:completion:*:kill:*&#39;</span> <span class="nb">command</span> <span class="s1">&#39;ps -u $USER -o pid,%cpu,tty,cputime,cmd&#39;</span>
</span></span></code></pre></div><blockquote>
<p>é¡ºä¾¿æ”¾å‡ºæˆ‘çš„ <code>.bashrc</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># export LANG=C.UTF-8</span>
</span></span><span class="line"><span class="cl"><span class="c1"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span>
</span></span><span class="line"><span class="cl"><span class="nv">HISTFILE</span><span class="o">=</span>~/.bash-history
</span></span><span class="line"><span class="cl"><span class="nv">HISTSIZE</span><span class="o">=</span><span class="m">1000</span>
</span></span><span class="line"><span class="cl"><span class="nv">HISTFILESIZE</span><span class="o">=</span><span class="m">2000</span>
</span></span><span class="line"><span class="cl"><span class="nv">HISTCONTROL</span><span class="o">=</span>ignorespace:erasedups
</span></span><span class="line"><span class="cl"><span class="nv">HISTIGNORE</span><span class="o">=</span><span class="s2">&#34;history*:h:exit:ls:ll:la:lğŸ’¿pwd:cd ..&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html</span>
</span></span><span class="line"><span class="cl"><span class="c1"># https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html</span>
</span></span><span class="line"><span class="cl"><span class="c1"># https://unix.stackexchange.com/a/18443</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># append to the history file, don&#39;t overwrite it</span>
</span></span><span class="line"><span class="cl"><span class="nb">shopt</span> -s histappend
</span></span><span class="line"><span class="cl"><span class="c1"># check the window size after each command and, if necessary,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># update the values of LINES and COLUMNS.</span>
</span></span><span class="line"><span class="cl"><span class="nb">shopt</span> -s checkwinsize
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> historymerge <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">history</span> -n<span class="p">;</span> <span class="nb">history</span> -w<span class="p">;</span> <span class="nb">history</span> -c<span class="p">;</span> <span class="nb">history</span> -r<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">trap</span> historymerge EXIT
</span></span><span class="line"><span class="cl"><span class="nv">PROMPT_COMMAND</span><span class="o">=</span><span class="s2">&#34;history -a; </span><span class="nv">$PROMPT_COMMAND</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Shows Git branch name in prompt.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># https://code.mendhak.com/simple-bash-prompt-for-developers-ps1-git/</span>
</span></span><span class="line"><span class="cl"><span class="c1">#function parse_git_dirty {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    if [ -d ./.git ]; then</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        [[ $(git status --porcelain 2&gt; /dev/null) ]] &amp;&amp; echo &#34;*&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    fi</span>
</span></span><span class="line"><span class="cl"><span class="c1">#}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#function parse_git_branch {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    if [ -d ./.git ]; then</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        git branch --no-color 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#34;s/* \(.*\)/ on \1$(parse_git_dirty)/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    fi</span>
</span></span><span class="line"><span class="cl"><span class="c1">#}</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> parse_git_branch <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> -d ./.git <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">branch</span><span class="o">=</span><span class="k">$(</span>git branch --no-color 2&gt; /dev/null <span class="p">|</span> sed -e <span class="s1">&#39;/^[^*]/d&#39;</span> -e <span class="s2">&#34;s/* \(.*\)/\1/&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">dirty</span><span class="o">=</span><span class="k">$(</span>git status --porcelain 2&gt; /dev/null <span class="p">|</span> wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="nv">$dirty</span> -gt <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34; on </span><span class="nv">$branch</span><span class="s2">*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34; on </span><span class="nv">$branch</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Define prompt colors</span>
</span></span><span class="line"><span class="cl"><span class="nv">prompt_color</span><span class="o">=</span><span class="s1">&#39;\[\033[;35m\]&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">info_color</span><span class="o">=</span><span class="s1">&#39;\[\033[1;32m\]&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">prompt_symbol</span><span class="o">=</span>ã‰¿
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">PS1</span><span class="o">=</span><span class="nv">$prompt_color</span><span class="s1">&#39;\[\033]0;\w\007\]\nâ”Œâ”€â”€(&#39;</span><span class="nv">$info_color</span><span class="s1">&#39;\t&#39;</span><span class="nv">$prompt_color</span><span class="s1">&#39;)-[\[\033[0;1m\]\w&#39;</span><span class="nv">$prompt_color</span><span class="s1">&#39;]\[\033[;33m\]`parse_git_branch`\n&#39;</span><span class="nv">$prompt_color</span><span class="s1">&#39;â””â”€&#39;</span><span class="nv">$info_color</span><span class="s1">&#39;\$\[\033[0m\] &#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># PS1=$prompt_color&#39;\[\033]0;\w\007\]\nâ”Œâ”€â”€(&#39;$info_color&#39;\t&#39;$prompt_color&#39;)-[\[\033[0;1m\]\w&#39;$prompt_color&#39;]\[\033[;33m\]`__git_ps1`\n&#39;$prompt_color&#39;â””â”€&#39;$info_color&#39;\$\[\033[0m\] &#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> prompt_color
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> info_color
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> prompt_symbol
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># enable color support of ls, less and man, and also add handy aliases</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -x /usr/bin/dircolors <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">test</span> -r ~/.dircolors <span class="o">&amp;&amp;</span> <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>dircolors -b ~/.dircolors<span class="k">)</span><span class="s2">&#34;</span> <span class="o">||</span> <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>dircolors -b<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LS_COLORS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$LS_COLORS</span><span class="s2">:ow=30;44:&#34;</span> <span class="c1"># fix ls color for folders with 777 permissions</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">ls</span><span class="o">=</span><span class="s1">&#39;ls --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#alias dir=&#39;dir --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#alias vdir=&#39;vdir --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">grep</span><span class="o">=</span><span class="s1">&#39;grep --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">fgrep</span><span class="o">=</span><span class="s1">&#39;fgrep --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">egrep</span><span class="o">=</span><span class="s1">&#39;egrep --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">diff</span><span class="o">=</span><span class="s1">&#39;diff --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">alias</span> <span class="nv">ip</span><span class="o">=</span><span class="s1">&#39;ip --color=auto&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_mb</span><span class="o">=</span><span class="s1">$&#39;\E[1;31m&#39;</span>     <span class="c1"># begin blink</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_md</span><span class="o">=</span><span class="s1">$&#39;\E[1;36m&#39;</span>     <span class="c1"># begin bold</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_me</span><span class="o">=</span><span class="s1">$&#39;\E[0m&#39;</span>        <span class="c1"># reset bold/blink</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_so</span><span class="o">=</span><span class="s1">$&#39;\E[01;33m&#39;</span>    <span class="c1"># begin reverse video</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_se</span><span class="o">=</span><span class="s1">$&#39;\E[0m&#39;</span>        <span class="c1"># reset reverse video</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_us</span><span class="o">=</span><span class="s1">$&#39;\E[1;32m&#39;</span>     <span class="c1"># begin underline</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">LESS_TERMCAP_ue</span><span class="o">=</span><span class="s1">$&#39;\E[0m&#39;</span>        <span class="c1"># reset underline</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># some more ls aliases</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">ll</span><span class="o">=</span><span class="s1">&#39;ls -laFh&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">la</span><span class="o">=</span><span class="s1">&#39;ls -A&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">l</span><span class="o">=</span><span class="s1">&#39;ls -AF1&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># be paranoid</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">cp</span><span class="o">=</span><span class="s1">&#39;cp -i&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">mv</span><span class="o">=</span><span class="s1">&#39;mv -i&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">rm</span><span class="o">=</span><span class="s1">&#39;rm -i&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">extract <span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="o">[</span> -f <span class="nv">$1</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">       <span class="k">case</span> <span class="nv">$1</span> in
</span></span><span class="line"><span class="cl">           *.tar.bz2<span class="o">)</span>   tar xvjf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tar.gz<span class="o">)</span>    tar xvzf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.bz2<span class="o">)</span>       bunzip2 <span class="nv">$1</span>     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.rar<span class="o">)</span>       unrar x <span class="nv">$1</span>     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.gz<span class="o">)</span>        gunzip <span class="nv">$1</span>      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tar<span class="o">)</span>       tar xvf <span class="nv">$1</span>     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tbz2<span class="o">)</span>      tar xvjf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.tgz<span class="o">)</span>       tar xvzf <span class="nv">$1</span>    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.zip<span class="o">)</span>       unzip <span class="nv">$1</span>       <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.Z<span class="o">)</span>         uncompress <span class="nv">$1</span>  <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *.7z<span class="o">)</span>        7z x <span class="nv">$1</span>        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">           *<span class="o">)</span>           <span class="nb">echo</span> <span class="s2">&#34;don&#39;t know how to extract &#39;</span><span class="nv">$1</span><span class="s2">&#39;...&#34;</span> <span class="p">;;</span>
</span></span><span class="line"><span class="cl">       <span class="k">esac</span>
</span></span><span class="line"><span class="cl">   <span class="k">else</span>
</span></span><span class="line"><span class="cl">       <span class="nb">echo</span> <span class="s2">&#34;&#39;</span><span class="nv">$1</span><span class="s2">&#39; is not a valid file!&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="k">fi</span>
</span></span><span class="line"><span class="cl"> <span class="o">}</span>
</span></span></code></pre></div>]]></content></item><item><title>IPv6 åŸç†åŠå¦‚ä½•è®¾ç½® OpenWrt</title><link>https://vicfree.com/2023/02/ipv6-explained-and-setup-in-openwrt/</link><pubDate>Thu, 02 Feb 2023 13:35:25 +0800</pubDate><guid>https://vicfree.com/2023/02/ipv6-explained-and-setup-in-openwrt/</guid><description>å¦‚æœä½ è§‰å¾—çœ‹æ–‡å­—å¾ˆæ— èŠ å¯ä»¥çœ‹ onemarcfifty è€å¸ˆçš„è§†é¢‘ï¼Œå’ŒBç«™è€æ¹¿åŸº IPv6 from scratch - the very basics of IPv6 explained IPv6 explained - SLAAC and DHCPv6 (IPv6 from scratch part 2) IPv6 with OpenWrt https://www.bilibili.com/video/BV1N14y1j7Ku æ­¤æ–‡ç« å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯å¼•ç”¨è‡ª https://github.com/onemarcfifty/cheat-sheets/blob/main/networking/ipv6.md 1. IPv6 åœ°å€</description><content type="html"><![CDATA[<p>å¦‚æœä½ è§‰å¾—çœ‹æ–‡å­—å¾ˆæ— èŠ å¯ä»¥çœ‹ onemarcfifty è€å¸ˆçš„è§†é¢‘ï¼Œå’ŒBç«™è€æ¹¿åŸº</p>
<ol>
<li><a href="https://youtu.be/oItwDXraK1M">IPv6 from scratch - the very basics of IPv6 explained</a></li>
<li><a href="https://youtu.be/jlG_nrCOmJc">IPv6 explained - SLAAC and DHCPv6 (IPv6 from scratch part 2)</a></li>
<li><a href="https://youtu.be/LJPXz8eA3b8">IPv6 with OpenWrt</a></li>
<li><a href="https://www.bilibili.com/video/BV1N14y1j7Ku">https://www.bilibili.com/video/BV1N14y1j7Ku</a></li>
</ol>
<p>æ­¤æ–‡ç« å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯å¼•ç”¨è‡ª <a href="https://github.com/onemarcfifty/cheat-sheets/blob/main/networking/ipv6.md">https://github.com/onemarcfifty/cheat-sheets/blob/main/networking/ipv6.md</a></p>
<h2 id="1-ipv6-åœ°å€å«ä¹‰">1. IPv6 åœ°å€å«ä¹‰</h2>
<ul>
<li>
<p>IPv6 é‡‡ç”¨ 128ä½ çš„åœ°å€ (IPv4ä½¿ç”¨çš„æ˜¯32ä½)ï¼Œçº¦ 340,282,366,920,938,463,463,374,607,431,768,211,456ä¸ª IPv6åœ°å€ã€‚</p>
</li>
<li>
<p>IPv6 å› ä¸ºæ©ç å¤ªé•¿äº†ï¼Œæ‰‹å†™ä¸æ–¹ä¾¿ï¼Œå°±ç”¨ç”¨<code>/</code>åŠ æ•°å­—ï¼Œæ¯”å¦‚ <code>/64</code>ï¼ŒIPv4ä¹Ÿæœ‰ <code>/</code> æ¯”å¦‚ <code>192.168.0.0/24</code> = <code>192.168.0.0 255.255.255.0</code></p>
</li>
<li>
<p>IPv6 ä¸ä½¿ç”¨ IPv4 çš„åè¿›åˆ¶è¿›è¡Œä¹¦å†™ï¼Œè€Œä½¿ç”¨ 16è¿›åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨Windowsè®¡ç®—å™¨çš„ç¨‹åºå‘˜æ¨¡å¼æ¥è®¡ç®— HEX(16è¿›åˆ¶) å’Œ BIN(äºŒè¿›åˆ¶) æ¢ç®—ã€‚F=1111 E=1110 9=1001ã€‚</p>
<pre><code>  FE80:DEAD:BEEF:BABE:0000:0000:0000:0010
  FE80:DEAD:BEEF:BABE:0:0:0:10 (é¦–ä½çš„ 0 å¯ä»¥çœç•¥ï¼Œä¸­é—´å’Œæœ«å°¾ä¸èƒ½çœç•¥)
</code></pre>
</li>
<li>
<p>åœ°å€ä¸­å¾ˆå¤šé‡å¤çš„ 0 å¯ä½¿ç”¨ <code>::</code> è¿›è¡Œç¼©å†™ï¼Œæ–¹ä¾¿äººç±»æŸ¥çœ‹ã€‚</p>
<pre><code>  FE80:DEAD:BEEF:BABE::10
</code></pre>
</li>
<li>
<p>ä½†æ˜¯ï¼ŒåŒä¸€ä¸ªåœ°å€å†…åªèƒ½å­˜åœ¨ä¸€ä¸ª <code>::</code> ç¼©å†™ï¼Œå¤šä¸ª <code>::</code> ä¼šå¯¼è‡´åœ°å€ç¿»è¯‘é•¿åœ°å€å‡ºé”™ï¼Œæ ¹æ® RFC 5952 è€Œä¸”åªç¼©å†™æœ€é•¿çš„0ï¼Œç¼©å†™çŸ­çš„0ä¸ç¬¦åˆè§„åˆ™ã€‚</p>
<pre><code>  FE80::1:0:0:1   (æ­£ç¡®å†™æ³•)
  FE80::1::1      (é”™è¯¯å†™æ³•)
  FE80:0:0:0:1::1ï¼ˆé”™è¯¯å†™æ³•ï¼‰
</code></pre>
</li>
</ul>
<h2 id="2-ipv6-scopeåœ°å€èŒƒå›´">2. IPv6 Scope/åœ°å€èŒƒå›´</h2>
<table>
<thead>
<tr>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>::1/128</td>
<td>Loopback/æœ¬æœºå›ç¯åœ°å€ï¼ˆå°±æ˜¯localhostï¼Œç±»ä¼¼ 127.0.0.1ï¼‰</td>
</tr>
<tr>
<td>fe80::/10</td>
<td>Link-Local/é“¾è·¯æœ¬åœ°åœ°å€ ï¼ˆåŒäº¤æ¢æœºä¸‹çš„åœ°å€ï¼Œä¸èƒ½è½¬å‘åˆ°å…¶ä»–å±€åŸŸç½‘ï¼Œç±»ä¼¼ 169.254.0.0/16)</td>
</tr>
<tr>
<td>fc00::/7</td>
<td>Unique-Local/å”¯ä¸€åŒºåŸŸåœ°å€ (å¤§å±€åŸŸç½‘åœ°å€ï¼Œä¸èƒ½è½¬å‘åˆ°å…¬ç½‘ï¼Œç±»ä¼¼ 192.168.0.0/16)</td>
</tr>
<tr>
<td>2000::/3</td>
<td>Global-Unicast/å…¨çƒå•æ’­ (äº’è”ç½‘åœ°å€ï¼Œå°±æ˜¯å…¬ç½‘ IP)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>IANAç»´æŠ¤å®˜æ–¹çš„ IPv6 åœ°å€åˆ—è¡¨ <a href="https://www.iana.org/assignments/ipv6-address-space/ipv6-address-space.xhtml">https://www.iana.org/assignments/ipv6-address-space/ipv6-address-space.xhtml</a> æˆ–è€… <a href="https://en.wikipedia.org/wiki/Reserved_IP_addresses">https://en.wikipedia.org/wiki/Reserved_IP_addresses</a></p>
</blockquote>
<blockquote>
<p>ç°å®ä¸­ Link-Local/é“¾è·¯æœ¬åœ°åœ°å€ <code>fe80::/10</code> è¢«ä½¿ç”¨çš„åªæœ‰ <code>fe80::/64</code> è¿™ä¸€æ®µï¼Œåªè¦ä½ å¯ç”¨äº† IPv6ï¼Œç½‘å£ä¼šè‡ªåŠ¨æ ¹æ® MACåœ°å€ è‡ªåŠ¨ç”Ÿæˆ IPv6åœ°å€ï¼Œå’Œ IPv4 çš„ <code>169.254.0.0/16</code> åªåœ¨æ²¡æœ‰ DHCP æ—¶æ‰ä¼šç”Ÿæˆçš„æƒ…å†µä¸ä¸€æ ·ã€‚</p>
</blockquote>
<ul>
<li>
<p>æ¯ä¸ª IPv6 åœ°å€éƒ½æœ‰ Scopeï¼ŒOpenWrt å¯ä»¥é€šè¿‡ ssh å†…è¾“å…¥ <code>ip a</code> æ¥æŸ¥çœ‹å¯¹åº” IPv6 çš„ Scope.</p>
<ul>
<li>scope host</li>
<li>scope link</li>
<li>scope global</li>
</ul>
</li>
<li>
<p>å¯ä»¥ç”¨ <a href="https://www.tunnelsup.com/subnet-calculator/">subnetå­ç½‘è®¡ç®—å™¨</a>æ¥ç®—å‡º IP åœ°å€èŒƒå›´</p>
</li>
</ul>
<h2 id="3-ipv6-subnetå­ç½‘">3. IPv6 Subnet/å­ç½‘</h2>
<table>
<thead>
<tr>
<th>æ©ç ä½æ•° (MSB)</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>æœ€å‰ 48 ä½:</td>
<td><strong>ISP ç”µä¿¡ç½‘ç»œ</strong> åœ°å€</td>
</tr>
<tr>
<td>æ¥ç€ 16 ä½:</td>
<td><strong>å¯åˆ’åˆ†å­ç½‘</strong> åœ°å€</td>
</tr>
<tr>
<td>æœ€å 64 ä½:</td>
<td><strong>å­ç½‘å†…è®¾å¤‡</strong> åœ°å€</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>è¿™ä¸ªè¡¨çš„æ„æ€å°±æ˜¯ï¼ŒISP æ¯”å¦‚ç”µä¿¡ï¼Œè´­ä¹°ä¸€ä¸ª <code>2048:DEAD:BEEF::/48</code> ç½‘æ®µï¼Œè¿™ä¸ªç½‘æ®µå¯ä»¥åˆ’åˆ† 2^16=65536 ä¸ªå­ç½‘ï¼Œå¯ä»¥åˆ†é…ç»™ <code>65536</code> ä¸ªç”µä¿¡ç”¨æˆ·ä½¿ç”¨ã€‚æ¯ä¸ªç”¨æˆ· éƒ½èƒ½è·å–åˆ°ä¸€ä¸ª <code>/64</code> çš„åœ°å€ã€‚å¤§éƒ¨åˆ†ISP éƒ½ä¼šç»™ä½  /56 /60ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è‡ªå·±åˆ’åˆ†å­ç½‘ï¼Œå¤šä¸ªLANç­‰ã€‚</p>
</li>
<li>
<p><a href="https://learn.microsoft.com/zh-cn/azure/virtual-network/ip-services/ipv6-overview">å¾®è½¯è¯´</a> IPv6 çš„å­ç½‘å¤§å°åªèƒ½æ˜¯ /64ã€‚ å°†æ¥å½“ä½ å†³å®šå°†å­ç½‘è·¯ç”±åˆ°æœ¬åœ°ç½‘ç»œæ—¶ï¼Œè¿™ç§å¤§å°å¯ä»¥ç¡®ä¿å…¼å®¹æ€§ï¼Œå› ä¸ºæŸäº›è·¯ç”±å™¨åªèƒ½æ¥å— /64 IPv6 è·¯ç”±ã€‚</p>
</li>
</ul>
<h2 id="4-dhcpv6-vs-slaac">4. DHCPv6 vs SLAAC</h2>
<ul>
<li>
<p><code>Static</code> å›ºå®š IPv6 åœ°å€ï¼Œçº¯æ‰‹åŠ¨è¾“å…¥ IPv6 åœ°å€ï¼Œä½ åƒçš„å¾ˆé¥±å¯ä»¥è¿™ä¹ˆæã€‚</p>
</li>
<li>
<p><code>SLAAC</code>(stateless address autoconfiguration)ï¼Œä½ çš„ç”µè„‘è¯»å–ä½ çš„è·¯ç”±å™¨åœ¨å±€åŸŸç½‘å…¬å‘Šçš„ Prefix Delegated/PDï¼Œæ¥è‡ªåŠ¨è®¾ç½® IPv6 åœ°å€ï¼ŒåŒæ—¶ä½ çš„ç”µè„‘ä¹Ÿä¼šæƒ³å±€åŸŸç½‘å…¬å‘Šï¼Œæˆ‘è¦ç”¨è‡ªå·±ç”Ÿæˆçš„è¿™ä¸ªIPï¼Œå¤§å®¶æ²¡æ„è§æˆ‘å°±ç”¨äº†å•Šã€‚</p>
</li>
<li>
<p><code>DHCPv6</code> ä½ çš„ç”µè„‘ï¼Œå‘è·¯ç”±å™¨ç”³è¯· IPv6 åœ°å€ï¼Œå’Œ IPv4 ä¸€æ ·ã€‚</p>
</li>
</ul>
<blockquote>
<p>åŒä¸€ä¸ªç½‘å£èƒ½åŒæ—¶æ‹¥æœ‰å¤šä¸ª IPv4 åœ°å€ï¼ŒIPv6 ä¹Ÿä¸€æ ·ï¼Œå¤§éƒ¨åˆ†è®¾å¤‡éƒ½æ˜¯åŒæ—¶æ‰“å¼€ SLAAC + DHCPv6ï¼Œæ‰€ä»¥ä½ çš„ç”µè„‘å¯ä»¥è·å–å¾ˆå¤šä¸ª IPv6åœ°å€ã€‚</p>
</blockquote>
<p>DHCPv6 å’Œ SLAAC æ˜¯IPv6ä¸­ä¸¤ç§ä¸åŒçš„åœ°å€è‡ªåŠ¨é…ç½®æ–¹æ³•ã€‚å®ƒä»¬çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>
<p><code>SLAAC</code> æ˜¯æ— çŠ¶æ€çš„ï¼Œå³è·¯ç”±å™¨ä¸éœ€è¦è®°å½•æˆ–ç®¡ç†åˆ†é…ç»™ç»ˆç«¯è®¾å¤‡çš„åœ°å€ï¼Œè€Œæ˜¯é€šè¿‡é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰å‘ç»ˆç«¯è®¾å¤‡å‘é€è·¯ç”±é€šå‘Šï¼ˆRAï¼‰æ¶ˆæ¯ï¼ŒåŒ…å«ç½‘ç»œå‰ç¼€ã€å‰ç¼€é•¿åº¦å’Œé»˜è®¤ç½‘å…³åœ°å€ç­‰ä¿¡æ¯ï¼Œè®©ç»ˆç«¯è®¾å¤‡è‡ªå·±ç”Ÿæˆå…¨å±€å”¯ä¸€çš„IPv6åœ°å€ã€‚</p>
</li>
<li>
<p><code>DHCPv6</code> å¯ä»¥æ˜¯æœ‰çŠ¶æ€çš„æˆ–æ— çŠ¶æ€çš„ï¼Œå³è·¯ç”±å™¨å¯ä»¥è®°å½•æˆ–ç®¡ç†åˆ†é…ç»™ç»ˆç«¯è®¾å¤‡çš„åœ°å€ï¼Œä¹Ÿå¯ä»¥ä¸è®°å½•æˆ–ç®¡ç†ã€‚</p>
<ul>
<li>
<p>æœ‰çŠ¶æ€çš„ DHCPv6 æ„å‘³ç€è·¯ç”±å™¨é€šè¿‡ DHCPv6 åè®®å‘ç»ˆç«¯è®¾å¤‡åˆ†é… IPv6 åœ°å€ï¼Œå¹¶æä¾›å…¶ä»–ä¿¡æ¯ï¼Œå¦‚ DNS æœåŠ¡å™¨ã€åŸŸåç­‰ã€‚</p>
</li>
<li>
<p>æ— çŠ¶æ€çš„ DHCPv6 æ„å‘³ç€è·¯ç”±å™¨ä¸åˆ†é…IPv6åœ°å€ï¼Œè€Œæ˜¯è®©ç»ˆç«¯è®¾å¤‡ä½¿ç”¨SLAACç”Ÿæˆåœ°å€ï¼Œå¹¶é€šè¿‡DHCPv6åè®®æä¾›å…¶ä»–ä¿¡æ¯ã€‚</p>
</li>
</ul>
</li>
<li>
<p>SLAAC å’Œ DHCPv6 ä¹‹é—´è¿˜æœ‰ä¸€äº›å…¶ä»–çš„åŒºåˆ«ï¼Œæ¯”å¦‚ SLAAC æ”¯æŒéšç§æ‰©å±•ï¼ˆPrivacy Extensionsï¼‰ï¼Œå¯ä»¥è®©ç»ˆç«¯è®¾å¤‡å®šæœŸæ›´æ¢ä¸´æ—¶ IPv6 åœ°å€ä»¥ä¿æŠ¤éšç§ï¼›è€Œ DHCPv6 æ”¯æŒç§Ÿçº¦ï¼ˆLeaseï¼‰æœºåˆ¶ï¼Œå¯ä»¥è®©è·¯ç”±å™¨å›æ”¶è¿‡æœŸæˆ–æœªä½¿ç”¨çš„ IPv6 åœ°å€ä»¥èŠ‚çœèµ„æºã€‚</p>
</li>
</ul>
<h1 id="openwrt-å®è·µ">OpenWrt å®è·µ</h1>
<blockquote>
<p>é»˜è®¤ OpenWrt ä¼šé»˜è®¤è‡ªå¸¦ IPv6 çš„è®¾ç½®ï¼Œä½†æ˜¯æœ‰è®¾ç½®è¿˜ä¸å¤Ÿï¼Œéœ€è¦å®‰è£… IPv6 ç»„ä»¶ï¼ŒOpenWrtå®˜æ–¹æœ€ä½è¦æ±‚ï¼šDHCPv6 å®¢æˆ·ç«¯ (<strong>odhcp6c</strong>), RA &amp; DHCPv6 æœåŠ¡å™¨ (<strong>odhcpd</strong>) å’Œ IPv6 é˜²ç«å¢™ (<strong>ip6tables</strong>) è¿˜æœ‰ Luciç½‘é¡µé…ç½® çš„ (<strong>luci-proto-ipv6</strong>ï¼‰</p>
</blockquote>
<blockquote>
<p>å› ä¸ºé»˜è®¤ IPv6 å…¨éƒ¨éƒ½æ˜¯å…¬ç½‘ï¼Œæ²¡æœ‰ NATåœ°å€ è½¬æ¢ï¼Œæ‰€ä»¥è¦è®°ä½ IPv6 åœ°å€æµåŠ¨æ–¹å‘æ˜¯ä» <code>WAN</code> -&gt; <code>LAN</code> -&gt; <code>äºŒçº§è·¯ç”± WAN</code> -&gt; <code>äºŒçº§è·¯ç”± LAN</code>ï¼Œä¸ºäº†è®©ä¸‹çº§ç«¯å£è·å– <code>Prefix Delegated/PD</code>ï¼Œæˆ– <code>DHCPv6 Relay</code>ï¼Œé‚£ä¹ˆä¸Šçº§çš„ç«¯å£å°±éœ€è¦å¼€å¯ <code>Delegate IPv6 prefixes/å§”æ‰˜ IPv6 å‰ç¼€</code> æˆ– <code>Relay/ä¸­ç»§</code></p>
</blockquote>
<ul>
<li>é¦–å…ˆæ˜¯ <code>Unique-Local</code> åœ°å€ï¼Œç±»ä¼¼æœ¬åœ°å±€åŸŸç½‘åœ°å€ å¦‚ 192.168.0.0/16ï¼Œä¾›å†…éƒ¨å±€åŸŸç½‘ä½¿ç”¨ï¼Œé€‚ç”¨äºç»„å»ºæœ‰å¾ˆå¤šåˆ†æ”¯æœºæ„çš„å¤§å‹ IPv6 å±€åŸŸç½‘ï¼Œå®¶ç”¨å¯ä»¥ä¸ç”¨å¼€ã€‚
<ul>
<li>è¿›å…¥<code>OpenWrt</code> -&gt; <code>Network/ç½‘ç»œ</code> -&gt; <code>Interfaces/æ¥å£</code> -&gt; <code>Global network options/å…¨å±€ç½‘ç»œé€‰é¡¹</code></li>
<li><code>IPv6 ULA-Prefix/IPv6 ULA å‰ç¼€</code>ï¼Œè¿™é‡Œå¯ä»¥å¡«å†™ä»»æ„ fc00::/7 åœ°å€å†… æœ€å¤§ FDFF çš„åœ°å€ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æƒ…æ™¯1---ä»-pppoe-è·å–-ipv6-prefix-åœ°å€">æƒ…æ™¯1 - ä» PPPOE è·å– IPv6 Prefix åœ°å€</h3>
<ul>
<li>
<p>è·å– <code>IPv6-PD</code>, ç±»ä¼¼ <code>2048:DEAD:BEEF::/60</code></p>
</li>
<li>
<p><code>Network/ç½‘ç»œ</code> -&gt; <code>Interfaces/æ¥å£</code></p>
<ul>
<li>
<p><code>WAN</code> -&gt;  <code>Edit/ç¼–è¾‘</code> -&gt;  <code>Advanced Settings/é«˜çº§è®¾ç½®</code></p>
<ul>
<li><code>Obtain IPv6 address/è·å– IPv6 åœ°å€</code> -&gt;  <code>Automatic/è‡ªåŠ¨</code>ã€‚å¦‚æœé€‰æ‹© <code>Manual/æ‰‹åŠ¨</code>ï¼Œå°†ä¼šå…³é—­ DHCPv6 å’Œ SLAACã€‚</li>
<li><code>Delegate IPv6 prefixes/å§”æ‰˜ IPv6 å‰ç¼€</code> -&gt;  <code>æ‰“å‹¾âœ“</code>ï¼Œå¦‚æœä¸æ‰“å‹¾ï¼Œè·¯ç”±å™¨ LANå£ å°†ä¸ä¼šè‡ªåŠ¨åˆ†é…åˆ° å…¬ç½‘IPv6 åœ°å€ã€‚</li>
</ul>
</li>
<li>
<p><code>LAN</code> -&gt;  <code>Edit/ç¼–è¾‘</code> -&gt;  <code>Advanced Settings/é«˜çº§è®¾ç½®</code></p>
<ul>
<li><code>Delegate IPv6 prefixes/å§”æ‰˜ IPv6 å‰ç¼€</code> -&gt;  <code>æ‰“å‹¾âœ“</code>ï¼Œå¦‚æœä¸æ‰“å‹¾ï¼Œä½ çš„äºŒçº§è·¯ç”±å°†ä¸ä¼šè·å– å…¬ç½‘IPv6 åˆ†é…è§„åˆ™ã€‚</li>
<li><code>IPv6 assignment length/IPv6 åˆ†é…é•¿åº¦</code> -&gt;  é€‰æ‹©æˆ–è¾“å…¥å¤§äº WANå£ <code>IPv6-PD</code> çš„æ•°å­—ï¼Œå¦‚æœä½ æœ‰å¤š LANï¼Œæˆ–è€…äºŒçº§è·¯ç”±ï¼Œè¯·ä½¿ç”¨ä½¿ç”¨<a href="https://www.tunnelsup.com/subnet-calculator/">subnetå­ç½‘è®¡ç®—å™¨</a>åˆç†åˆ†é…å­ç½‘ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¼€å¯<code>DHCPv6</code> or <code>SLAAC</code></p>
<ul>
<li><code>LAN</code> -&gt; <code>Edit/ç¼–è¾‘</code> -&gt; <code>DHCP Server/æœåŠ¡å™¨</code> -&gt; <code>IPv6 Setting/è®¾ç½®</code>
<ul>
<li><code>RA æœåŠ¡</code>, è®¾ç½®ä¸º <code>server/æœåŠ¡å™¨æ¨¡å¼</code>ã€‚
<ul>
<li>Router Advertisementï¼Œè·¯ç”±é€šå‘Šï¼Œè·¯ç”±å™¨ä¸»åŠ¨åœ¨ç½‘ç»œä¸Šå‘Šè¯‰å±€åŸŸç½‘è®¾å¤‡ï¼Œæˆ‘æ˜¯è·¯ç”±å™¨ã€‚</li>
</ul>
</li>
<li><code>DHCPv6</code>, è®¾ç½®ä¸º <code>server/æœåŠ¡å™¨æ¨¡å¼</code>ã€‚
<ul>
<li>å­—é¢æ„æ€ï¼Œåˆ†é…IPçš„ã€‚</li>
</ul>
</li>
<li><code>NDP Proxy/ä»£ç†</code>, é€‰æ‹©<code>ç¦ç”¨</code>
<ul>
<li>å…¨åNeighbour Discovery Protocol Proxyï¼Œä¸Šä¸‹çº§è·¯ç”±ä¹‹é—´è½¬å‘ <code>Neighbor Solicitation + Neighbor Advertisement</code> æ¶ˆæ¯ã€‚</li>
</ul>
</li>
<li><strong>relay/ä¸­ç»§æ¨¡å¼</strong>ï¼Œè½¬å‘ ä¸Šçº§è·¯ç”±/ISP IPv6 å‚æ•°</li>
<li><strong>server/æœåŠ¡å™¨æ¨¡å¼</strong>ï¼Œè·¯ç”±å™¨è‡ªå·±ä½œä¸ºæœåŠ¡å™¨ï¼Œåˆ†å‘ IPv6 å‚æ•°</li>
<li><strong>hybrid/æ··åˆæ¨¡å¼</strong>ï¼Œè·¯ç”±å™¨å…ˆå°è¯•è½¬å‘ ä¸Šçº§è·¯ç”±/ISP çš„å‚æ•°ï¼Œå¦‚æœ ISP æ²¡æœ‰ï¼Œåˆ™è‡ªå·±ä½œä¸ºæœåŠ¡å™¨åˆ†å‘ IPv6 å‚æ•°ã€‚</li>
</ul>
</li>
<li><code>LAN</code> -&gt; <code>Edit/ç¼–è¾‘</code> -&gt; <code>DHCP Server/æœåŠ¡å™¨</code> -&gt; <code>IPv6 RA Settings/è®¾ç½®</code>
<ul>
<li><code>Enable SLAAC</code> -&gt; <code>æ‰“å‹¾âœ“</code>ï¼Œå¾ˆå¤šè®¾å¤‡ä¸æ”¯æŒ<code>DHCPv6</code> åªæ”¯æŒ <code>SLAAC</code>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>é‚»å±…å‘ç°åè®®ä»£ç†ï¼ˆNeighbor Discovery Protocol Proxyï¼ŒND Proxyï¼‰æ˜¯ä¸€ç§ç”¨äº IPv6 çš„æœåŠ¡ï¼Œç±»ä¼¼äº IPv4 çš„ä»£ç†ARPï¼ˆProxy ARPï¼‰ï¼Œå¯ä»¥åœ¨ä¸èƒ½åœ¨é“¾è·¯å±‚è¿›è¡Œæ¡¥æ¥çš„æƒ…å†µä¸‹ï¼Œå®ç°åœ¨åŒä¸€ä¸ªå­ç½‘å‰ç¼€å†…æ¡¥æ¥å¤šä¸ªç½‘ç»œæ®µã€‚å®ƒçš„ä½œç”¨æ˜¯è®©ä¸€ä¸ªè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ï¼‰ä»£æ›¿å¦ä¸€ä¸ªè®¾å¤‡ï¼ˆå¦‚ä¸»æœºï¼‰å“åº”é‚»å±…è¯·æ±‚ï¼ˆNeighbor Solicitationï¼‰å’Œé‚»å±…é€šå‘Šï¼ˆNeighbor Advertisementï¼‰æ¶ˆæ¯ï¼Œä»è€Œä½¿ä¸¤ä¸ªä¸åŒç½‘ç»œæ®µçš„è®¾å¤‡èƒ½å¤Ÿäº’ç›¸é€šä¿¡ã€‚</p>
</blockquote>
<blockquote>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå®¶åº­ç½‘ç»œä¸­ï¼Œæœ‰ä¸¤ä¸ªä¸åŒçš„æ— çº¿æ¥å…¥ç‚¹ï¼ˆAPï¼‰ï¼Œåˆ†åˆ«è¿æ¥åˆ°ä¸»è·¯ç”±å™¨ä¸Šã€‚å¦‚æœä¸»è·¯ç”±å™¨æ”¯æŒ ND Proxy åŠŸèƒ½ï¼Œå®ƒå°±å¯ä»¥åœ¨æ”¶åˆ°æ¥è‡ªä¸€ä¸ªAPä¸‹çš„ä¸»æœºAçš„é‚»å±…è¯·æ±‚æ¶ˆæ¯æ—¶ï¼Œä»£æ›¿å¦ä¸€ä¸ª AP ä¸‹çš„ä¸»æœºBå‘é€é‚»å±…é€šå‘Šæ¶ˆæ¯ï¼Œä»è€Œè®©Aå’ŒBèƒ½å¤Ÿå»ºç«‹è¿æ¥ã€‚</p>
</blockquote>
<h3 id="æƒ…æ™¯2---ä»-dhcpv6-è·å–-ipv6-åœ°å€æ— -prefix">æƒ…æ™¯2 - ä» DHCPv6 è·å– IPv6 åœ°å€ï¼Œæ—  Prefixã€‚</h3>
<ul>
<li><code>Network/ç½‘ç»œ</code> -&gt; <code>Interfaces/æ¥å£</code> -&gt; æ–°å¢ä¸€ä¸ª DHCPv6 çš„ <code>WAN6</code> æ¥å£ï¼ˆé»˜è®¤å°±æœ‰ï¼Œæ²¡æœ‰å°±æ–°å¢ï¼‰</li>
<li><code>WAN6</code> -&gt; <code>Edit/ç¼–è¾‘</code>
<ul>
<li><code>General Settings/å¸¸è§„è®¾ç½®</code>
<ul>
<li><code>Request IPv6-address/è¯·æ±‚ IPv6 åœ°å€</code> -&gt; é€‰æ‹©<code>try</code></li>
<li><code>Request IPv6-prefix of length/è¯·æ±‚æŒ‡å®šé•¿åº¦çš„ IPv6 å‰ç¼€</code> -&gt; ç†è®ºä¸Šæ­¤æƒ…æ™¯ä¸‹æ˜¯æ²¡æœ‰<code>Prefix</code>ï¼Œè‡ªç„¶è¿™ä¸ªè®¾ç½®ä¹Ÿå°±æ— æ•ˆäº†ã€‚</li>
</ul>
</li>
<li><code>Advanced Settings/é«˜çº§è®¾ç½®</code>
<ul>
<li><code>Delegate IPv6 prefixes/å§”æ‰˜ IPv6 å‰ç¼€</code> -&gt; ç†è®ºä¸Šæ­¤æƒ…æ™¯ä¸‹æ˜¯æ²¡æœ‰<code>Prefix</code>ï¼Œè‡ªç„¶è¿™ä¸ªè®¾ç½®ä¹Ÿå°±æ— æ•ˆäº†ã€‚</li>
</ul>
</li>
<li><code>DHCP Server/æœåŠ¡å™¨</code>
<ul>
<li><code>General Setup/å¸¸è§„è®¾ç½®</code>
<ul>
<li><code>Ignore interface/å¿½ç•¥æ­¤æ¥å£</code> -&gt; è¯·<code>æ‰“å‹¾âœ“</code>ï¼Œå› ä¸º IPV6 åªéœ€è¦ä¸‹é¢ DHCPv6 ä¸­ç»§æœåŠ¡ã€‚</li>
</ul>
</li>
<li><code>IPv6 Setting/è®¾ç½®</code>
<ul>
<li><code>Designated master/æŒ‡å®šçš„ä¸»æ¥å£</code> -&gt; å¿…é¡»<code>æ‰“å‹¾âœ“</code></li>
<li><code>RA æœåŠ¡</code> -&gt; è®¾ç½®ä¸º <code>relay/ä¸­ç»§æ¨¡å¼</code>ã€‚</li>
<li><code>DHCPv6</code> -&gt; è®¾ç½®ä¸º <code>relay/ä¸­ç»§æ¨¡å¼</code>ã€‚</li>
<li><code>NDP Proxy/ä»£ç†</code> -&gt; è®¾ç½®ä¸º <code>relay/ä¸­ç»§æ¨¡å¼</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>LAN</code> - <code>Edit/ç¼–è¾‘</code>
<ul>
<li><code>Advanced Settings/é«˜çº§è®¾ç½®</code>
<ul>
<li><code>Delegate IPv6 prefixes/å§”æ‰˜ IPv6 å‰ç¼€</code> -&gt; ç†è®ºä¸Šæ­¤æƒ…æ™¯ä¸‹æ˜¯æ²¡æœ‰<code>Prefix</code>ï¼Œè‡ªç„¶è¿™ä¸ªè®¾ç½®ä¹Ÿå°±æ— æ•ˆäº†ã€‚</li>
<li><code>IPv6 assignment length/IPv6 åˆ†é…é•¿åº¦</code> -&gt; ç†è®ºä¸Šæ­¤æƒ…æ™¯ä¸‹æ˜¯æ²¡æœ‰<code>Prefix</code>ï¼Œè‡ªç„¶è¿™ä¸ªè®¾ç½®ä¹Ÿå°±æ— æ•ˆäº†ã€‚</li>
</ul>
</li>
<li><code>DHCP Server/æœåŠ¡å™¨</code> -&gt; <code>IPv6 Setting/è®¾ç½®</code>
<ul>
<li><code>RA æœåŠ¡</code> -&gt; è®¾ç½®ä¸º <code>relay/ä¸­ç»§æ¨¡å¼</code>ã€‚</li>
<li><code>DHCPv6</code> -&gt; è®¾ç½®ä¸º <code>relay/ä¸­ç»§æ¨¡å¼</code>ã€‚</li>
<li><code>NDP Proxy/ä»£ç†</code> -&gt; è®¾ç½®ä¸º <code>relay/ä¸­ç»§æ¨¡å¼</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ä¸ªæ€§åŒ–è·¯ç”±å™¨-ipv6-åœ°å€æ®µ">ä¸ªæ€§åŒ–è·¯ç”±å™¨ IPv6 åœ°å€æ®µ</h3>
<ul>
<li>ä»»æ„ <code>LAN</code> æ¥å£ -&gt; <code>Edit/ç¼–è¾‘</code> -&gt; <code>Advanced Settings/é«˜çº§è®¾ç½®</code>
<ul>
<li><code>IPv6 assignment hint/åˆ†é…æç¤º</code>
<ul>
<li>æ¯”å¦‚ ISP åˆ†é…ç»™ä½  <code>2048:DEAD:BEEF:bab0::/60</code>ï¼Œ<code>/60</code> è¯´æ˜ä½ å¯ä»¥åˆ†é… 16ä¸ª <code>/64</code> çš„ å¤šLANå£/å¤šå­ç½‘ï¼Œè¿™é‡Œå¡« <code>e</code>ï¼Œä½ çš„ LAN IPv6 åœ°å€ å°±ä¼šå˜æˆ <code>2048:DEAD:BEEF:babe::1/64</code> ä¸å…¶ä»– LAN åšåŒºåˆ†ã€‚</li>
</ul>
</li>
<li><code>IPv6 suffix/åç¼€</code>
<ul>
<li>æ¯”å¦‚ ISP åˆ†é…ç»™ä½  <code>2048:DEAD:BEEF:bab0::/60</code>ï¼Œå¡« <code>99</code> ä½ çš„ LAN IPv6 åœ°å€ å°±ä¼šå˜æˆ <code>2048:DEAD:BEEF:bab0::99/60</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ä¸ªæ€§åŒ–ç”µè„‘-ipv6-åœ°å€">ä¸ªæ€§åŒ–ç”µè„‘ IPv6 åœ°å€</h3>
<ul>
<li>è¿›å…¥<code>OpenWrt</code> -&gt; <code>Network/ç½‘ç»œ</code> -&gt; <code>DHCP/DNS</code>
<ul>
<li><code>Static Lease/é™æ€åœ°å€åˆ†é…</code> -&gt; <code>æ–°å¢/ä¿®æ”¹é™æ€åˆ†é…æ¡ç›®</code> -&gt; <code>IPv6-Suffix/åç¼€</code></li>
<li>å¡«å†™ä»»æ„4ä½ä»¥ä¸‹16è¿›åˆ¶æ•° -&gt; å¦‚<code>1234</code>æˆ–è€…<code>DEAD</code>ã€‚</li>
</ul>
</li>
</ul>
<h2 id="é˜²ç«å¢™">é˜²ç«å¢™</h2>
<blockquote>
<p>å…¨ä¸–ç•Œéƒ½å¯ä»¥ Ping é€šä½ çš„å…¬ç½‘ IPv6åœ°å€ï¼Œé‚£æ˜¯å› ä¸ºOpenWrté˜²ç«å¢™é€šä¿¡è§„åˆ™å¼€é€šäº†Ping <code>Allow-ICMPv6-Input</code>ï¼Œä½ ä¸æƒ³è¢« Pingï¼Œå¯ä»¥å…³é—­ã€‚</p>
</blockquote>
<ul>
<li>ä¸¾ä¸ª<a href="https://openwrt.org/docs/guide-user/firewall/fw3_configurations/fw3_ipv6_examples">å®˜æ–¹æ–‡æ¡£</a>é‡Œçš„ä¾‹å­</li>
</ul>
<pre tabindex="0"><code>uci add firewall rule
uci set firewall.@rule[-1].name=&#34;Forward-IPv6&#34;
uci set firewall.@rule[-1].src=&#34;wan&#34;
uci set firewall.@rule[-1].dest=&#34;lan&#34;
uci set firewall.@rule[-1].dest_ip=&#34;::DEAD/-64&#34;
uci set firewall.@rule[-1].family=&#34;ipv6&#34;
uci set firewall.@rule[-1].proto=&#34;tcp udp&#34;
uci set firewall.@rule[-1].target=&#34;ACCEPT&#34;
uci commit firewall
/etc/init.d/firewall restart
</code></pre><h2 id="ipv6-çš„ä½¿ç”¨">IPv6 çš„ä½¿ç”¨</h2>
<ul>
<li>
<p>ä½¿ç”¨IPv6åœ°å€è®¿é—® Webç½‘é¡µéœ€è¦åŠ  <code>[]</code>ï¼Œ<code>http://[2048:DEAD:BEEF:bab0::99]</code> æˆ–è€… <code>http://[2048:DEAD:BEEF:bab0::99]:80</code></p>
</li>
<li>
<p>è¿˜æ˜¯å¼„åŸŸåå§ï¼Œè°è¦è®°è¿™ä¹ˆé•¿çš„åœ°å€ã€‚</p>
</li>
<li>
<p>IPv6 ç»„æ’­åœ°å€ï¼Œ<a href="https://www.iana.org/assignments/ipv6-multicast-addresses/ipv6-multicast-addresses.xhtml">å®Œæ•´æ¸…å•è§ IANA</a></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>åœ°å€</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ff02::1</td>
<td>å†…ç½‘æ‰€æœ‰IPv6è®¾å¤‡</td>
</tr>
<tr>
<td>ff02::2</td>
<td>å†…ç½‘æ‰€æœ‰è·¯ç”±å™¨ï¼ˆä¸»åŠ¨é€šè¿‡RAé€šå‘Šè‡ªå·±æ˜¯è·¯ç”±å™¨ï¼‰</td>
</tr>
<tr>
<td>ff02::fb</td>
<td>mDNSv6ï¼ˆHomeKit, AirPlay ä¼šç”¨åˆ°ï¼‰</td>
</tr>
<tr>
<td>ff02::1:2</td>
<td>å†…ç½‘æ‰€æœ‰DHCPæœåŠ¡å™¨ï¼ˆä¸»åŠ¨é€šè¿‡RAé€šå‘Šè‡ªå·±DHCPæœåŠ¡å™¨ï¼‰</td>
</tr>
<tr>
<td>ff02::101</td>
<td>å†…ç½‘æ‰€æœ‰NTPæœåŠ¡å™¨ï¼ˆåŒä¸Šï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="å•æ’­unicast-ç»„æ’­multicast-ä»»æ’­anycast-å¹¿æ’­broadcast">å•æ’­/Unicast ç»„æ’­/Multicast ä»»æ’­/Anycast å¹¿æ’­/Broadcast</h3>
<ul>
<li><code>IPV6</code> æ²¡æœ‰ å¹¿æ’­/Broadcast</li>
<li><code>å•æ’­/Unicast</code>: ä¸€å¯¹ä¸€ï¼Œä¿—ç§°ç§èŠ</li>
<li><code>ç»„æ’­/Multicast</code>: ç¾¤èŠï¼ŒåŠ ç¾¤çš„æ‰èƒ½æ”¶åˆ°ä¿¡æ¯ï¼Œå¯éšæ—¶åŠ ç¾¤é€€ç¾¤ã€‚</li>
<li><code>ä»»æ’­/Anycast</code>: å¤šä¸ªæœåŠ¡å™¨æ‹¥æœ‰ç›¸åŒçš„ IPåœ°å€ï¼Œå®¢æˆ·ç«¯ä¼šé€‰æ‹©æœ€è¿‘çš„è¿›è¡Œé“¾æ¥ï¼Œæ¯”å¦‚æ‰“ç”µè¯ç»™ 119ï¼Œä¼šè‡ªåŠ¨è·¯ç”±åˆ°ä½ å®¶é™„è¿‘çš„æ¶ˆé˜²ç«™ã€‚</li>
<li><code>å¹¿æ’­/Broadcast</code>: ç±»ä¼¼å¹¿åœºèˆçš„å–‡å­ï¼Œé™¤éæ–­ç½‘ï¼Œå¦åˆ™ä½ ä¼šä¸€ç›´å¬åˆ°å¹¿åœºèˆçš„å£°éŸ³ã€‚</li>
</ul>
]]></content></item><item><title>TruenNAS è®¾ç½®ç»éªŒåˆ†äº«</title><link>https://vicfree.com/2023/01/truenas-setup-guide/</link><pubDate>Wed, 18 Jan 2023 15:18:38 +0800</pubDate><guid>https://vicfree.com/2023/01/truenas-setup-guide/</guid><description>ç™½å«–ç‹Linus å¤§éª‚ TrueNAS è®¾ç½®ä¸äººæ€§åŒ–ï¼ˆå› ä¸ºä»–ä» UNRAID åˆ‡æ¢åˆ° TruenNAS äº†ï¼‰ï¼Œè®¾ç½®å¤æ‚ä¸”æç¤ºå°‘ã€‚åœ¨å®ƒè¿˜å«ä½œ FreeNAS æ—¶ï¼Œæˆ‘æ˜¯è¿™ä¹ˆè¯„ä»·çš„ï¼šâ€œåäººç±»çš„UIï¼Œæ“ä½œé€»è¾‘æ··ä¹±â€</description><content type="html"><![CDATA[<p>ç™½å«–ç‹Linus å¤§éª‚ TrueNAS è®¾ç½®ä¸äººæ€§åŒ–ï¼ˆå› ä¸ºä»–ä» UNRAID åˆ‡æ¢åˆ° TruenNAS äº†ï¼‰ï¼Œè®¾ç½®å¤æ‚ä¸”æç¤ºå°‘ã€‚åœ¨å®ƒè¿˜å«ä½œ FreeNAS æ—¶ï¼Œæˆ‘æ˜¯è¿™ä¹ˆè¯„ä»·çš„ï¼šâ€œåäººç±»çš„UIï¼Œæ“ä½œé€»è¾‘æ··ä¹±â€ã€‚ æ‰€ä»¥é‚£æ—¶æˆ‘åœ¨ç”¨ NAS4Free(åæ¥æ”¹åå« XigmaNAS)ï¼Œè‡ªä»FreeNASå®Œå–„UIä¹‹åï¼Œå¹¶æ”¹å TrueNASï¼Œæˆ‘ä¹Ÿçœ‹åˆ°äº†å¾ˆå¤š UIé€»è¾‘ çš„æ”¹è¿›ï¼Œæˆ‘å°±å¼€å§‹è½¬ TrueNAS äº†ï¼ŒXigmaNAS å»ºç«‹çš„ ZFS å­˜å‚¨æ± ç›´æ¥å¯¼å…¥ï¼Œæ— ä»»ä½•é—®é¢˜ï¼ˆæˆ‘æ²¡é—®é¢˜ï¼Œä¸ä»£è¡¨ä½ ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œè¶Šèœçš„äººé—®é¢˜è¶Šå¤šï¼‰ã€‚</p>
<p>ç›®å‰ TrueNAS è¿˜æ˜¯æœ‰ä¸å°‘ BUGï¼Œä½†æ˜¯å‡ ä¹ä¸å½±å“ä½ å­˜å‚¨æ–‡ä»¶çš„å®‰å…¨ï¼ŒWEBUI ä¹Ÿæ”¹å–„äº†å¾ˆå¤šï¼ˆè™½ç„¶ TrueNAS æœ€è¿‘å¯¹å­˜å‚¨æ± UIè¿›è¡Œäº†å¤§æ”¹ï¼Œåˆ†å¼€ç®¡ç†å­˜å‚¨æ± å’Œæ•°æ®é›†ï¼Œå¾ˆå¤šè€å¤–UPå¤¸è¿™ä¸ªè®¾è®¡ï¼Œä½†æˆ‘è§‰å¾—è¿˜éœ€è¦ç»§ç»­æ”¹è¿›ï¼Œå½“å‰é¡µé¢ä¾ç„¶å¾ˆå¤æ‚ï¼Œåº”è¯¥é»˜è®¤éšè—ä¸€ä¸‹å½“å‰æ²¡æœ‰ä½¿ç”¨çš„åŠŸèƒ½ï¼‰ï¼Œä½†ä»ä¸é€‚åˆçº¯å°ç™½ã€‚æˆ‘å¯¹ WEBUI å¥½ä¸å¥½ç”¨è¯„æ–­æ ‡å‡†å°±æ˜¯ â€œä»¥æœ€å°‘çš„é¼ æ ‡ç‚¹å‡»æ¬¡æ•°ï¼Œå®Œæˆæˆ‘çš„æ›´æ”¹è¯·æ±‚â€ã€‚</p>
<p>æ‰€ä»¥æˆ‘å°±å†™ä¸€ä¸ªç®€å•çš„é…ç½®å‘å¯¼ï¼Œæƒ³æ·±å…¥ï¼Œå¯ä»¥çœ‹æˆ‘æ–‡ç« åº•éƒ¨æ¨èçš„ä¸€äº›è§†é¢‘å’Œæ–‡ç« ã€‚</p>
<h2 id="å®‰è£…-truenas">å®‰è£… TrueNAS</h2>
<ul>
<li>
<p>ä¸‹è½½ISOï¼ŒRufus DDæ¨¡å¼å†™å…¥Uç›˜</p>
<ul>
<li>
<p>å®‰è£…ç•Œé¢åŒæ—¶é€‰æ‹©ä¸¤ä¸ªç¡¬ç›˜ï¼Œä¼šè‡ªåŠ¨ç»„ ZFS Mirror/é•œåƒï¼Œåä¸€ä¸ªå¯åŠ¨ç›˜ä¹Ÿä¸å½±å“NASå¼€æœºï¼Œå°å·¥ä½œå®¤æ¨èè¿™ä¹ˆæï¼Œä¸ªäººå°±ç®—äº†å§ï¼Œä¸€ä¸ªæ–°ç›˜+å¤‡ä»½æ–‡ä»¶+1å°æ—¶å°±èƒ½æ¢å¤æŒ‚æ‰ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
</li>
<li>
<p>ç°åœ¨ TrueNAS æ¨ root è´¦æˆ·å»å¯†ç åŒ–ï¼Œæ¨èé€‰æ‹©adminç»§ç»­å®‰è£…ï¼Œadminåªèƒ½ç”¨æ¥ç™»å½• WEBUIï¼Œroot æ˜¯åå°è´¦å·ï¼Œæ‰€ä»¥ç™»é™†åæ–°å¢ä¸€ä¸ªè‡ªå·±åå­—çš„è´¦å·æ¥ SMB è®¿é—®å…±äº«ã€‚</p>
</li>
<li>
<p>è®©è‡ªå·±çš„è´¦å·ä¹Ÿèƒ½ç™»å½• WEBUI -&gt; æŠŠè‡ªå·±çš„è´¦å·åŠ å…¥<code>builtin_administrators</code>ç»„ï¼Œé¡ºä¾¿åŠ å…¥ <code>root apps docker</code> ç»„</p>
</li>
</ul>
</li>
</ul>
<h2 id="ç™»å½•ç½‘é¡µui">ç™»å½•ç½‘é¡µUI</h2>
<ul>
<li>
<p>System Setting -&gt; General</p>
<ul>
<li>è°ƒæ—¶åŒºè¯­è¨€ï¼ˆå°±é‚£ä¹ˆå‡ ä¸ªå­—ï¼Œè¿˜è°ƒè¯­è¨€ï¼Ÿå½“å‰22.12ç‰ˆæœ¬å¥½åƒç®€ä½“ä¸­æ–‡ä¸ç”Ÿæ•ˆï¼‰ï¼Œå¤‡ä»½è®¾ç½®åœ¨å³ä¸Šè§’ã€‚</li>
</ul>
</li>
<li>
<p>Network</p>
<ul>
<li>ä» DHCP è°ƒåˆ°å›ºå®š IPï¼Œè®°å¾— æ‰‹åŠ¨åŠ ä¸€ä¸‹ DNS + ç½‘å…³ï¼ŒGlobal Configuration Settings - Nameserver + IPv4 Default Gateway</li>
</ul>
</li>
<li>
<p>Credentials -&gt; Local Users -&gt; Add</p>
<ul>
<li>æ·»åŠ æ–°ç”¨æˆ·ï¼Œåªå¡«å¸¦ * ç”¨æˆ·åå’Œå¯†ç éƒ¨åˆ† + ä¸Šé¢è¯´åˆ°çš„å‡ ä¸ªç»„åå­—ï¼Œå…¶ä»–ä¸æ‡‚ä¸è¦åŠ¨ï¼Œä¸æ‡‚å°±é—®ã€‚</li>
</ul>
</li>
<li>
<p>Storage -&gt; Createæ–°å»ºæ±  / Importå¯¼å…¥æ± </p>
<ul>
<li>åªè¦æ˜¯ZFSéƒ½èƒ½è·¨è®¾å¤‡å¯¼å…¥ï¼Œæ²¡æœ‰é™åˆ¶ã€‚ä½ ä¸æ‡‚æ€ä¹ˆè§„åˆ’å­˜å‚¨æ± ç»“æ„ï¼Œå°±ç‚¹é‚£ä¸ª <code>Suggest Layout</code>ï¼Œä½ çœŸçš„è¦ç ”ç©¶æ€ä¹ˆç»„å­˜å‚¨æ± æ‰å®‰å…¨ï¼Œè¯·ä½ å…ˆå»ç ”ç©¶å†æ¥æ–°å»ºï¼Œå› ä¸ºå­˜å‚¨æ± å»ºå¥½äº†ï¼Œå°±ä¸èƒ½èµ„æ–™æ— æŸçš„ç§»é™¤ç¡¬ç›˜äº†ã€‚</li>
</ul>
</li>
<li>
<p>Datasets(æ•°æ®é›†ï¼Œç±»ä¼¼ç£ç›˜åˆ†åŒº)</p>
<ul>
<li>
<p>å¯æ–°å»ºå¤šä¸ªdatasetï¼Œæ¯ä¸ªdatasetç”¨ä¸åŒçš„ Record Sizeï¼Œæå‡æŸäº›ç¨‹åºå“åº”ã€‚ä½†å¤§å®¶éƒ½æ˜¯ç‰‡å­ï¼Œç›´æ¥1Mèµ·æ­¥å§ã€‚datasetä¸‹é¢å¯ä»¥ç»§ç»­å»ºdatasetï¼Œä¸€ç›´å¥—å¨ƒä¸‹å»ï¼Œè™½ç„¶ SMB åˆ†äº«ä¹‹å dataset æ˜¾ç¤ºä¸ºæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯ä»–æ˜¯ç›¸å½“äºç³»ç»Ÿåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºé…ç½®éƒ½å¯ä»¥ä¸ä¸€æ ·ï¼Œåˆ†åŒºä¹‹å‰ç§»åŠ¨æ–‡ä»¶ä¹Ÿæ˜¯å®Œæ•´å¤åˆ¶+åˆ é™¤ï¼Œä¸ä¼šç¬é—´ç§»åŠ¨æ–‡ä»¶å®Œæˆã€‚</p>
</li>
<li>
<p>LZ4 å‹ç¼©ä¿æŒé»˜è®¤å¼€å¯ï¼Œå‡å¦‚éƒ½æ˜¯ç‰‡å­ æ²¡å•¥å‹ç¼©æ•ˆæœï¼Œä½†æ˜¯å‡å¦‚ä½ ä¿å­˜äº†ä¸€ä¸‹å‹ç¼©ç‡ä½çš„æ–‡ä»¶ï¼Œç³»ç»Ÿä¼šä»¥æä½CPUæ¶ˆè€—å¸®ä½ èŠ‚çœä½ çš„ç£ç›˜æ–‡ä»¶ä½“ç§¯å ç”¨ï¼Œé™¤éç‰¹æ®Šé«˜å¤§ä¸Šåº”ç”¨æœ‰è¦æ±‚ï¼Œä¸è¦å…³LZ4å‹ç¼©ã€‚</p>
</li>
<li>
<p>Atimeï¼Œé»˜è®¤æ¨èå…³é—­ï¼Œæ–‡ä»¶è®¿é—®æ—¶é—´è®°å½•ï¼Œç”¨æå¤§çš„ç£ç›˜å¸¦å®½æ¶ˆè€—æ¥è®°å½•ä½ æ‰“å¼€ç‰‡å­çš„è®¿é—®æ—¶é—´ï¼Œä½ ä¸æƒ³å…³ï¼Œéšä¾¿ä½ ï¼ŒSMBé€Ÿåº¦å‡åŠä¸è¦å“­ã€‚</p>
</li>
<li>
<p>Record Size -&gt; ç‰‡å­ç›´æ¥1Mèµ·ï¼Œä½ å­˜å‚¨æ–‡ä»¶ä½“ç§¯è¶Šå¤§ï¼Œå°±é€‰è¶Šå¤§ã€‚å°æ–‡ä»¶å°±å¾€å°äº†é€‰ï¼Œéšä¾¿æ”¹ï¼Œæ”¹äº†ä¹‹åå†™å…¥çš„æ–‡ä»¶æ‰ä¼šä»¥è¿™ä¸ªå¤§å°å­˜å‚¨ï¼Œä¹‹å‰çš„æ–‡ä»¶çš„Record Sizeè¿˜æ˜¯ä¸å˜ã€‚</p>
</li>
<li>
<p>ACL æ¨è SMB/NFSv4ï¼Œæƒé™ä¿®æ”¹å’ŒWindows NTFSæƒé™ä¸€æ ·ï¼Œä¸€æ¡ä¸€æ¡çš„åŠ æƒé™ã€‚</p>
</li>
<li>
<p>ä»¥ä¸Šé™¤äº†æˆ‘å†™åˆ°çš„ï¼Œå…¶ä»–çš„è®¾ç½®å°±åˆ«ä¹±æ”¹äº†ï¼Œæ”¹äº†ä½ çš„ NAS å°±ä¼šçˆ†ç‚¸ã€‚</p>
</li>
</ul>
</li>
<li>
<p>Shares -&gt; SMB -&gt; Add</p>
<ul>
<li>
<p>Path -&gt; /mnt(æŒ‚è½½ç‚¹) / pool(å­˜å‚¨æ± ) / dataset(æ•°æ®åˆ†åŒº)ã€‚æ¨èåªåˆ†äº« datasetï¼Œä¸åˆ†äº«å­˜å‚¨æ± ï¼Œå› ä¸ºä¸è¿™ä¹ˆåšï¼ŒTrueNASæŠ¥é”™ä¼šå¤šåˆ°è‡ªå·±çœ‹ä¸æ‡‚ï¼Œå…¶ä»–äººä¹Ÿä¸ä¸€å®šçœ‹å¾—æ‡‚ã€‚</p>
</li>
<li>
<p>åˆ†äº«åéšä¾¿è®¾ç½®ï¼Œå…¶ä»–å…¨éƒ¨é»˜è®¤è®¾ç½®ï¼Œä¿å­˜åä¼šå¯åŠ¨SMBæœåŠ¡ï¼Œå‹¾é€‰SMBè‡ªå¯ã€‚</p>
</li>
</ul>
</li>
<li>
<p>Data Protection</p>
<ul>
<li>
<p>Scrub Tasks ä¼šè‡ªåŠ¨æŠŠä½ çš„å­˜å‚¨æ± åŠ è¿›å»ï¼Œæ¯ä¸ªæœˆæ ¡éªŒä¿®å¤ä½ çš„å­˜å‚¨æ± æ–‡ä»¶æŸåï¼Œåˆ«ä¹±åŠ¨é»˜è®¤è®¾ç½®ã€‚</p>
</li>
<li>
<p>Periodic Snapshot Tasks å®šæœŸå¿«ç…§ï¼Œéœ€è¦å¯¹å…¨éƒ¨ dataset è¿›è¡Œå¿«ç…§ï¼ŒèŠ‚çœæ—¶é—´çš„æ–¹æ³•å¯ä»¥é€‰ å­˜å‚¨æ± +Recursiveé€’å½’ï¼ŒæŠŠä½ å­˜å‚¨æ± ä¸‹é¢æ‰€æœ‰datasetè¿›è¡Œå¿«ç…§ã€‚å¿«ç…§ä¿å­˜æ—¶é—´ï¼Œå¿«ç…§å¯é€‰æ¯å¤©æ¯å°æ—¶æ¯åˆ†é’Ÿè¿›è¡Œã€‚</p>
</li>
<li>
<p>TrueNAS çš„å¿«ç…§åŠŸèƒ½é›†æˆåˆ°äº† Windows VSS/å·å½±å¤åˆ¶æœåŠ¡åŠŸèƒ½ä¸Šï¼Œä½ çš„æ¯ä¸ªå¿«ç…§éƒ½å¯ä»¥åœ¨ Windows Explorer çš„<code>å³é”®-å±æ€§-ä»¥å‰çš„ç‰ˆæœ¬</code>ä¸­çœ‹åˆ°ï¼Œè€Œä¸”èƒ½å¤Ÿå³æ—¶çš„æµè§ˆæ–‡ä»¶å†å²ç‰ˆæœ¬ï¼Œæ²¡æœ‰æ¢å¤ç­‰å¾…æ—¶é—´ã€‚</p>
</li>
<li>
<p>Replication Tasksï¼Œdatasetæ•°æ®é›†å¯ä»¥å¤‡ä»½åˆ°å¦ä¸€ä¸ªå­˜å‚¨æ± æˆ–è€…å¦ä¸€å°TrueNAS Core/Scaleï¼Œå¤‡ä»½ä½¿ç”¨çš„æ˜¯å¿«ç…§å‘é€ï¼Œæ‰€ä»¥è¯·ä½¿ç”¨é«˜çº§æ¨¡å¼è¿›è¡Œé…ç½®ï¼Œä¸ç„¶ä¼šé‡å¤æ–°å»ºå¤‡ä»½å¿«ç…§ï¼ˆé‡å¤å¿«ç…§ä»»åŠ¡ä¸å½±å“æ–‡ä»¶å®‰å…¨ï¼Œä½†æ˜¯æˆ‘å°±æ˜¯çœ‹ç€ä¸èˆ’æœï¼‰</p>
</li>
<li>
<p>S.M.A.R.T. Testsï¼Œæ–°å»ºæ‰€æœ‰ç¡¬ç›˜ æ¯å¤© short æ¯å‘¨ long çš„SMARTæ£€æŸ¥ï¼Œé˜²æ‚£äºæœªç„¶ã€‚</p>
</li>
</ul>
</li>
<li>
<p>Apps</p>
<ul>
<li>
<p>é€‰æ‹©å­˜å‚¨ Docker æ–‡ä»¶çš„å­˜å‚¨æ± ï¼Œä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ª  ix-applications çš„ datasetã€‚å­˜å‚¨å¯ä»¥é€‰ä¸€ä¸ªå•ç›˜SSDï¼Œç„¶åæ¯åˆ†é’Ÿæˆ–æ¯å°æ—¶å¤‡ä»½åˆ°æœºæ¢°ç¡¬ç›˜RAIDé˜µåˆ—ä¸Šã€‚</p>
</li>
<li>
<p>Setting -&gt; Advanced Setting -&gt; å–æ¶ˆå‹¾é€‰ Enable Host Path Safety Checksï¼Œä¼ä¸šçº§éš”ç¦»åŠŸèƒ½ï¼Œæˆ‘ä»¬å…¨éƒ½æ˜¯ç‰‡å­ï¼Œä¸æ€•ä¸å®‰å…¨ã€‚</p>
</li>
<li>
<p>ä¸è¦ä½¿ç”¨ Truecharts è½¯ä»¶åº“ï¼Œæ‰‹åŠ¨ä½¿ç”¨ Launch Docker Image æ–°å¢ docker, è¿™æ ·èƒ½ä¿è¯å¯¹ä½ çš„æ•°æ®æœ€å¤§çš„æ§åˆ¶æƒã€‚ä½¿ç”¨è‡ªå¸¦ TrueNASè½¯ä»¶åº“ æˆ–è€… TrueChartè½¯ä»¶åº“ï¼Œè½»åˆ™æ›´æ–°ä¸åŠæ—¶ï¼Œé‡åˆ™å®Œå…¨ä¸å¯åŠ¨ã€‚TrueNAS K3S å¤æ‚ç¨‹åº¦è¶…å‡ºä½ çš„æƒ³è±¡ã€‚</p>
</li>
<li>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ Docker ç‰ˆ BT ä¸‹è½½å·¥å…·ç«¯å£æ˜ å°„é—®é¢˜ï¼ŒDocker BT è½¯ä»¶æ˜¯æ— æ³•å°†ç«¯å£æ˜ å°„åˆ°ä½ çš„è·¯ç”±å™¨ upnpä¸Šçš„ï¼Œæ¯”å¦‚ qBit å¼€æ”¾çš„ Peer TCP/UDP ç«¯å£æ˜¯ 6881ï¼ŒTrueNAS è½¯ä»¶åº“å°† Docker ç«¯å£6881 è½¬å‘åˆ°äº† TrueNAS ç«¯å£20988ï¼Œè¿™æ—¶å€™ä½ éœ€è¦æ‰‹åŠ¨å°†è·¯ç”±å™¨ WANå£ ç«¯å£6881 è½¬å‘åˆ° TrueNAS LAN ç«¯å£20988 ä¸Šã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯ qBit ç½‘é¡µè®¾ç½®çš„ç«¯å£å’Œä½ å®é™… WAN å£å¼€æ”¾çš„ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ä¼šå¯¼è‡´ BT ä¸‹è½½é€Ÿåº¦æ…¢ï¼Œä¹Ÿå°±æ˜¯ç«¯å£æ˜ å°„å¤±è´¥çš„æƒ…å†µã€‚æ‰€ä»¥æˆ‘çš„åšæ³•æ˜¯ï¼Œä¸ä½¿ç”¨å®˜æ–¹è½¯ä»¶åº“ï¼Œæ‰‹åŠ¨è®¾ç½® qBit ç«¯å£ä¸º 46881ï¼Œç«¯å£è½¬å‘å…¨éƒ¨å¡«46881ã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 id="nfsv4-acl">NFSv4 ACL</h2>
<ul>
<li>
<p>è·Ÿç€UIè‡ªå·±è®¾ç½®å§ï¼Œä¸€æ¡ä¸€æ¡åŠ ï¼Œçµæ´»æ€§é«˜ï¼Œå’Œ NTFS çš„é€»è¾‘ä¸€æ¨¡ä¸€æ ·ï¼Œä¸éœ€è¦ç†è§£UGO/0755è¿™ç§é€»è¾‘ã€‚</p>
</li>
<li>
<p>ä»€ä¹ˆä½ è¿˜æƒ³äº†è§£è¿™ä¸ª ACLï¼Ÿ æ”¾ä¸€ä¸ª<a href="https://www.bilibili.com/video/BV1tG4y1C78v/">Bç«™-è€æ¹¿åŸº-è§†é¢‘BV1tG4y1C78v</a>ï¼Œå’Œ<a href="https://www.truenas.com/docs/scale/scaleuireference/storage/datasets/editaclscreens/#permissions-settings---advanced">TruenNAS å®˜æ–¹æ‰‹å†Œ</a>è‡ªå·±å»çœ‹å§ã€‚</p>
</li>
</ul>
<h2 id="openzfs-å…¶ä»–ç›¸å…³èµ„æ–™">OpenZFS å…¶ä»–ç›¸å…³èµ„æ–™</h2>
<ul>
<li>
<p>ZFS æ¨èä½ ä½¿ç”¨ ECCï¼Œå¹¶ä¸æ˜¯ZFSæ²¡æœ‰ECCå°±ä¸èƒ½ç”¨äº†ï¼Œæˆ‘ç°åœ¨å¼ºçƒˆæ¨èä½ æŠŠä¸‹é¢èµ„æ–™å…¨éƒ¨çœ‹ä¸€éï¼Œä½ ä¼šå¬å—ï¼Ÿ</p>
</li>
<li>
<p>ZFS çš„ç‰¹è‰²æ˜¯é€Ÿåº¦æ…¢ï¼Œä¸æ˜¯é€Ÿåº¦å¿«ï¼Œä»–çš„ä¼˜ç‚¹æ˜¯ï¼šæä¾›äº†åæ‰§ç‹‚èˆ¬æ–‡ä»¶å®‰å…¨ï¼Œå¹²çš„æ´»å¤šï¼Œè‡ªç„¶é€Ÿåº¦æ…¢ã€‚</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆæ²¡äººç”¨ç¡¬ä»¶Raidäº†ï¼Œå› ä¸ºä¼ä¸šçº§æœºæ¢°ç¡¬ç›˜éƒ½æ²¡æœ‰ 520byte æ‰‡åŒºäº†ï¼Œå®¶ç”¨æ˜¯ 512byte æ‰‡åŒºï¼Œä¼ä¸šçº§å¤šäº† 8byte çš„æ ¡éªŒï¼ŒRaidå¡ä¼šä½¿ç”¨ 8Byte æ¥æ ¡éªŒæ–‡ä»¶æ­£ç¡®æ€§ã€‚æ‰€ä»¥è¯´ç›®å‰ä¸ç®¡æ˜¯è½¯ç¡¬RAIDï¼Œéƒ½æ²¡æœ‰ä»»ä½•åº”å¯¹ç¡¬ç›˜æ¯”ç‰¹ä½ç¿»è½¬çš„å¯¹ç­–ã€‚</p>
</li>
</ul>
<h3 id="æ²¡æœ‰eccå†…å­˜æ—¶æ¯”ç‰¹ä½ç¿»è½¬ä¼šå‘ç”Ÿä»€ä¹ˆ">æ²¡æœ‰ECCå†…å­˜æ—¶æ¯”ç‰¹ä½ç¿»è½¬ä¼šå‘ç”Ÿä»€ä¹ˆ</h3>
<ul>
<li>
<p>è¿™ç§æƒ…å†µä¸‹ä½ç¿»è½¬ä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚</p>
<ul>
<li>ä½ç¿»è½¬å‘ç”Ÿåœ¨æœªä½¿ç”¨çš„å†…å­˜ä¸­ã€‚</li>
</ul>
</li>
<li>
<p>ä½ç¿»è½¬å¯¼è‡´ runtime æ•…éšœã€‚</p>
<ul>
<li>
<p>å½“ä»ç£ç›˜è¯»å–çš„å†…å®¹æ—¶å‘ç”Ÿä½ç¿»è½¬ã€‚</p>
</li>
<li>
<p>å½“ç¨‹åºæ›´æ”¹ä»£ç æ—¶ï¼Œé€šå¸¸ä¼šè§‚å¯Ÿåˆ°æ•…éšœã€‚</p>
</li>
<li>
<p>å¦‚æœä½ç¿»è½¬å‘ç”Ÿåœ¨ç³»ç»Ÿå†…æ ¸æˆ– /sbin/init ä¸­çš„ä¾‹ç¨‹ä¸­ï¼Œç³»ç»Ÿå¯èƒ½ä¼šå´©æºƒã€‚é‡æ–°åŠ è½½å—å½±å“çš„æ•°æ®å¯ä»¥æ¸…é™¤æ•…éšœã€‚ä¹Ÿå¯ä»¥é€šè¿‡é‡æ–°å¯åŠ¨æ¥è§£å†³ã€‚</p>
</li>
</ul>
</li>
<li>
<p>ä½ç¿»è½¬å‘ç”Ÿåœ¨ä¸‹åˆ—æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æŸåã€‚</p>
<ul>
<li>
<p>å½“æ–‡ä»¶ä½¿ç”¨åˆ°çš„å†…å­˜æ¯”ç‰¹ä½æ­£å‡†å¤‡å†™å…¥åˆ°ç£ç›˜æ—¶å‘ç”Ÿä½ç¿»è½¬ã€‚</p>
</li>
<li>
<p>ä½ç¿»è½¬å‘ç”Ÿåœ¨ ZFS çš„æ ¡éªŒå’Œè®¡ç®—ä¹‹å‰ï¼ŒZFS å°†ä¸ä¼šæ„è¯†åˆ°æ•°æ®å·²æŸåã€‚</p>
</li>
<li>
<p>ä½ç¿»è½¬å‘ç”Ÿåœ¨ ZFS çš„æ ¡éªŒå’Œè®¡ç®—ä¹‹åï¼Œä½†åœ¨å†™å…¥ç£ç›˜ä¹‹å‰ï¼ŒZFS ä¼šæ£€æµ‹åˆ°å®ƒï¼Œä½†å®ƒå¯èƒ½æ— æ³•çº æ­£å®ƒã€‚</p>
</li>
</ul>
</li>
<li>
<p>ä½ç¿»è½¬å‘ç”Ÿåœ¨ä¸‹åˆ—æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´å…ƒæ•°æ®æŸåã€‚</p>
<ul>
<li>
<p>å½“å†™å…¥ç£ç›˜æ—¶ç›˜é¢ç»“æ„å‘ç”Ÿä½ç¿»è½¬ã€‚</p>
</li>
<li>
<p>ä½ç¿»è½¬å‘ç”Ÿåœ¨ ZFS çš„æ ¡éªŒå’Œè®¡ç®—ä¹‹å‰ï¼ŒZFS å°†ä¸ä¼šæ„è¯†åˆ°å…ƒæ•°æ®å·²æŸåã€‚</p>
</li>
<li>
<p>ä½ç¿»è½¬å‘ç”Ÿåœ¨ ZFS çš„æ ¡éªŒå’Œè®¡ç®—ä¹‹åï¼Œä½†åœ¨å†™å…¥ç£ç›˜ä¹‹å‰ï¼ŒZFS ä¼šæ£€æµ‹åˆ°å®ƒï¼Œä½†å®ƒå¯èƒ½æ— æ³•çº æ­£å®ƒã€‚</p>
</li>
<li>
<p>ä»¥ä¸Šæ­¤ç±»äº‹ä»¶ä¸­èƒ½å¦æ¢å¤å°†å–å†³äºæŸåçš„å†…å®¹ã€‚ åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå­˜å‚¨æ± å¯èƒ½å˜å¾—ä¸å¯å¯¼å…¥ã€‚æ­¤æ—¶æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿåœ¨ç»å¯¹æœ€åçš„æƒ…å†µä¸‹ï¼Œä½ç¿»è½¬æ•…éšœæƒ…å†µåçš„æ•°æ®å¯é æ€§ä¼šå¾ˆå·®ã€‚ä½†è¿™ç§æƒ…å†µåº”è¯¥è¢«è®¤ä¸ºæ˜¯éå¸¸ç½•è§çš„ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯è½¬-è€æ¹¿åŸº-</p>
<ul>
<li>
<p>ä¼ ç»Ÿçš„RAIDåœ¨æ¢å¤æ—¶ï¼Œå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚å‡å¦‚4ä¸ª10Tçš„ç›˜åšäº†RAID5ï¼Œå…¶ä¸­æŸä¸ªç›˜åäº†ï¼Œç³»ç»Ÿé‡å»ºRAIDæ—¶ä¼šé‡å»º10Tç©ºé—´ã€‚å“ªæ€•å®é™…ä»…ç”¨äº†2Tï¼Œç©ºé—²çš„8Tä¹Ÿä¼šè¢«å‚»ç“œå¼æ ¡éªŒä¸€éï¼Œå› ä¸ºè¿™æ˜¯ä¸ªå¾ˆä½çº§çš„è¿‡ç¨‹ã€‚åœ¨ZFSä¸Šï¼Œå› ä¸ºæ–‡ä»¶ç³»ç»ŸçŸ¥é“RAIDæ¨¡å¼ï¼Œæ‰€ä»¥å¯ä»¥æŒ‰éœ€é‡å»ºï¼Œåªéœ€è¦æ¢å¤2Tçš„æ•°æ®å³å¯ã€‚</p>
</li>
<li>
<p>ä½†éœ€è¦æ³¨æ„ï¼Œæ¢å¤é˜µåˆ—ä¾æ—§æ˜¯ä¸ªè„†å¼±çš„è¿‡ç¨‹ï¼ZFSä¹Ÿä¸ä¾‹å¤–ã€‚ZFSåªæ˜¯é™ä½äº†ä»»åŠ¡éš¾åº¦ï¼Œå®¢è§‚æ¥çœ‹ZFSçš„æ¢å¤ä¹ŸæŒºä¸¥å³»ã€‚</p>
</li>
<li>
<p>å¼ºçƒˆä¸å»ºè®®æŠŠé—®é¢˜ç¡¬ç›˜ç›´æ¥æ‹”ä¸‹æ¥å†æ’å…¥æ–°ç›˜ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹æ–°ç›˜çš„æ•°æ®å°±å¿…é¡»é€šè¿‡å…¨ç›˜è¯»å–å…¶ä»–å¥½ç›˜çš„æ–¹å¼è®¡ç®—å‡ºæ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„ä»£ä»·æ¯”è¾ƒé«˜ã€‚è€Œå¦‚æœå¸¦ç€æ•…éšœç¡¬ç›˜ä¸€èµ·æ¢å¤ï¼Œé‚£ä¹ˆæ•…éšœç¡¬ç›˜é‡Œçš„å¥½æ•°æ®å°±èƒ½ç›´æ¥å¯¼å…¥æ–°ç›˜ï¼Œè€Œæ— éœ€æ ¹æ®å…¶ä»–ç›˜çš„æ ¡éªŒå€¼è¿›è¡Œåå‘è®¡ç®—ï¼Œè¿™å¤§å¤§é™ä½äº†å…¶ä»–ç›˜åœ¨é«˜å¼ºåº¦è¯»æ•°æ®è¿‡ç¨‹ä¸­å‘ç”ŸæŸåçš„é£é™©ã€‚</p>
</li>
</ul>
<p>ZFS è§†é¢‘1 <a href="https://www.bilibili.com/video/BV18V4y1K7o2/">https://www.bilibili.com/video/BV18V4y1K7o2/</a></p>
<p>ZFS æ–‡å­—ç‰ˆ1 <a href="https://www.wolai.com/littlenewton/gJvungs54zWgZ3YfoXAvKW">https://www.wolai.com/littlenewton/gJvungs54zWgZ3YfoXAvKW</a></p>
<p>ZFS è§†é¢‘2 <a href="https://www.bilibili.com/video/BV1Ad4y1Y7b5/">https://www.bilibili.com/video/BV1Ad4y1Y7b5/</a></p>
<p>ZFS æ–‡å­—ç‰ˆ2 <a href="https://www.wolai.com/littlenewton/dT2737LXf412LKKZ973DsD">https://www.wolai.com/littlenewton/dT2737LXf412LKKZ973DsD</a></p>
<p>OpenZFS åŸºç¡€ <a href="https://www.youtube.com/watch?v=MsY-BafQgj4">https://www.youtube.com/watch?v=MsY-BafQgj4</a></p>
<p>å¦‚ä½•æ‰©å±•ZFS <a href="https://www.youtube.com/watch?v=11bWnvCwTOU">https://www.youtube.com/watch?v=11bWnvCwTOU</a></p>
<p>ç¡¬ä»¶Raidå·²æ­» <a href="https://www.youtube.com/watch?v=11bWnvCwTOU">https://www.youtube.com/watch?v=11bWnvCwTOU</a></p>
<p>OpenZFS ç¡¬ä»¶æ¨è <a href="https://openzfs.github.io/openzfs-docs/erformance%20and%20Tuning/Hardware.html">https://openzfs.github.io/openzfs-docs/erformance%20and%20Tuning/Hardware.html</a></p>
<p>Debian ZFS å‘½ä»¤è¡Œä½¿ç”¨æ•™ç¨‹ <a href="https://pthree.org/2012/04/17/install-zfs-on-debian-gnulinux/">https://pthree.org/2012/04/17/install-zfs-on-debian-gnulinux/</a></p>
]]></content></item><item><title>å¦‚ä½•æ­£ç¡®é…ç½® OpenWrt WPA3 + 802.11kvr</title><link>https://vicfree.com/2022/11/openwrt-wpa3-802.11kvr-ap-setup/</link><pubDate>Thu, 24 Nov 2022 11:50:38 +0800</pubDate><guid>https://vicfree.com/2022/11/openwrt-wpa3-802.11kvr-ap-setup/</guid><description>åœ¨ä¼˜åŒ–å®¶é‡ŒWi-Fiè¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸ç®¡æ˜¯ä¸­æ–‡è‹±æ–‡ï¼Œæ— çº¿æ¼«æ¸¸ã€802.11kvrç›¸å…³çš„è§†é¢‘å¸–å­è¦ä¹ˆæ˜¯ç®€å•çš„å¤åˆ¶ç²˜è´´ï¼Œè¦ä¹ˆå¤¹æ‚åœ¨å¤§é‡æ— æ•ˆä¿¡æ¯å†…ï¼Œæ‰€</description><content type="html"><![CDATA[<p>åœ¨ä¼˜åŒ–å®¶é‡ŒWi-Fiè¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸ç®¡æ˜¯ä¸­æ–‡è‹±æ–‡ï¼Œæ— çº¿æ¼«æ¸¸ã€802.11kvrç›¸å…³çš„è§†é¢‘å¸–å­è¦ä¹ˆæ˜¯ç®€å•çš„å¤åˆ¶ç²˜è´´ï¼Œè¦ä¹ˆå¤¹æ‚åœ¨å¤§é‡æ— æ•ˆä¿¡æ¯å†…ï¼Œæ‰€ä»¥ä»Šå¤©ç»™å¤§å®¶æ€»ç»“ä¸€ä¸‹æˆ‘å­¦åˆ°çš„ä¸œè¥¿ã€‚</p>
<p>å¾ˆå¤šAndroidæ‰‹æœºä¸æ”¯æŒæ¼«æ¸¸ï¼Œæƒ³é€€å‡ºï¼Œè¿˜æ¥å¾—åŠã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>
<ol>
<li>
<p>å®‰è£…æ”¯æŒ wps3 802.11kvr mesh çš„ package<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<blockquote>
<p>å®˜æ–¹<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>åªè¯´äº†è¯·å®‰è£…å®Œæ•´ç‰ˆæœ¬ hostapd or wpadï¼Œä½ æ˜¯è£… hostapd å®Œæ•´ç‰ˆè¿˜æ˜¯ wpad å®Œæ•´ç‰ˆã€‚å¹¶ä¸”ä½ çŒœå“ªä¸ªç‰ˆæœ¬æ˜¯å®Œæ•´ç‰ˆï¼Ÿ wpad? wpad-wolfssl? wpad-openssl? wpad-mesh-wolfssl?</p>
</blockquote>
<blockquote>
<p>è§£é‡Šï¼šè¿™äº›åŒ…çš„<a href="https://github.com/openwrt/openwrt/blob/master/package/network/services/hostapd/Makefile">æºç </a>éƒ½æ˜¯ä¸€æ ·çš„åªæ˜¯åŒ…å«çš„ç»„ä»¶ä¸ä¸€æ ·ï¼Œæ¨èä¸è¦åŠ¨ hostapdï¼Œåªå‡çº§ wpadã€‚æ¨èä½¿ç”¨ wpad-wolfssl <a href="https://github.com/openwrt/openwrt/commit/49cc712b44c76e99bfb716c06700817692975e05">å› ä¸ºå®ƒåŒ…å« wpa3+mesh+802.11r æœ€å®Œæ•´ä¹Ÿæœ€å°ä½“ç§¯</a>ã€‚</p>
</blockquote>
</li>
<li>
<p>å›æƒ³ä¸€ä¸‹ä½ ç›®å‰ç½‘ç»œæ¶æ„ï¼Œä½ éƒ½å‡†å¤‡ç”¨æ— çº¿ 802.11kvr æ¼«æ¸¸äº†ï¼Œè¯´æ˜ä½ æœ‰å¤šä¸ªAPï¼Œé‚£ä½ çš„ AP å¼€å¯ AP æ¨¡å¼äº†å—ï¼Ÿ</p>
<blockquote>
<p><a href="https://openwrt.org/zh/docs/guide-user/network/wifi/dumbap#%E4%BD%BF%E7%94%A8openwrt%E7%9A%84web%E7%95%8C%E9%9D%A2luci%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE">ä½ å…ˆçœ‹è¿™ä¸ªä¸­æ–‡æ•™ç¨‹å¼€å¯APæ¨¡å¼å†è¯´å§</a>ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼šæ”¹LAN IP -&gt; å…³ LAN DHCP -&gt; ç¦ç”¨ firewall, dnsmasq and odhcpd æœåŠ¡.</p>
</blockquote>
<blockquote>
<p>å› ä¸º AP ä¸å‚åŠ  DHCPï¼Œå·²è¿æ¥è®¾å¤‡åˆ—è¡¨åªèƒ½çœ‹åˆ°mac+ipï¼Œ å®˜æ–¹ç»™äº†æ–¹æ³•ï¼šæ‰‹åŠ¨æŠŠä¸»è·¯ç”± DHCP è®°å½•å¯¼å‡ºåˆ° AP çš„ /etc/ethers æ–‡ä»¶ä¸­ã€‚DHCPè®¾å¤‡æ¸…å•å¯¼å‡ºå‘½ä»¤æ˜¯ï¼š<code>cat /tmp/dhcp.leases | awk '{print $2&quot; &quot;$4}'</code></p>
</blockquote>
<blockquote>
<p>å·²ç¦ç”¨çš„ firewall, dnsmasq, odhcpd æœåŠ¡ä¼šåœ¨å‡çº§å›ºä»¶åé‡æ–°å¯ç”¨ï¼Œå¯ä»¥æŠŠè¿™ä¸ªè„šæ­¥æ·»åŠ åˆ° ç³»ç»Ÿ-&gt;å¯åŠ¨-&gt;æœ¬åœ°å¯åŠ¨è„šæœ¬ï¼ˆçœ‹æç¤ºï¼Œä¸è¦ç²˜è´´åˆ°æœ€åä¸€è¡Œï¼‰ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"># these services do not run on dumb APs
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in firewall dnsmasq odhcpd; do
</span></span><span class="line"><span class="cl">  if /etc/init.d/<span class="s2">&#34;$i&#34;</span> enabled; then
</span></span><span class="line"><span class="cl">    /etc/init.d/<span class="s2">&#34;$i&#34;</span> disable
</span></span><span class="line"><span class="cl">    /etc/init.d/<span class="s2">&#34;$i&#34;</span> stop
</span></span><span class="line"><span class="cl">  fi
</span></span><span class="line"><span class="cl">done
</span></span></code></pre></div></li>
<li>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹è¿™ä¸ª Dumb AP é¡µé¢<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>ï¼Œç½‘é¡µæœ€åº•ä¸‹æœ‰ä¸ª<code>option igmp_snooping '1'</code> è¿™ä¸ªigmpæŒ‡çš„æ˜¯IPTVï¼ŒDLNA ç»„æ’­æµï¼Œå¦‚æœä½ çš„äº¤æ¢æœºä¸æ”¯æŒè¿™ä¸ª snoopingï¼Œç»„æ’­æµä¼šæ·¹æ²¡ä½ çš„Wi-Fiï¼Œæ¯æ—¶æ¯åˆ»éƒ½åœ¨ç»™ä½ çš„ Wi-Fi æ¨ç»„æ’­æµï¼Œé™ä½ä½ çš„æ— çº¿æ€§èƒ½ã€‚snooping å¼€å¯åï¼Œåªæœ‰åœ¨æœ‰äººç”¨åˆ°ç»„æ’­æµçš„æ—¶å€™ï¼Œæ‰ä¼šæ¨ç»„æ’­æµï¼Œå…¶å®ƒæ—¶å€™ä¼šè¢«OpenWrtäº¤æ¢æœºæˆ–ç‹¬ç«‹äº¤æ¢æœºææ‰ç»„æ’­æµã€‚</p>
</li>
</ol>
<h2 id="å¼€å§‹é…ç½®">å¼€å§‹é…ç½®</h2>
<p>å†™çš„è¶Šæ¥è¶Šå¤šäº†ï¼Œç›´æ¥å¼€å¯å§ï½</p>
<h3 id="tldrsshè¿›è·¯ç”±è¿è¡Œä¸‹é¢è„šæœ¬">TLDRï¼šSSHè¿›è·¯ç”±è¿è¡Œä¸‹é¢è„šæœ¬</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">uci set wireless.default_radio0.ieee80211k=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.wnm_sleep_mode=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.bss_transition=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ieee80211r=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.mobility_domain=8888
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ft_over_ds=0
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ft_psk_generate_local=0
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ieee80211k=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.wnm_sleep_mode=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.bss_transition=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ieee80211r=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.mobility_domain=8888
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ft_over_ds=0
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ft_psk_generate_local=0
</span></span><span class="line"><span class="cl">uci commit wireless
</span></span><span class="line"><span class="cl">wifi reload
</span></span></code></pre></div><p>ä¸Šé¢çš„å‘½ä»¤ä¼šå°†ä¸‹é¢çš„å‚æ•°ä¼šå†™åˆ° <code>/etc/config/wireless</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">option ieee80211k &#39;1&#39;
</span></span><span class="line"><span class="cl">option wnm_sleep_mode &#39;1&#39;
</span></span><span class="line"><span class="cl">option bss_transition &#39;1&#39;
</span></span><span class="line"><span class="cl">option ieee80211r &#39;1&#39;
</span></span><span class="line"><span class="cl">option mobility_domain &#39;8888&#39;
</span></span><span class="line"><span class="cl">option ft_over_ds &#39;0&#39;
</span></span><span class="line"><span class="cl">option ft_psk_generate_local &#39;0&#39;
</span></span></code></pre></div><p>å¦‚æœä¸Šé¢å‚æ•°å·²ç»è¢«ä½ æ”¹åæ‰äº†ï¼Œå¯ä»¥åˆ é™¤ <code>/etc/config/wireless</code>ï¼Œä½¿ç”¨ <code>wifi config</code> é‡æ–°ç”Ÿæˆé…ç½®ã€‚</p>
<ol>
<li>
<p><a href="https://openwrt.org/docs/guide-user/network/wifi/basic#neighbor_reports_options_80211k">802.11k</a>, å®˜æ–¹ OpenWrt Luciæ²¡æœ‰æ­¤é¡¹è®¾ç½®ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ <code>option ieee80211k '1'</code>æ¥å¼€å¯ã€‚å›½å†…å¾ˆå¤š OpenWrt æ˜¯æœ‰lucié…ç½®é€‰é¡¹çš„ã€‚</p>
</li>
<li>
<p><a href="https://openwrt.org/docs/guide-user/network/wifi/basic#bss_transition_management_frames_options_80211v">802.11v</a>, åŒä¸Šã€‚</p>
<blockquote>
<p><code>option ieee80211v '1'</code> æ˜¯å¤šä½™çš„è®¾ç½®å·²è¢«<a href="https://github.com/openwrt/openwrt/commit/b518f07d4b8ae144453c606c9ec4ecef7d39f968">å¼ƒç”¨</a></p>
</blockquote>
<blockquote>
<p><code>wnm_sleep_mode</code> WiFi å®¢æˆ·ç«¯å¾…æœºç¡çœ æ¨¡å¼</p>
</blockquote>
<blockquote>
<p><code>bss_transition</code> AP ä¼šå‘ç”ŸæŒ‡ä»¤ç»™ WiFi å®¢æˆ·ç«¯ï¼Œæ¨èæœ€ä½³ä¿¡å·çš„ AP ä¾›é“¾æ¥ï¼Œä½†æ˜¯å®¢æˆ·ç«¯è¿ä¸è¿ï¼ŒAP å°±ç®¡ä¸åˆ°äº†ã€‚</p>
</blockquote>
<blockquote>
<p><code>time_advertisement</code> å¹¿æ’­åŒæ­¥æ—¶é—´ï¼Œå¥½åƒå°±æ˜¯å­—é¢æ„æ€ï¼Œæ— çº¿æ•°æ®åŒ…ä¸­åŒ…å«æ—¶åŒºä¿¡æ¯ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œ<a href="https://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg60773.html">OpenWrté‚®ä»¶</a>æ˜¯è¿™ä¹ˆè¯´çš„ï¼Œæˆ‘è§‰å¾—æ²¡å•¥ç”¨ï¼Œä¸å¯ç”¨äº†ã€‚</p>
</blockquote>
</li>
<li>
<p><a href="https://openwrt.org/docs/guide-user/network/wifi/basic#fast_bss_transition_options_80211r">802.11r</a>, è¿™ä¸ªè®¾ç½®å®˜æ–¹OpenWrt å·²ç»é›†æˆåˆ°Luciç½‘é¡µé‡Œäº†ã€‚</p>
</li>
</ol>
<blockquote>
<p>é‡è¦ï¼šå¼€äº†802.11rï¼Œéƒ¨åˆ†è®¾å¤‡ä¼šä¸å…¼å®¹ WPA3 æˆ–è€… WPA3-mixedï¼Œå¯èƒ½å’Œç³»ç»Ÿç‰ˆæœ¬æ— å…³ï¼Œä¹Ÿå¯èƒ½æ— å…³ï¼Œæ²¡æœ‰å¤ªå¤šçš„æ•°æ®ï¼Œæ²¡åŠæ³•æ‰¾å‡ºè§„å¾‹ï¼Œå¯ä»¥å‚è€ƒ<a href="https://github.com/openwrt/openwrt/issues/7858">å®˜æ–¹OpenWrt issue</a>ã€‚</p>
</blockquote>
<ul>
<li>
<p>è¿›å…¥WEBUIï¼ŒæŒ‰ç…§ä¸‹é¢è¿›è¡Œä¿®æ”¹</p>
<ul>
<li>802.11r <code>æ‰“å‹¾</code></li>
<li>NAS ID <code>ä¸å¡«</code></li>
<li>ç§»åŠ¨åŸŸ/Mobility Domain <code>å¯ä»¥ä¸å¡«</code></li>
<li>é‡å…³è”æˆªæ­¢æ—¶é—´/Reassociation Deadline å¡«<code>20000</code></li>
<li>FT protocol/FT åè®® é€‰<code>FT over the Air</code></li>
<li>æœ¬åœ°ç”Ÿæˆ PMK/Generate PMK locally <code>å–æ¶ˆå‹¾</code></li>
<li>å‰©ä¸‹æ‰€æœ‰å‚æ•°å…¨éƒ¨é»˜è®¤ä¸ä¿®æ”¹ã€‚</li>
</ul>
<blockquote>
<p>WPA3 å¿…é¡»<code>å–æ¶ˆå‹¾</code> æœ¬åœ°ç”Ÿæˆ PMK/Generate PMK locallyï¼Œ<a href="https://forum.openwrt.org/t/wpa3-with-802-11r-ft-sae-not-working/103583/6">ç”¨æˆ·é—®äº†hostapdçš„äºº</a>ï¼Œå¿…é¡» <code>option ft_psk_generate_local '0'</code></p>
</blockquote>
<blockquote>
<p>iOS ç”¨æˆ·å¿…é¡»å°† FT æ”¹ä¸º <a href="https://github.com/openwrt/openwrt/issues/7907">FT over the Air</a>ï¼Œ<code>option ft_over_ds '0'</code>, è¿™ä¸ªå‚æ•°æ˜¯ä»Ciscoé‚£è¾¹æŠ„è¿‡æ¥çš„ï¼Œé“¾æ¥é‡Œè¿˜æåˆ°äº†<code>option reassociation_deadline '20000'</code> <code>option max_inactivity '60'</code> å¯ä»¥è¯•è¯•åŠ äº†æœ‰æ²¡æœ‰(å‰¯)æ•ˆæœã€‚</p>
</blockquote>
<blockquote>
<p>iOS æç¤º <code>hostapd: nl80211: kernel reports: key addition failed</code> è¿™ä¸ªé”™è¯¯ï¼Œ<a href="https://forum.openwrt.org/t/802-11r-fast-transition-how-to-understand-that-ft-works/110920/61">OpenWrtå¼€å‘è€…æåˆ°ç›®å‰åœ¨TODOæµç¨‹ä¸­</a></p>
</blockquote>
<blockquote>
<p>NAS ID ä¸ºå•¥ä¸å¡«ï¼Œ<a href="https://openwrt.org/docs/guide-user/network/wifi/basic#fast_bss_transition_options_80211r">OpenWrt Guideè¦æ±‚å¡«</a>ï¼Œ<a href="https://forum.openwrt.org/t/802-11r-fast-transition-how-to-understand-that-ft-works/110920/77">å¼€å‘è€…è¯´ä¸å¡«ï¼ŒOpenWrtä¼šç”¨macä»£æ›¿</a>ï¼Œå› ä¸ºå¼€å‘è€…æ”¹ä»£ç é€Ÿåº¦æ¯”å®˜æ–¹Guideå¿«è€Œå·²ï¼Œå¼€å‘è€…åœ¨è®ºå›å›å¸–å­ï¼Œå›å¤æ—¶æƒ³èµ·æ¥æœ‰ä¸ªbugï¼Œ<a href="https://github.com/openwrt/openwrt/commit/e6df13d0e16dd394ca26a80feeb013234948e875">ç«‹é©¬æpatch</a>ã€‚</p>
</blockquote>
<blockquote>
<p>OpenWrt å¼€å‘è€…ç»™å‡ºäº†<a href="https://forum.openwrt.org/t/802-11r-fast-transition-how-to-understand-that-ft-works/110920/83">ä»–çš„å‚æ•°</a>ï¼Œä¾›å‚è€ƒã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">config wifi-iface &#39;Xxx_radio1&#39;
</span></span><span class="line"><span class="cl">        option device &#39;radio1&#39;
</span></span><span class="line"><span class="cl">        option network &#39;lan&#39;
</span></span><span class="line"><span class="cl">        option mode &#39;ap&#39;
</span></span><span class="line"><span class="cl">        option ssid &#39;Xxx&#39;
</span></span><span class="line"><span class="cl">        option encryption &#39;sae&#39;
</span></span><span class="line"><span class="cl">        option key &#39;***&#39;
</span></span><span class="line"><span class="cl">        option ieee80211w &#39;2&#39;
</span></span><span class="line"><span class="cl">        option ieee80211r &#39;1&#39;
</span></span><span class="line"><span class="cl">        option ft_psk_generate_local &#39;0&#39;
</span></span><span class="line"><span class="cl">        option ft_over_ds &#39;0&#39;
</span></span><span class="line"><span class="cl">        option ieee80211k &#39;1&#39;
</span></span><span class="line"><span class="cl">        option bss_transition &#39;1&#39;
</span></span><span class="line"><span class="cl">        option ieee80211v &#39;1&#39;
</span></span><span class="line"><span class="cl">        option disassoc_low_ack &#39;0&#39;
</span></span></code></pre></div></li>
</ul>
<h2 id="æµ‹è¯•èƒ½å¦æˆåŠŸæ¼«æ¸¸">æµ‹è¯•èƒ½å¦æˆåŠŸæ¼«æ¸¸</h2>
<p>ä¸€èˆ¬æ¥è¯´æ‹¿ä¸ªiPhoneï¼Œåœ¨ä¸¤ä¸ªAPç›´æ¥æ¥å›æ™ƒæ‚ å°±è¡Œäº†ã€‚
æ™ƒæ‚ å®Œäº†ï¼Œæ¥åˆ° AP çœ‹æ—¥å¿—ã€‚</p>
<ol>
<li>
<p>ç¬¬ä¸€æ¬¡è¿æ¥APï¼Œä¼šå‡ºç° <code>EAPOL-4WAY-HS-COMPLETED</code></p>
</li>
<li>
<p>æ¼«æ¸¸æˆåŠŸä¼šå‡ºç° <code>AP-STA-CONNECTED</code></p>
<blockquote>
<p>è€ç‰ˆæœ¬ OpenWrt å¯èƒ½æ²¡æœ‰è¿™ä¸ªæç¤ºï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ <code>option log_level '1'</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">uci set wireless.radio0.log_level=1
</span></span><span class="line"><span class="cl">uci set wireless.radio1.log_level=1
</span></span><span class="line"><span class="cl">uci commit wireless
</span></span><span class="line"><span class="cl">wifi reload
</span></span></code></pre></div><blockquote>
<p>è¿™ä¸ªæç¤ºè¯´æ˜æ¼«æ¸¸æˆåŠŸ <code>WPA: FT authentication already completed - do not start 4-way handshake</code></p>
</blockquote>
</li>
</ol>
<h2 id="ç»éªŒ">ç»éªŒ</h2>
<blockquote>
<p>Wi-Fi é…ç½®æ–‡ä»¶åœ¨ <code>/etc/config/wireless</code></p>
</blockquote>
<blockquote>
<p>Wi-Fi è¿è¡Œé…ç½®åœ¨ <code>/var/run/hostapd-phy0.conf</code> <code>/var/run/hostapd-phy1.conf</code></p>
</blockquote>
<p>æ‰€æœ‰æœ‰å…³Wi-Fiçš„é…ç½®åŸºæœ¬éƒ½åœ¨è¿™é‡Œï¼Œå¾ˆå¤šè‡ªåŠ¨ç”Ÿæˆçš„é…ç½®ä¸ä¿å­˜åœ¨wirelessé‡Œï¼Œåªå­˜åœ¨hosapd confé‡Œã€‚</p>
<p>å¾ˆå¤š OpenWrt å‚æ•°å¯èƒ½ä¼šæ”¹å˜ï¼Œä¿®æ”¹å‰è®°å¾—æŸ¥æºç <sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup>ï¼ŒæŸ¥æ‰‹å†Œ<sup id="fnref1:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>ï¼ŒæŸ¥å®˜æ–¹è®ºå›<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></p>
<h2 id="æ‰‹æœº-wi-fi-ç½‘ç»œå·¥å…·app">æ‰‹æœº Wi-Fi ç½‘ç»œå·¥å…·APP</h2>
<p>å› ä¸ºAPPé‡åæ¯”è¾ƒå¤šï¼Œç›´æ¥å†™åŒ…å+æ˜¾ç¤ºå
Android:</p>
<p><code>com.ubnt.usurvey</code> WiFiman, æœ€å¥½çœ‹ï¼Œå¥½ç”¨ã€‚</p>
<p><code>net.techet.netanalyzerlite.an</code> Network Analyzer, ä¸€èˆ¬å¥½ç”¨ï¼ŒåŠŸèƒ½å¤šä¸€ç‚¹ã€‚</p>
<p><code>com.vrem.wifianalyzer</code> WiFi Analyzer (open-source), æ‰«æWi-Fiçš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹æœ‰æ²¡æœ‰å¼€FT(æ¼«æ¸¸)ã€‚</p>
<p>iPhone:</p>
<p><code>com.dayananetworks.networkutilities </code>Network Utilities &amp; Analyzer åŠŸèƒ½è¶³å¤Ÿå¤šï¼Œä½†æ˜¯å› ä¸º iPhone ä¸æ˜¾ç¤ºæœ¬åœ°è®¾å¤‡macï¼ŒèŠèƒœäºæ— ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªå·¥å…·ï¼Œä¸å¥½çœ‹ï¼Œä½†åŠŸèƒ½æœ€å¤šã€‚</p>
<p><code>net.he.NetworkUtility</code> or <code>net.he.networktools</code> HE.NET Network Tools</p>
<h2 id="bonus-openwrtä¸€é”®apå‘½ä»¤">BONUS: OpenWrtä¸€é”®APå‘½ä»¤</h2>
<blockquote>
<p>æ‡‚è‡ªå·±åœ¨åšä»€ä¹ˆçš„ï¼Œå¯ä»¥ä¸€é”®å¤åˆ¶ç²˜è´´ï¼Œä¸æ‡‚çš„ï¼Œè¯·ä¸€è¡Œä¸€è¡Œå¤åˆ¶ç²˜è´´ã€‚</p>
</blockquote>
<p>æ‰“å¼€SSHï¼Œè·¯ç”±å…ˆè”ç½‘ï¼Œè®¾ç½®è·¯ç”±æ—¶é—´ã€‚
å®‰è£…wpad-wolfsslè½¯ä»¶åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">opkg update
</span></span><span class="line"><span class="cl">opkg remove wpad-mini
</span></span><span class="line"><span class="cl">opkg remove wpad-basic
</span></span><span class="line"><span class="cl">opkg remove wpad-basic-wolfssl
</span></span><span class="line"><span class="cl">opkg install wpad-wolfssl
</span></span></code></pre></div><p>è‡ªå®šä¹‰ä¸‹é¢è„šæœ¬ï¼ŒIPåœ°å€ã€Wi-Fiå¯†ç ç­‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">uci set dhcp.lan.ignore=1
</span></span><span class="line"><span class="cl">uci set dhcp.lan.dhcpv6=disabled
</span></span><span class="line"><span class="cl">uci set dhcp.lan.ra=disabled
</span></span><span class="line"><span class="cl">uci set network.lan.ipaddr=&#39;192.168.44.44&#39;
</span></span><span class="line"><span class="cl">uci set network.lan.gateway=&#39;192.168.44.1&#39;
</span></span><span class="line"><span class="cl">uci set network.lan.dns=&#39;192.168.44.1&#39;
</span></span><span class="line"><span class="cl">uci set network.globals.ula_prefix=&#39;&#39;
</span></span><span class="line"><span class="cl">uci set wireless.radio0.channel=auto
</span></span><span class="line"><span class="cl">uci set wireless.radio0.disabled=0
</span></span><span class="line"><span class="cl">uci set wireless.radio0.country=CN
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ssid=Gargoyle
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.encryption=sae-mixed
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.key=password
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ieee80211k=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.wnm_sleep_mode=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.bss_transition=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ieee80211r=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.mobility_domain=8888
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ft_over_ds=0
</span></span><span class="line"><span class="cl">uci set wireless.default_radio0.ft_psk_generate_local=0
</span></span><span class="line"><span class="cl">uci set wireless.radio1.channel=auto
</span></span><span class="line"><span class="cl">uci set wireless.radio1.disabled=0
</span></span><span class="line"><span class="cl">uci set wireless.radio1.country=CN
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ssid=Gargoyle
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.encryption=sae-mixed
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.key=password
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ieee80211k=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.wnm_sleep_mode=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.bss_transition=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ieee80211r=1
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.mobility_domain=8888
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ft_over_ds=0
</span></span><span class="line"><span class="cl">uci set wireless.default_radio1.ft_psk_generate_local=0
</span></span><span class="line"><span class="cl">uci set system.@system[0].hostname=Router
</span></span><span class="line"><span class="cl">uci set system.@system[0].zonename=Asia/Shanghai
</span></span><span class="line"><span class="cl">uci set system.@system[0].timezone=CST-8
</span></span><span class="line"><span class="cl">uci commit
</span></span><span class="line"><span class="cl">/etc/init.d/dnsmasq disable
</span></span><span class="line"><span class="cl">/etc/init.d/odhcpd disable
</span></span><span class="line"><span class="cl">/etc/init.d/firewall disable
</span></span><span class="line"><span class="cl">reboot
</span></span></code></pre></div><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://openwrt.org/packages/index/network---wirelessapd">https://openwrt.org/packages/index/network---wirelessapd</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a href="https://openwrt.org/docs/guide-user/network/wifi/basic">https://openwrt.org/docs/guide-user/network/wifi/basic</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a>&#160;<a href="#fnref1:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a href="https://openwrt.org/docs/guide-user/network/wifi/dumbap">https://openwrt.org/docs/guide-user/network/wifi/dumbap</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p><a href="https://github.com/openwrt/openwrt/issues/">https://github.com/openwrt/openwrt/issues/</a>&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5">
<p><a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>&#160;<a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content></item><item><title>traefik acme è¯ä¹¦å¯¼å‡º</title><link>https://vicfree.com/2022/07/traefik-cert-export/</link><pubDate>Tue, 19 Jul 2022 17:03:20 +0800</pubDate><guid>https://vicfree.com/2022/07/traefik-cert-export/</guid><description>æ¥è‡ª https://blog.cubieserver.de/2021/minimal-traefik-v2-certificate-export/ ç›®å‰æœ‰å¾ˆå¤šæ–¹å¼å¯¼å‡ºè¯ä¹¦ï¼Œdockerå¯ä»¥è‡ªåŠ¨åŒ–ï¼Œè‡ªå·±é€‰æ‹©å§ã€‚ https://github.com/ldez/traefik-certs-dumper (Go) https://github.com/koshatul/traefik-acme (Go) https://gist.github.com/dmnt3d/a9696d1590df0a1410be8954df15f59c (Python) https://r4uch.com/export-traefik-certificates/ (Bash) å¦‚ä½•ä½¿ç”¨bashè„šæœ¬æ‰‹åŠ¨å¯¼å‡ºè¯ä¹¦ï¼Ÿ è¦æ±‚ Linux ç³»ç»Ÿçš„è™šæ‹Ÿæœº traefik ç”Ÿæˆ</description><content type="html"><![CDATA[<p>æ¥è‡ª <a href="https://blog.cubieserver.de/2021/minimal-traefik-v2-certificate-export/">https://blog.cubieserver.de/2021/minimal-traefik-v2-certificate-export/</a></p>
<p>ç›®å‰æœ‰å¾ˆå¤šæ–¹å¼å¯¼å‡ºè¯ä¹¦ï¼Œdockerå¯ä»¥è‡ªåŠ¨åŒ–ï¼Œè‡ªå·±é€‰æ‹©å§ã€‚</p>
<ul>
<li><a href="https://github.com/ldez/traefik-certs-dumper">https://github.com/ldez/traefik-certs-dumper</a> (Go)</li>
<li><a href="https://github.com/koshatul/traefik-acme">https://github.com/koshatul/traefik-acme</a> (Go)</li>
<li><a href="https://gist.github.com/dmnt3d/a9696d1590df0a1410be8954df15f59c">https://gist.github.com/dmnt3d/a9696d1590df0a1410be8954df15f59c</a> (Python)</li>
<li><a href="https://r4uch.com/export-traefik-certificates/">https://r4uch.com/export-traefik-certificates/</a> (Bash)</li>
</ul>
<p>å¦‚ä½•ä½¿ç”¨bashè„šæœ¬æ‰‹åŠ¨å¯¼å‡ºè¯ä¹¦ï¼Ÿ</p>
<h2 id="è¦æ±‚">è¦æ±‚</h2>
<ol>
<li>Linux ç³»ç»Ÿçš„è™šæ‹Ÿæœº</li>
<li>traefik ç”Ÿæˆçš„acme.json</li>
<li>Linux å®‰è£…äº† jq + openssl</li>
</ol>
<h2 id="å¼€å§‹æ“ä½œ">å¼€å§‹æ“ä½œ</h2>
<ol>
<li>åœ¨acme.jsonç›®å½•å¤åˆ¶ç²˜è´´æ–°å»ºä»¥ä¸‹è„šæœ¬ï¼Œå‘½åéšæ„ï¼Œå¦‚tc.sh</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># Requirements: you will need to install jq and maybe openssl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># creates a directory for all of your certificates</span>
</span></span><span class="line"><span class="cl">mkdir -p certificates/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># reads the acme.json file, please put this file in the same directory as your script</span>
</span></span><span class="line"><span class="cl"><span class="nv">json</span><span class="o">=</span><span class="k">$(</span>cat acme.json<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">export_cer_key <span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$json</span> <span class="p">|</span> jq -r <span class="s1">&#39;.[].Certificates[] | select(.domain.main == &#34;&#39;</span><span class="nv">$1</span><span class="s1">&#39;&#34;) | .certificate&#39;</span> <span class="p">|</span> base64 -d &gt; certificates/<span class="nv">$1</span>.cer
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$json</span> <span class="p">|</span> jq -r <span class="s1">&#39;.[].Certificates[] | select(.domain.main == &#34;&#39;</span><span class="nv">$1</span><span class="s1">&#39;&#34;) | .key&#39;</span> <span class="p">|</span> base64 -d &gt; certificates/<span class="nv">$1</span>.key
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">export_pfx <span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        openssl pkcs12 -export -out certificates/<span class="nv">$domain</span>.pfx -inkey certificates/<span class="nv">$domain</span>.key -in certificates/<span class="nv">$domain</span>.cer -passout pass: 
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">read</span> -p <span class="s2">&#34;Do you want to export as .pfx file as well [y]?&#34;</span> REPLY
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># iterates through all of your domains</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> domain in <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$json</span> <span class="p">|</span> jq -r <span class="s1">&#39;.[].Certificates[].domain.main&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$REPLY</span> <span class="o">=</span>~ ^<span class="o">[</span>Yy<span class="o">]</span>$ <span class="o">]]</span>
</span></span><span class="line"><span class="cl">    <span class="k">then</span>
</span></span><span class="line"><span class="cl">        export_cer_key <span class="s2">&#34;</span><span class="nv">$domain</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        export_pfx <span class="s2">&#34;</span><span class="nv">$domain</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        export_cer_key <span class="s2">&#34;</span><span class="nv">$domain</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><ol start="2">
<li>å¯¹åˆšæ–°å»ºçš„è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x tc.sh
</span></span></code></pre></div><ol start="3">
<li>ç¡®è®¤åŒç›®å½•ä¸‹åŒæ—¶å­˜åœ¨tc.sh å’Œ acme.json</li>
</ol>
<pre tabindex="0"><code>traefik
â”œâ”€â”€ tc.sh
â””â”€â”€ acme.json
</code></pre><ol start="4">
<li>æ‰§è¡Œè„šæœ¬</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./tc.sh
</span></span></code></pre></div><ol start="5">
<li>å¯é€‰å¯¼å‡º pfx æ ¼å¼è¯ä¹¦ï¼Œè¯ä¹¦ä¼šå‡ºç°åœ¨ certificates æ–‡ä»¶å¤¹é‡Œé¢</li>
</ol>
<pre tabindex="0"><code>traefik
â”œâ”€â”€ certificates
â”‚   â”œâ”€â”€ cert.cer
â”‚   â”œâ”€â”€ cert.key
â”‚   â””â”€â”€ cert.pfx
â”œâ”€â”€ tc.sh
â””â”€â”€ acme.json
</code></pre><h3 id="å‡å¦‚ä»¥ä¸Šæ˜¯åŠè‡ªåŠ¨è¯ä¹¦å¯¼å‡ºä¸‹é¢è¿˜æœ‰å…¨æ‰‹åŠ¨çš„æ–¹æ³•">å‡å¦‚ä»¥ä¸Šæ˜¯åŠè‡ªåŠ¨è¯ä¹¦å¯¼å‡ºï¼Œä¸‹é¢è¿˜æœ‰å…¨æ‰‹åŠ¨çš„æ–¹æ³•ã€‚</h3>
<ol>
<li>å¤åˆ¶ acme.json ä¸­ certificates é‚£ä¸€è¡Œ</li>
<li>ç²˜è´´åˆ° <a href="https://oktools.net/base64">Base64è§£ç </a> ä¸­è§£ç æ </li>
<li>æ–‡æœ¬ç¼–è¾‘å™¨ä¿å­˜è§£ç ç»“æœä¸º cert.crt</li>
<li>keyåŒç†ï¼Œä¿å­˜ä¸º cert.key</li>
</ol>
]]></content></item><item><title>åˆ©ç”¨ Github Action è‡ªåŠ¨ç¼–è¯‘OpenWrt</title><link>https://vicfree.com/2022/05/github-action-auto-compile-openwrt/</link><pubDate>Tue, 17 May 2022 15:21:34 +0800</pubDate><guid>https://vicfree.com/2022/05/github-action-auto-compile-openwrt/</guid><description>æƒ³è‡ªå·±ç”¨ Linux ç¼–è¯‘ è¯·çœ‹è¿™ä¸ªè§†é¢‘ https://www.bilibili.com/video/BV1854y1W7fu/ æœ¬æ¬¡æ•™ç¨‹åŸºäºä¸‹åˆ—å‰è½¦ä¹‹é‰´ https://github.com/KFERMercer/OpenWrt-CI æ³¨å†Œ Github æœ¬æ­¥éª¤è·³è¿‡ï¼Œç½‘ä¸Šä¸€å¤§å †ï¼Œè¯·å‚è€ƒã€‚ 1. Fork Openwrt æ‰“å¼€ https://github.com/immortalwrt/immortalwrt/fork 2. ä¿®æ”¹ â–¶ï¸Actions çš„ Workflows ymlæ–‡</description><content type="html"><![CDATA[<blockquote>
<p>æƒ³è‡ªå·±ç”¨ Linux ç¼–è¯‘ è¯·çœ‹è¿™ä¸ªè§†é¢‘ <a href="https://www.bilibili.com/video/BV1854y1W7fu/">https://www.bilibili.com/video/BV1854y1W7fu/</a></p>
</blockquote>
<h3 id="æœ¬æ¬¡æ•™ç¨‹åŸºäºä¸‹åˆ—å‰è½¦ä¹‹é‰´">æœ¬æ¬¡æ•™ç¨‹åŸºäºä¸‹åˆ—å‰è½¦ä¹‹é‰´</h3>
<p><a href="https://github.com/KFERMercer/OpenWrt-CI">https://github.com/KFERMercer/OpenWrt-CI</a></p>
<h2 id="æ³¨å†Œ-github">æ³¨å†Œ Github</h2>
<p>æœ¬æ­¥éª¤è·³è¿‡ï¼Œç½‘ä¸Šä¸€å¤§å †ï¼Œè¯·å‚è€ƒã€‚</p>
<h2 id="1-fork-openwrt">1. Fork Openwrt</h2>
<p>æ‰“å¼€ <a href="https://github.com/immortalwrt/immortalwrt/fork">https://github.com/immortalwrt/immortalwrt/fork</a></p>
<h2 id="2-ä¿®æ”¹-actions-çš„-workflows-ymlæ–‡ä»¶">2. ä¿®æ”¹ â–¶ï¸Actions çš„ Workflows ymlæ–‡ä»¶</h2>
<ol>
<li>
<p>è¿›å…¥ä½  <code>Fork</code> åçš„ <code>OpenWrt</code> é¡µé¢</p>
</li>
<li>
<p>æ£€æŸ¥å½“å‰çš„ <code>OpenWrt</code> æœ‰æ²¡æœ‰ <code>.github/workflows</code> æ–‡ä»¶å¤¹</p>
<blockquote>
<p>æœ‰ -&gt; è¿›å…¥<code>.github/workflows</code> ä¿®æ”¹é‡Œé¢çš„ <code>***.yml</code> æ–‡ä»¶</p>
</blockquote>
<blockquote>
<p>æ²¡æœ‰ -&gt; è¿›å…¥ <code>â–¶ï¸Actions</code> ä¼šè‡ªåŠ¨æ–°å»º <code>.github/workflows\main.yml</code></p>
</blockquote>
</li>
<li>
<p>å¤åˆ¶æˆ‘åœ¨ä¸‹æ–‡æä¾›çš„ ymlæ¨¡æ¿ï¼Œç²˜è´´ã€‚</p>
</li>
<li>
<p>ï¼ˆå¯é€‰ï¼‰å‚è€ƒä¸‹æ–‡è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹ï¼Œæ¯”å¦‚ <code>åŠ è½¯ä»¶</code> <code>æ”¹å¹³å°</code></p>
</li>
<li>
<p>ä¿®æ”¹ä¸¤å¤„ branch åï¼Œä»æ¨¡æ¿çš„ <code>openwrt-21.02</code> ä¿®æ”¹ä¸ºä½ å½“å‰æ­£åœ¨ç¼–è¾‘ branchï¼Œæ¯”å¦‚ <code>master</code> æˆ– <code>main</code></p>
</li>
<li>
<p>ä¿®æ”¹å®Œæˆå <code>Start commit</code> -&gt; <code>Commit changes</code></p>
</li>
</ol>
<h2 id="3-æ­¤æ—¶ä½ çš„-openwrt-ä¼šè‡ªåŠ¨å¼€å§‹ç¼–è¯‘">3. æ­¤æ—¶ä½ çš„ OpenWrt ä¼šè‡ªåŠ¨å¼€å§‹ç¼–è¯‘</h2>
<p>æ—¶é•¿çº¦ä¸¤å°æ—¶ï¼Œå®Œæˆåï¼Œå»<code>â–¶ï¸Actions</code>é¡µé¢ä¸‹è½½ <code>OpenWrt_firmware</code> å³å¯</p>
<h2 id="4-è‡ªå®šä¹‰å›ºä»¶">4. è‡ªå®šä¹‰å›ºä»¶</h2>
<ol>
<li>æ‰¾åˆ°ä½ éœ€è¦å®‰è£…çš„åŒ…åï¼Œå®˜æ–¹è½¯ä»¶åŒ…å¤§å…¨ <a href="https://openwrt.org/packages/index/start">https://openwrt.org/packages/index/start</a></li>
<li>è½¯ä»¶åŒ…å¯ä»¥ä»ç¼–è¯‘ç¯å¢ƒä¸‹ <code>make defconfig</code> ç”Ÿæˆ <code>.config</code> ä¸­æ‰¾åˆ°</li>
</ol>
<blockquote>
<p>æ¯”å¦‚ # CONFIG_PACKAGE_luci-app-dockerman is not set</p>
</blockquote>
<ol start="3">
<li>æ·»åŠ åŒ…ååˆ°<code>openwrt-ci.yml</code> ä¸­ <code>cat &gt;&gt; .config &lt;&lt;EOF</code>åé¢ï¼Œå¯¹ç€æˆ‘çš„ä¾‹å­è¿›è¡Œä¿®æ”¹ã€‚</li>
</ol>
<blockquote>
<p>ä¿®æ”¹ä¸º CONFIG_PACKAGE_luci-app-dockerman=y</p>
</blockquote>
<ol start="4">
<li>ç¼–è¯‘å…¶ä»–å›ºä»¶ï¼Œéœ€è¦ä¿®æ”¹ <code>Target</code>-&gt; <code>å­Target</code> -&gt; <code>è®¾å¤‡å</code> ä¿®æ”¹ä¸‹é¢ä¸‰è¡Œåšä¾‹å­ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„è¦å’Œå…¶ä»–è¡Œ <code>é¦–å­—æ¯å¯¹é½</code>ï¼Œé”™ä½å¿…ç¼–è¯‘é”™è¯¯ï¼</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="w">          </span><span class="l">CONFIG_TARGET_ramips=y</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="l">CONFIG_TARGET_ramips_mt7621=y</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="l">CONFIG_TARGET_ramips_mt7621_DEVICE_youhua_wr1200js=y</span><span class="w">
</span></span></span></code></pre></div><h2 id="5-æˆ‘ç›®å‰ä½¿ç”¨çš„æ¨¡æ¿">5. æˆ‘ç›®å‰ä½¿ç”¨çš„æ¨¡æ¿</h2>
<blockquote>
<p>æˆ‘x86é»˜è®¤ç¼–è¯‘vmdkç»™ESXiï¼Œä½ ç”¨ä¸åˆ°å¯ä»¥åˆ é™¤æ­¤è¡Œã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="c">#</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># This is free software, lisence use MIT.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Copyright (C) 2019 P3TERX &lt;https://p3terx.com&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Copyright (C) 2020 KFERMercer &lt;KFER.Mercer@gmail.com&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># &lt;https://github.com/KFERMercer/OpenWrt-CI&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">OpenWrt-CI</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">openwrt-21.02</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># schedule:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c">#   - cron: 0 20 * * *</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">release</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">published]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">build_openwrt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Build OpenWrt firmware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-22.04</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l">github.event.repository.owner.id == github.event.sender.id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Checkout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l">openwrt-21.02</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Space cleanup</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">DEBIAN_FRONTEND</span><span class="p">:</span><span class="w"> </span><span class="l">noninteractive</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          docker rmi `docker images -q`
</span></span></span><span class="line"><span class="cl"><span class="sd">          sudo rm -rf /usr/share/dotnet /etc/mysql /etc/php /etc/apt/sources.list.d /usr/local/lib/android
</span></span></span><span class="line"><span class="cl"><span class="sd">          sudo -E apt-get -y purge azure-cli ghc* zulu* hhvm llvm* firefox google* dotnet* powershell openjdk* adoptopenjdk* mysql* php* mongodb* dotnet* moby* snapd* || true
</span></span></span><span class="line"><span class="cl"><span class="sd">          sudo -E apt-get update
</span></span></span><span class="line"><span class="cl"><span class="sd">          sudo -E apt-get -y install build-essential clang flex g++ gawk gcc-multilib gettext git libncurses5-dev libssl-dev python3-distutils rsync unzip zlib1g-dev file wget asciidoc binutils bzip2 util-linux help2man intltool libelf-dev make patch perl-modules python3-dev xsltproc qemu-utils
</span></span></span><span class="line"><span class="cl"><span class="sd">          sudo -E apt-get -y autoremove --purge
</span></span></span><span class="line"><span class="cl"><span class="sd">          sudo -E apt-get clean
</span></span></span><span class="line"><span class="cl"><span class="sd">          df -h</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Update feeds</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          # sed -i &#39;s/#src-git helloworld/src-git helloworld/g&#39; ./feeds.conf.default
</span></span></span><span class="line"><span class="cl"><span class="sd">          # echo &#34;src-git helloworld https://github.com/fw876/helloworld.git&#34; &gt;&gt; &#34;feeds.conf.default&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          ./scripts/feeds update -a
</span></span></span><span class="line"><span class="cl"><span class="sd">          ./scripts/feeds install -a</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Generate configuration file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          rm -f ./.config*
</span></span></span><span class="line"><span class="cl"><span class="sd">          touch ./.config
</span></span></span><span class="line"><span class="cl"><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          #
</span></span></span><span class="line"><span class="cl"><span class="sd">          # åœ¨ cat &gt;&gt; .config &lt;&lt;EOF åˆ° EOF ä¹‹é—´ç²˜è´´ä½ çš„ç¼–è¯‘é…ç½®, éœ€æ³¨æ„ç¼©è¿›å…³ç³»
</span></span></span><span class="line"><span class="cl"><span class="sd">          # ä¾‹å¦‚:
</span></span></span><span class="line"><span class="cl"><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          cat &gt;&gt; .config &lt;&lt;EOF
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_TARGET_x86=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_TARGET_x86_64=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_TARGET_x86_64_DEVICE_generic=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_VMDK_IMAGES=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_LUCI_LANG_en=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_LUCI_LANG_zh_Hans=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_zabbix-extra-network=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-attendedsysupgrade=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-ddns=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-firewall=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-https-dns-proxy=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-nlbwmon=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-sqm=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-ssr-plus=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-ssr-plus_INCLUDE_Hysteria=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-ssr-plus_INCLUDE_Trojan=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-turboacc=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_TURBOACC_INCLUDE_BBR_CCA=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-upnp=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-vlmcsd=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-wireguard=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-app-wol=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_avahi-dbus-daemon=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_avahi-utils=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_bind-dig=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_ddns-scripts-cloudflare=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_ddns-scripts-dnspod=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_ddns-scripts_aliyun=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_nmap-ssl=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_adguardhome=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_curl=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_nano=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_open-vm-tools=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_qrencode=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_whois=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_luci-proto-ipv6=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_wget-ssl=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_libip6tc=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_ip6tables=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_ip6tables-mod-nat=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_kmod-ipt-nat6=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_kmod-nf-nat6=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_odhcpd-ipv6only=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_odhcp6c=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          CONFIG_PACKAGE_6in4=y
</span></span></span><span class="line"><span class="cl"><span class="sd">          EOF
</span></span></span><span class="line"><span class="cl"><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          #
</span></span></span><span class="line"><span class="cl"><span class="sd">          # ===============================================================
</span></span></span><span class="line"><span class="cl"><span class="sd">          # 
</span></span></span><span class="line"><span class="cl"><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          sed -i &#39;s/^[ \t]*//g&#39; ./.config
</span></span></span><span class="line"><span class="cl"><span class="sd">          make defconfig</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Make download</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          make download -j8 || make download -j1 V=s
</span></span></span><span class="line"><span class="cl"><span class="sd">          rm -rf $(find ./dl/ -size -1024c)
</span></span></span><span class="line"><span class="cl"><span class="sd">          df -h</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Compile firmware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          make -j$(nproc) || make -j1 V=s
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;=======================&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;Space usage:&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;=======================&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          df -h
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;=======================&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          du -h ./ --max-depth=1
</span></span></span><span class="line"><span class="cl"><span class="sd">          du -h /mnt/openwrt/ --max-depth=1 || true</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Prepare artifact</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          mkdir -p ./artifact/firmware
</span></span></span><span class="line"><span class="cl"><span class="sd">          mkdir -p ./artifact/package
</span></span></span><span class="line"><span class="cl"><span class="sd">          mkdir -p ./artifact/buildinfo
</span></span></span><span class="line"><span class="cl"><span class="sd">          rm -rf $(find ./bin/targets/ -type d -name &#34;packages&#34;)
</span></span></span><span class="line"><span class="cl"><span class="sd">          cp -rf $(find ./bin/targets/ -type f) ./artifact/firmware/
</span></span></span><span class="line"><span class="cl"><span class="sd">          cp -rf $(find ./bin/packages/ -type f -name &#34;*.ipk&#34;) ./artifact/package/
</span></span></span><span class="line"><span class="cl"><span class="sd">          cp -rf $(find ./bin/targets/ -type f -name &#34;*.buildinfo&#34; -o -name &#34;*.manifest&#34;) ./artifact/buildinfo/</span><span class="w">          
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deliver buildinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/upload-artifact@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">OpenWrt_buildinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">./artifact/buildinfo/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deliver package</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/upload-artifact@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">OpenWrt_package</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">./artifact/package/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deliver firmware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/upload-artifact@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">OpenWrt_firmware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">./bin/targets/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Upload release asset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l">github.event == &#39;release&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">svenstaro/upload-release-action@v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">repo_token</span><span class="p">:</span><span class="w"> </span><span class="l">${{ secrets.YOURTOKEN }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">./artifact/firmware/*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">${{ github.ref }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">file_glob</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div>]]></content></item><item><title>ä¸€é”®å®‰è£… Sonarr Radarr Jackett è¿½å‰§ä¸€æ¡é¾™</title><link>https://vicfree.com/2022/04/install-sonarr-radarr-jackett-with-docker-compose/</link><pubDate>Tue, 26 Apr 2022 00:18:41 +0800</pubDate><guid>https://vicfree.com/2022/04/install-sonarr-radarr-jackett-with-docker-compose/</guid><description>æ„Ÿè°¢åŸpo, æˆ‘å°±åŸºæœ¬ç…§ç€æŠ„å°±æ˜¯äº†ã€‚ å‡†å¤‡å·²å®‰è£… Docker, docker-compose çš„æœåŠ¡å™¨ å·æ‡’ä¸‹ï¼Œå®‰è£…æ•™ç¨‹å¼•ç”¨Techno Tim + å®˜æ–¹æ•™ç¨‹ï¼Œè„šæœ¬å¤åˆ¶ç²˜è´´å®Œäº‹ã€‚ å¼€æ æŒ‰ä¸‹é¢æ“ä½œæ–°å»ºæ–‡</description><content type="html"><![CDATA[<p><a href="https://nubcakes.net/index.php/2019/04/03/how-to-install-sonarr-radarr-and-jackett-with-docker-compose/">æ„Ÿè°¢åŸpo</a>, æˆ‘å°±åŸºæœ¬ç…§ç€æŠ„å°±æ˜¯äº†ã€‚</p>
<h2 id="å‡†å¤‡å·²å®‰è£…-docker-docker-compose-çš„æœåŠ¡å™¨">å‡†å¤‡å·²å®‰è£… Docker, docker-compose çš„æœåŠ¡å™¨</h2>
<p>å·æ‡’ä¸‹ï¼Œå®‰è£…æ•™ç¨‹å¼•ç”¨<a href="https://docs.technotim.live/posts/docker-compose-install">Techno Tim</a> + <a href="https://docs.docker.com/engine/install/">å®˜æ–¹æ•™ç¨‹</a>ï¼Œè„šæœ¬å¤åˆ¶ç²˜è´´å®Œäº‹ã€‚</p>
<h2 id="å¼€æ">å¼€æ</h2>
<p>æŒ‰ä¸‹é¢æ“ä½œæ–°å»ºæ–‡ä»¶å¤¹</p>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šä½¿ç”¨nanoç¼–è¾‘å™¨ï¼Œä½ å–œæ¬¢å•¥ç”¨å•¥ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir docker
</span></span><span class="line"><span class="cl">mkdir docker/radarr
</span></span><span class="line"><span class="cl">mkdir docker/sonarr
</span></span><span class="line"><span class="cl">mkdir docker/jackett
</span></span><span class="line"><span class="cl">mkdir docker/portainer
</span></span><span class="line"><span class="cl">mkdir downloads
</span></span><span class="line"><span class="cl">mkdir downloads/movies
</span></span><span class="line"><span class="cl">mkdir downloads/tv
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> docker
</span></span><span class="line"><span class="cl">touch docker-compose.yml
</span></span><span class="line"><span class="cl">nano docker-compose.yml
</span></span></code></pre></div><h4 id="docker-composeymlé…ç½®">docker-compose.ymlé…ç½®</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">radarr</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">radarr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">7878</span><span class="p">:</span><span class="m">7878</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/docker/radarr:/config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/downloads:/downloads</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/downloads/movies:/movies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PUID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PGID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TZ=Asia/Shanghai</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">linuxserver/radarr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">sonarr</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">sonarr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">8989</span><span class="p">:</span><span class="m">8989</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/docker/sonarr:/config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/downloads:/downloads</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/downloads/tv:/tv</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PUID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PGID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TZ=Asia/Shanghai</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">linuxserver/sonarr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">jackett</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">jackett</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">9117</span><span class="p">:</span><span class="m">9117</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/docker/jackett:/config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/downloads:/downloads</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PUID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PGID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TZ=Asia/Shanghai</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">linuxserver/jackett</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">portainer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">portainer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">9000</span><span class="p">:</span><span class="m">9000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/var/run/docker.sock:/var/run/docker.sock</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/xxx/docker/portainer:/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PUID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PGID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TZ=Asia/Shanghai</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">portainer/portainer-ce</span><span class="w">
</span></span></span></code></pre></div><h2 id="æ˜ å°„nas-smbå­˜å‚¨">æ˜ å°„NAS SMBå­˜å‚¨</h2>
<p>å› ä¸ºæˆ‘æ˜¯è™šæ‹Ÿæœºå®‰è£…çš„ï¼Œæ‰€ä»¥è¦æ˜ å°„ä¸‹è½½ç›˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt update
</span></span><span class="line"><span class="cl">apt install cifs-utils
</span></span></code></pre></div><p>ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŒ‚è½½åˆ° /home/xxx/downloads</p>
<pre tabindex="0"><code>sudo mount -t cifs -o uid=1000,gid=1000,username=xxx //192.168.xxx.xxx/xxx/downloads /home/xxx/downloads
</code></pre><p>å¦‚æœä½ æƒ³å¼€æœºè‡ªåŠ¨æŒ‚è½½</p>
<pre tabindex="0"><code>nano /etc/fstab
</code></pre><p>ç²˜è´´ä»¥ä¸‹å†…å®¹</p>
<pre tabindex="0"><code>//192.168.xx.xx/xxx/downloads /home/xxx/downloads cifs username=xxx,password=xxx,uid=1000,gid=1000,noauto,x-systemd.automount,_netdev,vers=2.1 0 0
</code></pre><pre tabindex="0"><code>sudo mount -a
</code></pre><p>æµ‹è¯•ä¸€ä¸‹ï¼Œä¸€åˆ‡æ­£å¸¸å°±å¯ä»¥é‡å¯è¯•è¯•äº†</p>
<h2 id="è½¯ä»¶å¦‚ä½•ä½¿ç”¨">è½¯ä»¶å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h2>
<p>å¤ªå¤šäº† è‡ªå·±çœ‹å§ <a href="https://wiki.servarr.com/">https://wiki.servarr.com/</a></p>
]]></content></item><item><title>traefikåå‘ä»£ç† httpsåŠ å¯†è®¿é—®ä»»ä½•å®¶ç”¨è®¾å¤‡</title><link>https://vicfree.com/2022/04/use-traefik-https-everything/</link><pubDate>Mon, 25 Apr 2022 22:56:43 +0800</pubDate><guid>https://vicfree.com/2022/04/use-traefik-https-everything/</guid><description>å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œé¦–å‘å…¥æ‰‹PS5ï¼Œä¹Ÿæ²¡å•¥æ¸¸æˆå€¼å¾—ç©çš„äº†ï¼ŒæœŸå¾…ä¸€ä¸‹ä¸‹ä¸ªæœˆçš„PS PLUS EXTRAï¼ŒåŠ é’±å‡çº§ï¼Œå¤§æ–¹è¿˜æ˜¯ä¸å¦‚å¾®è½¯ï¼Œä½†æ˜¯æ¯•ç«Ÿå¾®è½¯æ˜¯è´¢å¤§æ°”ç²—ä¸”å¼±</description><content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œé¦–å‘å…¥æ‰‹PS5ï¼Œä¹Ÿæ²¡å•¥æ¸¸æˆå€¼å¾—ç©çš„äº†ï¼ŒæœŸå¾…ä¸€ä¸‹ä¸‹ä¸ªæœˆçš„PS PLUS EXTRAï¼ŒåŠ é’±å‡çº§ï¼Œå¤§æ–¹è¿˜æ˜¯ä¸å¦‚å¾®è½¯ï¼Œä½†æ˜¯æ¯•ç«Ÿå¾®è½¯æ˜¯è´¢å¤§æ°”ç²—ä¸”å¼±åŠ¿ã€‚</p>
<p>è¯è¯´æœ€è¿‘çœ‹åˆ°ä¸€ä¸ª<a href="https://www.youtube.com/watch?v=liV3c9m_OX8">Techno Timçš„è§†é¢‘</a>ï¼Œè®²åˆ°äº†traefik ssl everything, æˆ‘çªç„¶æ¥åŠ²äº†ï¼Œå®¶é‡Œç½‘ç»œå·²ç»å¾ˆä¹…æ²¡å˜åŒ–äº†ï¼Œæ‰‹ç—’äº†éƒ½ï¼Œå¼€æã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸­å›½å®½å¸¦ç½‘ç»œæ˜¯é™åˆ¶80,443ç«¯å£çš„ï¼Œå¯¼è‡´è§†é¢‘ä¸­ä¸€äº›é…ç½®ä¸ç¬¦åˆæˆ‘ä»¬çš„ä¹ æƒ¯ï¼Œæˆ‘ä¼šåˆ é™¤ä¸€äº›å¯¹æˆ‘ä»¬å¤šä½™çš„ä¸œè¥¿ï¼Œæ¯”å¦‚httpsè·³è½¬ï¼ŒåŸæ•™ç¨‹ config.yml ä¸­å¤§é‡httpsè·³è½¬ï¼Œä½†httpsè·³è½¬çš„å‰ææ˜¯ä½ å¾—å¼€httpå•Šã€‚</p>
<p>traefik ä¼šè‡ªåŠ¨æ›´æ–° let&rsquo;s Encryt httpsè¯ä¹¦ï¼Œå®¶ç”¨åå‘ä»£ç†ï¼Œè‡ªå®šä¹‰ç«¯å£ custom port: 8443ï¼Œè¿™éš¾é“ä¸è¯±äººå—ï¼Ÿ</p>
<blockquote>
<p>å¦‚ä½•æœ‰ä»»ä½•ä¸æ˜ç™½å¯è®¿é—®<a href="https://doc.traefik.io/traefik/getting-started/quick-start/">traefikå®˜æ–¹Doc</a>ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ˜¯çœ‹äº†å®˜æ–¹èµ„æ–™æ‰æ˜ç™½çš„å¾ˆå¤šçš„ã€‚</p>
</blockquote>
<h2 id="å‡†å¤‡å·²å®‰è£…-docker-docker-compose-çš„æœåŠ¡å™¨">å‡†å¤‡å·²å®‰è£… Docker, docker-compose çš„æœåŠ¡å™¨</h2>
<p>å·æ‡’ä¸‹ï¼Œå®‰è£…æ•™ç¨‹å¼•ç”¨<a href="https://docs.technotim.live/posts/docker-compose-install">Techno Tim</a> + <a href="https://docs.docker.com/engine/install/">å®˜æ–¹æ•™ç¨‹</a>ï¼Œè„šæœ¬å¤åˆ¶ç²˜è´´å®Œäº‹ã€‚</p>
<h2 id="traefik-å®‰è£…å¼€å§‹">traefik å®‰è£…å¼€å§‹</h2>
<p>å‡†å¤‡é¡¹</p>
<ul>
<li>ä½ çš„Cloudflareæ³¨å†Œé‚®ç®±</li>
<li>å»Cloudflareè·å–ä½ çš„API Tokenï¼Œè¦æ±‚æœ€ä½æƒé™ï¼šAll zones-Zone:Read, DNS:Editï¼Œæˆ–è€…æœ€é«˜æƒé™çš„API Key.</li>
<li>è´­ä¹°åŸŸåä¸€ä¸ªï¼Œå¹¶æ·»åŠ åˆ°Cloudflareé‡Œ</li>
</ul>
<blockquote>
<p>è¿˜æœ‰å…¶ä»–åŸŸåæä¾›å•†èƒ½å¤Ÿä½¿ç”¨çš„<a href="https://doc.traefik.io/traefik/https/acme/">acme</a>ï¼Œä½†ä¸é€‚åˆæˆ‘ä»¬è¿™ç±»å°ç™½</p>
</blockquote>
<blockquote>
<p>traefik ç®¡ç†é¡µé¢ç†è®ºä¸Šå¯ä»¥ä¸åŠ å¯†ç ï¼Œä½†æ˜¯ä½ è¦å‘å¸ƒåˆ°å…¬ç½‘ä¸Šï¼Œè¯·ä¸€å®šè¦åŠ å¯†ç ï¼ˆåŠ å¯†ç è¯·çœ‹é…ç½®ä¸­traefik-authä¸¤é¡¹ï¼‰</p>
</blockquote>
<p>æŒ‰ä¸‹é¢æ“ä½œæ–°å»ºæ–‡ä»¶å¤¹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir traefik
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> traefik
</span></span><span class="line"><span class="cl">mkdir data
</span></span><span class="line"><span class="cl">touch data/acme.json
</span></span><span class="line"><span class="cl">chmod <span class="m">600</span> data/acme.json
</span></span><span class="line"><span class="cl">touch data/traefik.yml
</span></span><span class="line"><span class="cl">touch data/config.yml
</span></span><span class="line"><span class="cl">touch docker-compose.yml
</span></span><span class="line"><span class="cl">docker network create proxy
</span></span></code></pre></div><p>ï¼ˆå¯é€‰ï¼‰ç”Ÿæˆç½‘é¡µå¯†ç ï¼Œå¡«å…¥åˆ°é…ç½®ä¸­</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install apache2-utils
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="k">$(</span>htpasswd -nb admin 12345678<span class="k">)</span> <span class="p">|</span> sed -e s/<span class="se">\\</span>$/<span class="se">\\</span>$<span class="se">\\</span>$/g
</span></span></code></pre></div><p>æ¥ä¸‹æ¥æˆ‘ä¼šä½¿ç”¨nanoç¼–è¾‘å™¨ï¼Œä½ å–œæ¬¢å•¥ç”¨å•¥ã€‚</p>
<h4 id="docker-composeymlé…ç½®">docker-compose.ymlé…ç½®</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nano docker-compose.yml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">traefik</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">traefik:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">traefik</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">security_opt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="kc">no</span>-<span class="l">new-privileges:true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">proxy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">8443</span><span class="p">:</span><span class="m">8443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">CF_API_EMAIL=XXX@XXX.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">CF_DNS_API_TOKEN=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># - CF_API_KEY=YOU_API_KEY</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># be sure to use the correct one depending on if you are using a token or key</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/localtime:/etc/localtime:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/var/run/docker.sock:/var/run/docker.sock:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/XXX/traefik/data/traefik.yml:/traefik.yml:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/XXX/traefik/data/acme.json:/acme.json</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/XXX/traefik/data/config.yml:/config.yml:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.enable=true&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.middlewares.traefik-auth.basicauth.users=XXX:XXXXXXXXXXXXXX&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.middlewares.sslheader.headers.customrequestheaders.X-Forwarded-Proto=https&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.entrypoints=https&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.rule=Host(`traefik.XXXX.com`)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.middlewares=traefik-auth&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.tls=true&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.tls.certresolver=cloudflare&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.tls.domains[0].main=XXXX.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.tls.domains[0].sans=*.XXXX.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;traefik.http.routers.traefik-secure.service=api@internal&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">proxy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><h4 id="traefikymlé…ç½®">traefik.ymlé…ç½®</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nano data/traefik.yml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">api</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dashboard</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">entryPoints</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">https</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;:8443&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">serversTransport</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">insecureSkipVerify</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">providers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">docker</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;unix:///var/run/docker.sock&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">exposedByDefault</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">file</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l">/config.yml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">certificatesResolvers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">cloudflare</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">acme</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="l">XXX@XXX.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l">acme.json</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dnsChallenge</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l">cloudflare</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">resolvers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;223.6.6.6:53&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;119.29.29.29:53&#34;</span><span class="w">
</span></span></span></code></pre></div><blockquote>
<p><code>ä¸ºä»€ä¹ˆresolversä¸é€‰æ‹©OpenWrt DNSï¼Ÿå› ä¸º ACME æ•´ä¸ªéªŒè¯æ—¶é—´åªæœ‰å‡ åˆ†é’Ÿï¼Œä»–ä¼šæ·»åŠ ä¸€ä¸ª txté¡¹ åˆ°ä½ çš„åŸŸåDNSä¸‹ï¼Œç»è¿‡å†…éƒ¨DNSç¼“å­˜ï¼Œè¿”å›å‡ åˆ†é’Ÿå‰çš„è§£æç»“æœï¼ˆä¹Ÿå°±æ˜¯æ›´æ–°ä¸èƒ½åŠæ—¶ç»™traefikï¼‰ï¼Œä¼šå¯¼è‡´éªŒè¯æ—¶é—´è¶…æ—¶å¤±è´¥</code></p>
</blockquote>
<h4 id="configymlå…¶ä»–è®¾å¤‡é…ç½®">config.ymlå…¶ä»–è®¾å¤‡é…ç½®</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nano data/config.yml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c">#region routers </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">routers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">jellyfin</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">entryPoints</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;https&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Host(`jellyfin.XXXX.com`)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">default-headers</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">jellyfin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">nextcloud</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">entryPoints</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;https&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rule</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Host(`nextcloud.XXXX.com`)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">middlewares</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">default-headers</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">nextcloud</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#endregion</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#region services</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">jellyfin</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">loadBalancer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">servers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;http://192.168.xx.xx:8096&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">passHostHeader</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">nextcloud</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">loadBalancer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">servers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://192.168.xx.xx:9443&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">passHostHeader</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">default-headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">frameDeny</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sslRedirect</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">browserXssFilter</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">contentTypeNosniff</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">forceSTSHeader</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">stsIncludeSubdomains</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">stsPreload</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">stsSeconds</span><span class="p">:</span><span class="w"> </span><span class="m">15552000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">customFrameOptionsValue</span><span class="p">:</span><span class="w"> </span><span class="l">SAMEORIGIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">customRequestHeaders</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">X-Forwarded-Proto</span><span class="p">:</span><span class="w"> </span><span class="l">https</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">default-whitelist</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ipWhiteList</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sourceRange</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;10.0.0.0/8&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;192.168.0.0/16&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;172.16.0.0/12&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secured</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">chain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">middlewares</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">default-whitelist</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">default-headers</span><span class="w">
</span></span></span></code></pre></div><h2 id="å¯åŠ¨traefik">å¯åŠ¨traefik</h2>
<blockquote>
<p>Warning!!! è·å–è¯ä¹¦å› ä¸ºéœ€è¦æ“ä½œDNSè®°å½•ï¼Œç­‰å¾…ç”Ÿæ•ˆï¼Œéœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker-compose up -d
</span></span></code></pre></div><blockquote>
<p>å¦‚ä½•ä½ ä¹‹å‰é…ç½®é…é”™äº†ï¼Œä¿®æ”¹é…ç½®åé‡æ–°å¯åŠ¨dockerå‘½ä»¤</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker-compose up -d --force-recreate
</span></span></code></pre></div><p>æ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹åŸpoï¼Œå’Œæˆ‘çš„åŒºåˆ«ï¼Œæˆ‘å·²ç»å¸®å¤§å®¶æŠŠhttpsæ”¹æˆ8443ï¼Œæ”¯æŒcloudflareéšè—ä½ çš„IP(ä½†é€Ÿåº¦æ…¢)ã€‚
æ¨èå¤§å®¶å‡†å¤‡ä¸¤å° traefikï¼Œä¸€å°https://xxx.local.xxxx.com, ä¸“é—¨ç»™å†…éƒ¨ç½‘ç»œè®¿é—® ä¸å¼€å¤–éƒ¨æƒé™ï¼›å¦ä¸€å°å°±æ˜¯æ•™ç¨‹ä¸­https://xxx.xxx.com:8443.</p>
<h3 id="å†…éƒ¨åŸŸåæ‰¹é‡è§£æ">å†…éƒ¨åŸŸåæ‰¹é‡è§£æ</h3>
<p>ä¸”ä½ æ˜¯openwrtï¼Œä½¿ç”¨ä¸‹é¢é…ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nano /etc/dnsmasq.conf
</span></span></code></pre></div><p>æ–‡ä»¶æœ«å°¾å¡«å…¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">address=/.local.xxx.com/192.168.xx.xx
</span></span></code></pre></div><p>æ–°ç‰ˆæœ¬OpenWrtå¯ä½¿ç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">uci add_list dhcp.@dnsmasq[0].address=&#39;/local.xxx.com/192.168.xx.xx&#39;
</span></span></code></pre></div><p>æ¥æ·»åŠ ï¼Œæµ‹è¯•æ— é—®é¢˜ï¼Œè®°å¾— <code>uci commit</code></p>
<h2 id="å¤–éƒ¨éƒ¨åŸŸåæ‰¹é‡è§£æ">å¤–éƒ¨éƒ¨åŸŸåæ‰¹é‡è§£æ</h2>
<blockquote>
<p>è®°å¾—å¼€å¯è·¯ç”±å™¨ç«¯å£8443åˆ°ä½ çš„dockeræœåŠ¡å™¨ipåœ°å€ä¸Š
Cloudflare æ–°å¢åŸŸåè§£æåˆ°ä½ çš„è·¯ç”±å™¨DDNSä¸Š</p>
</blockquote>
<h3 id="å®‰è£…portainer">å®‰è£…Portainer</h3>
<p>çœ‹<a href="https://docs.technotim.live/posts/traefik-portainer-ssl/">åŸpoå§</a></p>
<h3 id="æ–°è£…çš„dockeræ€ä¹ˆåŠ åä»£">æ–°è£…çš„dockeræ€ä¹ˆåŠ åä»£</h3>
<p>ç†è®ºä¸Šæ–°dockeråªè¦åŠ ä¸Šä¸‹é¢è¿™æ®µï¼Œéƒ½ä¼šè‡ªåŠ¨åŠ å…¥åˆ°traefikæ¸…å•é‡Œ</p>
<pre tabindex="0"><code>    labels:
      - &#34;traefik.enable=true&#34;
      - &#34;traefik.http.routers.portainer-secure.entrypoints=https&#34;
      - &#34;traefik.http.routers.portainer-secure.rule=Host(`portainer.local.example.com`)&#34;
      - &#34;traefik.http.routers.portainer-secure.tls=true&#34;
      - &#34;traefik.http.routers.portainer-secure.service=portainer&#34;
      - &#34;traefik.http.services.portainer.loadbalancer.server.port=9000&#34;
      - &#34;traefik.docker.network=proxy&#34;
</code></pre><p>Updated in 2022/12/12</p>
]]></content></item><item><title>ä¸ºä»€ä¹ˆç”¨OpenWrt</title><link>https://vicfree.com/2020/08/why-openwrt/</link><pubDate>Sun, 23 Aug 2020 16:15:38 +0800</pubDate><guid>https://vicfree.com/2020/08/why-openwrt/</guid><description>åœ¨è°ˆOpenWrtä¹‹å‰ï¼Œéœ€è¦ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯OpenWrtï¼Œç”¨äººè¯æ¥è¯´å°±æ˜¯ï¼šå¯æ›¿æ¢è·¯ç”±å™¨å‡ºå‚ç³»ç»Ÿçš„ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œæ˜¯ç”¨Linuxåšå‡ºæ¥çš„å¼€æºç³»ç»Ÿã€‚ ä¸º</description><content type="html"><![CDATA[<p>åœ¨è°ˆOpenWrtä¹‹å‰ï¼Œéœ€è¦ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯<a href="https://zh.wikipedia.org/wiki/OpenWrt">OpenWrt</a>ï¼Œç”¨äººè¯æ¥è¯´å°±æ˜¯ï¼šå¯æ›¿æ¢è·¯ç”±å™¨å‡ºå‚ç³»ç»Ÿçš„ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œæ˜¯ç”¨<a href="https://zh.wikipedia.org/wiki/Linux">Linux</a>åšå‡ºæ¥çš„å¼€æºç³»ç»Ÿã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸ç”¨è·¯ç”±å™¨å‡ºå‚ç³»ç»Ÿï¼Œä½ ä¼šé—®ã€‚é‚£æ˜¯å› ä¸ºå‡ºå‚ç³»ç»ŸåŠŸèƒ½å°‘ï¼Œé€Ÿåº¦æ…¢ã€‚ç½‘ä»¶Netgearæ˜¯å¤§å‚ä¸­ç³»ç»Ÿæœ€æ…¢çš„ï¼Œä¿®æ”¹ä»»ä½•è®¾ç½®éƒ½éœ€è¦1-2åˆ†é’Ÿï¼Œè€Œä¸”è¿˜ä¼šæ–­ç½‘ã€‚åç¡•Asusçš„å¿«ä¸€ç‚¹ï¼Œä½†æ˜¯ä¾ç„¶è¾¾ä¸åˆ°é€Ÿåº¦å¿«çš„ç­‰çº§ã€‚TP-Linkåˆ™æ˜¯ä¸€æœµå¥‡è‘©ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯åŠŸèƒ½å°‘ï¼Œå¤§å¤šæ•°éƒ½æ˜¯VxWorkçš„ç³»ç»Ÿï¼Œä¸”éƒ½æ˜¯ä½é…ï¼Œå›½å¤–çš„TP-Linkè¦å¥½ä¸€ç‚¹ï¼ˆæ¯•ç«Ÿå›½å†…è¿˜æ˜¯ä½ä»·è·‘é‡ï¼Œä¸è¯†è´§çš„å±…å¤šï¼‰ã€‚</p>
<p>è¯´è¯´æˆ‘çš„ç½‘ç»œè®¾å¤‡å§ï¼š</p>
<ol>
<li>ç›®å‰ä½¿ç”¨Esxiæ¶è®¾äº†ä¸€ä¸ªOpenWrtä¸»è·¯ç”±ï¼Œx86æ¶æ„ï¼Œæ–¹ä¾¿ç³»ç»Ÿå‡çº§å’Œåˆ·ä¸æ­»ã€‚å› ä¸ºEsxiå¯è¿è¡Œå¤šä¸ªè™šæ‹ŸOpenWrtï¼Œå¯éšæ„åˆ‡æ¢å¤šä¸ªç‰ˆæœ¬çš„OpenWrtã€‚</li>
<li>ä¸¤ä¸ªåˆ·äº†OpenWrtçš„æ— çº¿è·¯ç”±ï¼Œåˆ†åˆ«æ˜¯AC867+AC1300ï¼Œæˆ¿é—´å…¨è¦†ç›–AC 5GHzï¼Œä¸¤ä¸ªè·¯ç”±éƒ½æ˜¯æ”¯æŒ802.11 kvrï¼Œå¯æ— é™æ¼«æ¸¸ï¼Œä½†æ˜¯æˆ‘åªå¯ç”¨äº†802.11 kvï¼Œ 802.11r æœªå¯ç”¨ã€‚</li>
<li>æ‰€æœ‰æ— çº¿è·¯ç”±éƒ½æ˜¯ä½¿ç”¨LANè¿æ¥ï¼Œæ— çº¿è·¯ç”±ä½¿ç”¨äº†<a href="https://openwrt.org/docs/guide-user/network/wifi/dumbap">APæ¨¡å¼</a>ï¼Œå› ä¸ºæˆ‘æ¯ä¸ªæˆ¿é—´éƒ½æœ‰2-4æ ¹ç½‘çº¿ã€‚</li>
<li>å…¥æˆ·å…‰çŒ«æ¥2å±‚ç®¡ç†å‹äº¤æ¢æœºï¼Œå¯¹WANå’ŒLANåˆ’åˆ†ä¸åŒVLANï¼Œå¯å•çº¿ä¼ è¾“WAN+LANï¼ŒèŠ‚çœç½‘çº¿ï¼Œä¸”äº¤æ¢æœºæ¯æ ¹ç½‘çº¿éƒ½å¯ä»¥å˜æˆWANï¼Œç›´è¿æ‹¨å·ã€‚</li>
</ol>
<p>é‚£ä¹ˆæ€ä¹ˆåˆ·æœºOpenWrtå‘¢ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„é—®é¢˜ï¼Œæ¬¢è¿å»<a href="https://www.right.com.cn/forum/">æ©å±±è®ºå›</a>è®¨è®ºæ­¤é—®é¢˜ï¼Œæˆ–è€…å»<a href="https://openwrt.org/toh/start">OpenWrtå®˜æ–¹</a>ã€‚</p>
<p>å®˜æ–¹OpenWrtç¼ºå°‘å¾ˆå¤šå›½äººä¸“ç”¨è½¯ä»¶ï¼Œæ¨èä½¿ç”¨ä¸­å›½ç‰¹ä¾›OpenWrt: <a href="https://github.com/immortalwrt/immortalwrt">https://github.com/immortalwrt/immortalwrt</a></p>
<p><a href="https://github.com/coolsnowwolf/lede">Deprecated</a> LEDEã€‚ä½ é—®ä¸ºä»€ä¹ˆè¿™ä¸ªå«LEDEï¼Œè¿™ä¸ªæ˜¯å†å²é—ç•™é—®é¢˜ï¼šOpenWrtå¦æœ‰ä¸€ä¸ªå¤åˆ»åˆ†æ”¯é¡¹ç›®ï¼Œåä¸ºLEDEï¼Œä¸¤è€…äº2018å¹´1æœˆåˆå¹¶ï¼Œåˆå¹¶åçš„é¡¹ç›®ä½¿ç”¨OpenWrtçš„åå­—ã€LEDEçš„æºä»£ç ã€‚</p>
<p><a href="https://www.zhihu.com/people/denglj">çŸ¥ä¹ç½‘å‹denglj</a>å…³äºè·¯ç”±å†å²çš„æ€»ç»“ï¼š<a href="https://www.zhihu.com/question/20822589/answer/1001410286">https://www.zhihu.com/question/20822589/answer/1001410286</a></p>
<blockquote>
<p>2002å¹´10æœˆï¼ŒLinksyså…¬å¸ï¼ˆç”±ä¸€å¯¹ç§»æ°‘ç¾å›½çš„å°æ¹¾å¤«å¦‡æ›¹è‹±ä¼Ÿå’Œå´å¥åˆ›å»ºï¼‰å‘å¸ƒäº†åä¸ºWRT54Gçš„æ— çº¿è·¯ç”±å™¨çš„ç¬¬1ä¸ªç‰ˆæœ¬ï¼Œè¯¥æœºå‹åŸºäº32-bit MIPSèŠ¯ç‰‡ï¼Œæ­è½½äº†åŸºäºLinuxå†…æ ¸çš„å›ºä»¶ï¼Œå¹¶ä¸”å¯ä»¥åˆ·æœºï¼›WRTçš„å«ä¹‰ï¼ŒLinksysåŸæ„å¯èƒ½æ˜¯æŒ‡ Wirless Receiver/Transmitterï¼Œç°åœ¨å¤§å®¶éƒ½è§£è¯»ä¸ºWirless RouTerï¼›</p>
</blockquote>
<blockquote>
<p>2003å¹´3æœˆï¼ŒCiscoå…¬å¸ä»¥5äº¿ç¾å…ƒçš„ä»·æ ¼æ”¶è´­äº†Linksysï¼Œæˆä¸ºå…¶å­å…¬å¸ï¼Œæ­¤åLinksysæ¨å‡ºçš„äº§å“éƒ½æ ‡è®°ä¸Š Linksys by Ciscoï¼›</p>
</blockquote>
<blockquote>
<p>2003å¹´6æœˆï¼ŒLinux Kernel å¼€å‘ç»„å¬é—»WRT54Gæ­è½½äº†åŒ…å«GPLå¼€æºåè®®çš„Linuxä»£ç ï¼Œè¦æ±‚Linksyså¼€æºç›¸å…³éƒ¨åˆ†çš„ä»£ç ï¼Œä¸ºæ­¤FSF(è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼š)è¿˜èµ·è¯‰Ciscoï¼›</p>
</blockquote>
<blockquote>
<p>2003å¹´7æœˆï¼Œå°½ç®¡å„æ–¹å¯¹WRT54Gå›ºä»¶æ˜¯å¦åº”è¯¥å¼€æºæœ‰æ‰€äº‰è®®ï¼Œä¸è¿‡Ciscoå’ŒLinksysè¿«äºå¤–ç•Œå‹åŠ›è¿˜æ˜¯å¼€æºäº†WRT54Gå›ºä»¶ï¼Œè‡³æ­¤ï¼Œå„ç§å®šåˆ¶å›ºä»¶å’Œè·¯ç”±å™¨åˆ·æœºå¼€å§‹æµè¡Œäº†èµ·æ¥ï¼ˆLintelåœ¨å…¶2012å¹´çš„ä¸€ä»½æ–‡æ¡£ä¸­è¯´æ˜¯2003å¹´3æœˆæ€ç§‘è¢«è¿«å¼€æºï¼Œå…¶å®æœ‰è¯¯ï¼Œ3æœˆä»½æ€ç§‘å’Œé¢†åŠ¿è¿˜åœ¨å¿™æ”¶è´­çš„äº‹å§ï¼‰ï¼›</p>
</blockquote>
<blockquote>
<p>2004å¹´1æœˆï¼ŒOpenWrt é¡¹ç›®å¯åŠ¨ï¼ˆæ®å…¶å®˜ç½‘è‡ªæˆ‘ä»‹ç»ï¼Œæœªæ‰¾åˆ°æºç æˆ–è®ºå›è®¨è®ºç­‰å…¶ä»–ä½è¯ï¼‰ï¼ŒåŸºäºWRT54Gå›ºä»¶å¼€å‘ï¼Œåæ¥ï¼ˆä¸çŸ¥é“æ˜¯å¤šä¹…ä»¥åï¼Œæ ¹æ®2004å’Œ2005å¹´çš„è®ºå›ä¿¡æ¯æ˜¾ç¤ºï¼ŒAlchemyå¦‚æ—¥ä¸­å¤©çš„æ—¶å€™OpenWrtè¿˜æ˜¯ä¸ªå¼Ÿå¼Ÿï¼‰å‘å¸ƒåä¸ºâ€œstable releaseâ€çš„ç‰ˆæœ¬ï¼›</p>
</blockquote>
<blockquote>
<p>2004å¹´6æœˆï¼ŒSevasoftå…¬å¸åŸºäºLinksyså›ºä»¶æ”¾å‡ºäº†Alchemy v1.0ï¼Œä»–ä»¬åšçš„å›ºä»¶åœ¨å½“æ—¶æ˜¯æœ€æµè¡Œçš„ï¼Œåœ¨v1.0ä¹‹å‰çš„preç‰ˆæœ¬å°±å¾ˆæµè¡Œäº†ï¼Œå¼€å‘ä¹Ÿå¾ˆæ´»è·ƒï¼ŒSevasoftä¹Ÿæ˜¯WRT54Gç³»åˆ—æœ€æ—©çš„å¼€æºå¼€å‘è€…ä¹‹ä¸€ï¼›</p>
</blockquote>
<blockquote>
<p>2004å¹´11æœˆï¼Œ Timothy Jans(åˆå« Avenger 2.0)ï¼ŒåŸºäºLinksyså¼€æºçš„WRT54Gç³»åˆ—çš„å›ºä»¶å‘å¸ƒäº†HyperWRTï¼Œä¸»è¦æ˜¯å¼€æ”¾ä¸€äº›å®˜ç‰ˆå—é™çš„åŠŸèƒ½ï¼Œä½†åˆå°½å¯èƒ½ä¿æŒåŸæ±åŸå‘³ï¼›</p>
</blockquote>
<blockquote>
<p>2005å¹´1-2æœˆï¼ŒLinksysä¸ºäº†æ”¯æŒè¿™äº›ç¬¬ä¸‰æ–¹å›ºä»¶æŠŠWRT54G v4æœºå‹æ‹¿æ¥é‡æ–°ä¸Šå¸‚ï¼Œå¹¶é‡å‘½åä¸ºWRT54GLå…¶ä¸­Læ˜¯æŒ‡Linuxï¼Œæ®Linksysç›¸å…³è´Ÿè´£äººåœ¨2018å¹´ç§°ï¼ŒWRT54GLæ˜¯è¿„ä»Šä¸ºæ­¢æœ€ç•…é”€çš„è·¯ç”±å™¨ï¼›Sveasoftå…¬å¸é‰´äºè‡ªå·±åœ¨Alchemyå›ºä»¶ä¸Šå–å¾—çš„å·¨å¤§æˆåŠŸï¼Œæœ‰äº†è½¬å•†ä¸šè¿è¥èµšé’±çš„æƒ³æ³•ï¼Œä½†é™äºGPLåè®®ï¼Œåˆä¸å¾—ä¸å¼€æºï¼Œæƒ³å‡ºçš„å˜é€šåšæ³•å°±æ˜¯ï¼Œè®©ç”¨æˆ·æ¯å¹´äº¤20ç¾å…ƒçš„è®¢é˜…è´¹ï¼Œä»˜è´¹ç”¨æˆ·å¯ä»¥è¿›å…¥è®ºå›äº«ç”¨å•†ç”¨ç‰ˆå›ºä»¶ï¼Œè€Œå…è´¹ç”¨æˆ·åªæœ‰ä½¿ç”¨æ›´æ–°è¾ƒæ…¢çš„ç‰ˆæœ¬ï¼ŒAlchemyç¤¾åŒºå†…ä¹Ÿæœ‰äººçœ‹ä¸æƒ¯è¿™ç§æ”¶è´¹è¡Œä¸ºï¼Œäºæ˜¯è‡ªè¡Œä¿®æ”¹Alchemyç„¶åå¯¹å¤–å‘å¸ƒï¼›</p>
</blockquote>
<blockquote>
<p>2005å¹´1æœˆ22æ—¥ï¼ŒSebastian Gottschall(åˆå«BrainSlayer)åŸºäºAlchemy v16å›ºä»¶å¼€å‘äº†ç¬¬ä¸€ç‰ˆDD-WRT v16å›ºä»¶ï¼Œç‰ˆæœ¬å·æ²¿ç”¨Alchemyçš„ï¼ŒDDæ˜¯å¾·å›½ä¸œéƒ¨DresdenåŸå¸‚çš„æ±½è½¦ç‰Œç…§çš„ç¼©å†™ï¼Œè¯¥åŸå¸‚æ˜¯DD-WRTå¼€å‘ç»„ç”Ÿæ´»çš„åœ°æ–¹ï¼›</p>
</blockquote>
<blockquote>
<p>2005å¹´2æœˆï¼ŒHyperWRTåŸç‰ˆåœæ›´ï¼Œ tofuå’Œ Thibor ä¸¤åå¼€å‘è€…åŸºäºå®ƒç»§ç»­å¼€å‘ï¼Œé¡¹ç›®åä¸º HyperWRT +tofu å’Œ HyperWRT Thiborï¼›</p>
</blockquote>
<blockquote>
<p>2005å¹´ä¸­ï¼ŒOpenWrt å‘å¸ƒäº†åä¸º â€œexperimentalâ€çš„ç‰ˆæœ¬ï¼›</p>
</blockquote>
<blockquote>
<p>2005å¹´12æœˆï¼ŒDD-WRT v23å‘å¸ƒï¼Œé‰´äºAlchemyç¤¾åŒºçš„å†…æ–—å’Œå•†ä¸šä»˜è´¹çš„é£é™©ï¼ŒDD-WRTè‡ªv23å¼€å§‹å°†å›ºä»¶æ ¸å¿ƒæ›¿æ¢ä¸ºäº†OpenWrtï¼›</p>
</blockquote>
<blockquote>
<p>2006å¹´2æœˆï¼ŒHyperWRT+tofuåœæ­¢å¼€å‘ï¼Œåˆå¹¶å…¥HyperWRT Thiborï¼Œåè€…å¼€å‘è‡³2008å¹´2æœˆåœæ›´ï¼›</p>
</blockquote>
<blockquote>
<p>2006å¹´12æœˆï¼Œ Jonathan Zarateå‘å¸ƒäº† Tomato(ç•ªèŒ„ï¼Œä¹Ÿç®€ç§°TT) çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ŒåŸºäºHyperWRTä¸ºLinksys WRT54Gç³»åˆ—å’ŒBuffalo WHR-G54Sç³»åˆ—æœºå‹å®šåˆ¶æ›´æ˜“ç”¨åŠŸèƒ½æ›´å¼ºçš„å›ºä»¶ï¼Œä¸»è¦æ”¯æŒåšé€šBroadcomçš„ç³»åˆ—èŠ¯ç‰‡ï¼›</p>
</blockquote>
<blockquote>
<p>2007å¹´1æœˆï¼ŒOpenWrtå‘å¸ƒäº†ä»£å·ä¸ºWhite Russiançš„å›ºä»¶ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¹‹åçš„OpenWrtæ‰å˜å¾—è¶Šå‘æµè¡Œï¼›</p>
</blockquote>
<blockquote>
<p>2008å¹´7æœˆ14æ—¥ï¼ŒEric BishopåŸºäºOpenWrt Kamikaze(v7.xå’Œv8.x)å‘å¸ƒäº†Gargoyle(çŸ³åƒé¬¼)å›ºä»¶çš„ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆv1.0ï¼ŒåŠ å…¥äº†è‡ªå·±çš„åŒ…ç®¡ç†å™¨ï¼Œæ ¼å¼ä¸º gpkgï¼›</p>
</blockquote>
<blockquote>
<p>2008å¹´7æœˆ26æ—¥ï¼ŒDD-WRT v24 SP1 å‘å¸ƒï¼Œç„¶åè‡³ä»Šåœæ›´ï¼Œä»2010å¹´èµ·DD-WRTç¤¾åŒºè¯¸å¤šå¼€å‘è€…åœ¨ä¸æ–­å‘å¸ƒå„ç§å˜ä½“ç‰ˆæœ¬çš„å›ºä»¶ï¼›</p>
</blockquote>
<blockquote>
<p>2010å¹´ï¼Œåç¡•ASUSå‘å¸ƒäº†RT-N56Uè·¯ç”±å™¨ï¼ˆå…·ä½“å‘å¸ƒæ—¥æœŸæ²¡æ‰¾åˆ°ï¼Œåç¡•å®˜ç½‘è¯´RT-N56Uè·å¾—äº†2010å¹´çš„iFè®¾è®¡å¥–ï¼‰ï¼Œè¯¥æœºå‹æ­è½½çš„æ˜¯è”å‘ç§‘MTKçš„èŠ¯ç‰‡ï¼›</p>
</blockquote>
<blockquote>
<p>2010å¹´6æœˆ28æ—¥ï¼ŒTomato(ç•ªèŒ„) å®˜æ–¹æ›´æ–°äº†v1.28ç¨³å®šç‰ˆï¼Œç„¶åè‡³ä»Šè¿˜æœªæ›´æ–°ï¼›</p>
</blockquote>
<blockquote>
<p>2011å¹´1æœˆï¼Œåç¡•åœ¨CESä¸Šå‘å¸ƒäº†RT-N66Uè·¯ç”±å™¨ï¼Œè¯¥æœºå‹æœ€æ—©ä½¿ç”¨Asuswrtå›ºä»¶çš„ï¼ˆåç¡•æ›´æ—©æœºå™¨æ­è½½çš„å›ºä»¶è¿˜æ²¡ç»Ÿä¸€æˆå‹ï¼‰ï¼ŒAsuswrtæ˜¯åŸºäºTomato-RT/Tomato-USBå¼€å‘ï¼Œä¸»è¦æ”¯æŒåšé€šBroadcomèŠ¯ç‰‡å’Œéƒ¨åˆ†é«˜é€šAtherosèŠ¯ç‰‡ï¼›åŒæœˆï¼Œé«˜é€šQualcommæ”¶è´­åˆ›é”è®¯Atherosä¸ºå…¨èµ„å­å…¬å¸ï¼Œåè€…ä¸»è¦ç ”å‘æ— çº¿é€šè®¯èŠ¯ç‰‡ï¼›</p>
</blockquote>
<blockquote>
<p>2012å¹´5æœˆ3æ—¥ï¼Œä¿„ç½—æ–¯äººAndy Padavan(è€æ¯›å­)åˆ›å»ºäº†rt-n56ué¡¹ç›®å¹¶æäº¤åˆå§‹åŒ–ä»£ç ï¼ŒåŸºäº Asuswrt-Merlin å›ºä»¶å¼€å‘ï¼Œç”±äºRT-N56Uæ­è½½çš„æ˜¯è”å‘ç§‘èŠ¯ç‰‡ï¼Œåæ¥Padavanè¢«ç§»æ¤åˆ°å¤šæ¬¾åŸºäºè”å‘ç§‘èŠ¯ç‰‡çš„è·¯ç”±ï¼›</p>
</blockquote>
<blockquote>
<p>2012å¹´6æœˆ19æ—¥ï¼ŒåŠ æ‹¿å¤§äººEric Sauvageauåˆ›å»ºäº†Asuswrt-Merlin(æ¢…æ—) é¡¹ç›®å¹¶æäº¤äº†åˆå§‹åŒ–ä»£ç ï¼ŒåŸºäº Asuswrt 3.0.0.3.144ï¼›</p>
</blockquote>
<blockquote>
<p>2013å¹´10æœˆï¼ŒCiscoå…¬å¸å°†Linksyså–ç»™äº†Belkinå…¬å¸ï¼ŒLinksysè‡³æ­¤ä¸æ€ç§‘æ— å…³ï¼Œæ–°ä¸œå®¶Belkinä¿ç•™äº†LinksysåŸå“ç‰Œï¼›</p>
</blockquote>
<blockquote>
<p>2013å¹´-2016å¹´ï¼Œå›½å†…å„å¤§ç¥å¼€å§‹åœ¨è®ºå›æ´»è·ƒæœ€é¢‘ç¹çš„æ—¶é—´æ®µï¼Œå‘å¸ƒç›¸å…³æ•™ç¨‹å’Œä»–ä»¬åŸºäºOpenWrt/LEDEã€Tomatoã€DDç­‰å®šåˆ¶çš„å›ºä»¶ï¼ŒLeanã€Lintelã€ä½é¡»ä¹‹ç”·éƒ½å‡ºååœ¨è¿™ä¸ªæ—¶æ®µï¼›</p>
</blockquote>
<blockquote>
<p>2016å¹´3æœˆ1æ—¥ï¼Œä½é¡»ä¹‹ç”·åœ¨TomatoåŸºç¡€ä¸Š(åº”è¯¥æ˜¯åŸºäºTomato v1.28)ï¼Œå‘å¸ƒäº†Tomato Phoenix(ä¸æ­»é¸Ÿ)çš„ç¬¬ä¸€ä¸ªå…¬å¼€æµ‹è¯•ç‰ˆï¼Œä¸»è¦å¢åŠ äº†Tomatoå¯¹è”å‘ç§‘èŠ¯ç‰‡çš„æ”¯æŒï¼›</p>
</blockquote>
<blockquote>
<p>2016å¹´5æœˆï¼ŒOpenWrt çš„éƒ¨åˆ†æ ¸å¿ƒæˆå‘˜åŸºäºOpenWrtå¦èµ·ç‚‰ç¶å¼€äº†LEDEé¡¹ç›®ï¼Œä¸»è¦å› çœ‹ä¸æƒ¯æ—¢æœ‰ç¤¾åŒºçš„ä¹ŒçƒŸç˜´æ°”å’Œæ—§æºç çš„è´¨é‡ï¼›</p>
</blockquote>
<blockquote>
<p>2017å¹´1æœˆ24æ—¥ï¼ŒLintelå®£å¸ƒå› å›¢é˜Ÿæ¥æ‰‹Newifiç³»åˆ—è·¯ç”±çš„å›ºä»¶ç»´æŠ¤ï¼Œè€ŒPandoraBox(æ½˜å¤šæ‹‰)åœæ­¢æ›´æ–°ï¼Œè¯¥å›ºä»¶æ˜¯ä¸ºäº†ç…§é¡¾éƒ¨åˆ†è‹±æ–‡æ°´å¹³è¾ƒèœå’ŒåŠ¨æ‰‹èƒ½åŠ›è¾ƒå·®çš„ç©å®¶ï¼Œå¯¹OpenWRT/LEDEåšäº†æœ¬åœ°åŒ–ï¼Œå¹¶é¢„ç¼–è¯‘æˆ–å®‰è£…äº†å¤§é™†ç”¨æˆ·å¸¸ç”¨çš„æŸäº›åŠŸèƒ½ï¼Œæœ€æ—©å‘å¸ƒåœ¨ openwrt.org.cnä¸Šï¼›</p>
</blockquote>
<blockquote>
<p>2017å¹´2æœˆï¼ŒLEDEçš„ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆå‘å¸ƒï¼Œç‰ˆæœ¬å·ä¸ºv17.01.0ï¼ŒLEDEçš„ä¸»è¦æ”¹è¿›æ˜¯é‡æ„äº†OpenWrtä»£ç ï¼Œæ›¿æ¢äº†æ–‡ä»¶ç³»ç»Ÿæ”¹ä¸ºJFFS2ï¼Œæ›´å‹å¥½çš„Webç•Œé¢LuCIï¼Œæ›´å¤šçš„opkgåŒ…æ”¯æŒç­‰ï¼›</p>
</blockquote>
<blockquote>
<p>2018å¹´1æœˆï¼ŒOpenWrt è€é¡¹ç›®å’Œç¦»å®¶å‡ºèµ°çš„LEDEå†³å®šå¤åˆï¼Œåä¸ºOpenWrt/LEDEï¼Œåœ¨åŸLEDEå›¢é˜Ÿçš„è§„çŸ©å’Œä¸»å¯¼ä¸‹è¿ä½œï¼Œä½†åå­—ä»å«OpenWrtï¼›</p>
</blockquote>
<blockquote>
<p>2018-2019å¹´ï¼ŒOpenWrtå’ŒLEDEä¸»è¦åœ¨ç‰ˆæœ¬å·ä¸ºv18.xçš„ä»£ç ä¸Šå®Œæˆåˆå¹¶å·¥ä½œï¼ŒDD-WRTã€Asuswrt-Merlinã€Padavanç­‰æ´»è·ƒé¡¹ç›®ä¹Ÿåœ¨æŒç»­æ›´æ–°ã€‚ç°åœ¨ï¼Œéšç€è·¯ç”±å›ºä»¶å®šåˆ¶ã€å¼€å‘æŠ€æœ¯çš„æ™®åŠï¼Œå„è·¯è®ºå›é‡ŒåŸºäºOpenWrt/LEDEã€DD-WRTã€Merlinã€Padavanã€Tomatoç­‰çŸ¥åå›ºä»¶çš„å„ç§ç§äººè®¢åˆ¶å±‚å‡ºä¸ç©·â€¦â€¦</p>
</blockquote>
<p><del>ä¸Šé¢çš„OpenWrtç¼–è¯‘ç®€å•ï¼Œä¸”æˆåŠŸç‡é«˜ï¼Œè½¯ä»¶é½å…¨ï¼Œç¼–è¯‘å‰è®°å¾—æŠŠ lede/feeds.conf.default é‡Œçš„#src-git helloworld <a href="https://github.com/fw876/helloworld">https://github.com/fw876/helloworld</a> å‰çš„ <code>#</code> å»é™¤ã€‚</del></p>
<p>Updated in 2022/12/12</p>
]]></content></item><item><title>å…³äº PS5</title><link>https://vicfree.com/2020/04/about-ps5/</link><pubDate>Thu, 30 Apr 2020 18:49:43 +0800</pubDate><guid>https://vicfree.com/2020/04/about-ps5/</guid><description>Playstation 5 ç´¢å°¼åœ¨3æœˆ18æ—¥å‘å¸ƒäº†ä¸€ä¸ªåŸæœ¬åœ¨è®¡åˆ’ GDCGame Developers Conferenceå¤§ä¼šä¸Šæ¼”è®²çš„è§†é¢‘ï¼Œé‚£ä¸ªè§†é¢‘æ˜¯è®²ç»™æ¸¸æˆå¼€å‘è€…å¬çš„ï¼Œå†…å®¹éå¸¸çš„ç¡¬ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬ç¿»</description><content type="html"><![CDATA[<h2 id="playstation-5">Playstation 5</h2>
<p>ç´¢å°¼åœ¨3æœˆ18æ—¥å‘å¸ƒäº†ä¸€ä¸ªåŸæœ¬åœ¨è®¡åˆ’ GDC<code>Game Developers Conference</code>å¤§ä¼šä¸Šæ¼”è®²çš„è§†é¢‘ï¼Œé‚£ä¸ªè§†é¢‘æ˜¯è®²ç»™æ¸¸æˆå¼€å‘è€…å¬çš„ï¼Œå†…å®¹éå¸¸çš„ç¡¬ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬ç¿»è¯‘æˆäººè¯ã€‚</p>
<p>å·²ç»æœ‰å¤§ä½¬ç¿»è¯‘å¥½äº†å¤§ä½¬çš„è§£é‡Šè§†é¢‘</p>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV1QA411v783/">ç¬¬ä¸€è¯</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV1QK4y147Gv/">ç¬¬äºŒè¯</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV1zK4y147bh/">ç¬¬ä¸‰è¯</a></p>
</blockquote>
<p>æ¼”è®²å¼€å§‹ä»‹ç»äº†å†ä»£æ¸¸æˆä¸»æœºçš„å¼€å‘è€…ç†Ÿæ‚‰å‘¨æœŸï¼Œä½“ç°äº†è¿™ä¸€æ¬¡PS5å¼€å‘å·¥å…·å¯¹å¼€å‘è€…å¾ˆå‹å¥½ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">PS1</th>
<th style="text-align:center">PS2</th>
<th style="text-align:center">PS3</th>
<th style="text-align:center">PS4</th>
<th style="text-align:center">PS5</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1-2ä¸ªæœˆ</td>
<td style="text-align:center">3-6ä¸ªæœˆ</td>
<td style="text-align:center">6-12ä¸ªæœˆ</td>
<td style="text-align:center">1-2ä¸ªæœˆ</td>
<td style="text-align:center">å°äº1ä¸ªæœˆ</td>
</tr>
</tbody>
</table>
<p>ç´¢å°¼ä¹Ÿä»‹ç»äº†å¾ˆå¤šå…³äº PS5<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>è½¯ç¡¬ä»¶çš„ç»†èŠ‚ï¼Œä½†æ˜¯å¾ˆå¤šä¿¡æ¯éƒ½åœ¨ä¼ è¾“ä¸­ä¸¢å¤±äº†ï¼Œæˆ–è€…æ­ªæ›²äº†äº‹å®ã€‚</p>
<h2 id="ps5çš„è¶…å¿«-ssd">PS5çš„è¶…å¿« SSD</h2>
<p>PS5 æ›´å¿«çš„ SSD ç»™äºˆå¼€å‘è€…è‡ªç”±ï¼Œå¾ˆå¤šäººéƒ½è®¤ä¸º PS5 è¿™ä¹ˆå¿«çš„SSDèµ·ä¸åˆ°ä½œç”¨ï¼Œæ²¡æœ‰äººä¼šä¸ºäº†PS5è¿™ä¹ˆå¿«çš„SSDè¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>ä¹ä¸€çœ‹å¥½åƒè¯´çš„æ²¡é”™ï¼Œä½†æ˜¯ä½ è‡ªå·±æƒ³æƒ³PCï¼Œä¸ºä»€ä¹ˆæœ‰äººä¹°ä¸‰æ˜Ÿ980 Proï¼Œå› ä¸ºå®ƒé€Ÿåº¦å¿«å•Šï¼Œä½ è§è¿‡æœ‰æ¸¸æˆä¼šä¸ºä¸‰æ˜Ÿ980 Proè¿›è¡Œä¼˜åŒ–å—ï¼Œé€Ÿåº¦å¿«ï¼Œä½¿å¾—æ¸¸æˆæ¯ä¸ªç¯èŠ‚éƒ½ä¼šè¿è¡Œçš„å¿«ï¼Œç¨‹åºå‘˜å†™çš„ç¨‹åºå†å·®ä¹Ÿèƒ½æµç•…è¿è¡Œã€‚</p>
<p>å¹¶ä¸”æ¯ä»£ä¸»æœºå¯¿å‘½çº¦6å¹´ï¼Œç°åœ¨çš„æ¯ç§’5.5GB/sï¼Œè¯´ä¸å®š5å¹´å SSD æ¯ç§’20GB/sï¼Œç°åœ¨ SSD æˆæœ¬è™½ç„¶é«˜ï¼Œä½†æ˜¯åªæ˜¯ç›¸è¾ƒäºHDDï¼Œå’Œ Xbox SX çš„2.4GB/sçš„SSDç›¸æ¯”ï¼Œä»·æ ¼å·®æˆ‘çŒœæ¯GBä»·æ ¼ PS5 æ˜¯ XBox SX çš„1.5å€ã€‚å¯èƒ½ä¹Ÿæ˜¯ PS5 å†…ç½®825GBï¼ŒXbox SXå†…ç½®1TBçš„åŸå› ã€‚</p>
<p>PS5 å†…ç½®äº† PCIe 4x4  12é€šé“825GB SSDï¼Œç´¢å°¼å½“ç„¶å¯ä»¥åŠ å…¥æ›´å¤§ SSDï¼Œä½†æ˜¯æœ€ç»ˆä»·æ ¼ä¾ç„¶ä¼šè½¬å«åˆ°æ¶ˆè´¹è€…ï¼Œæ‰€ä»¥ç´¢å°¼è®¤ä¸º825Gæ˜¯æœ€åˆé€‚çš„å¤§å°ã€‚ä½†å‘å¸ƒæ—¶ä¼šä¸ä¼šå‡ºæ›´å¤§SSDæ²¡æœ‰æåˆ°ã€‚</p>
<p>PS5æ”¯æŒå¤–ç½® HDD ç© PS4 æ¸¸æˆï¼ŒPS5æ¸¸æˆä¸æ”¯æŒåœ¨å¤–ç½® HDD è¿è¡Œã€‚</p>
<p>PS5æ”¯æŒå¤–ç½®PCIe 4x4 M.2 SSDï¼Œå¯ä»¥è´­ä¹°æ¶ˆè´¹è€…çº§SSDï¼Œä½†æ¨è2020å¹´åº•ç­‰å¾… PS5 å…¼å®¹ SSDã€‚
æ¶ˆè´¹è€…çº§ M.2 SSD åªæ”¯æŒ2ä¸ªä¼˜å…ˆçº§ï¼Œä½†æ˜¯ PS5 å†…ç½®SSDæ”¯æŒ6ä¸ªä¼˜å…ˆçº§ï¼Œæ‰€ä»¥ä½¿ç”¨çš„M.2 SSDé€Ÿåº¦å¿…é¡»è¶…è¿‡PS5å†…ç½®SSDé€Ÿåº¦ï¼Œä»¥ä¾¿PS5çªç„¶éœ€è¦åŠ è½½æ•°æ®ï¼Œå‡å¦‚æ˜¯ä½é€ŸSSDæ­¤æ—¶ä¼šè¢«å…¶ä»–æ•°æ®ä¼ è¾“å ç”¨ï¼Œæ— æ³•åŠ è½½é‡è¦æ•°æ®ã€‚</p>
<h2 id="å®šåˆ¶-rdna2-gpu">å®šåˆ¶ RDNA2 GPU</h2>
<p>å‡å¦‚ä½ èƒ½çœ‹æ‡‚â€˜å®šåˆ¶â€™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå°±ä¸ä¼šæ€€ç–‘ PS5 ä½¿ç”¨çš„æ˜¯ RDNA1 äº†ã€‚å¦‚æœä½ æ€€ç–‘ PS5 ç”¨çš„ä¸æ˜¯ RDNA2ï¼Œä½ å¯ä»¥ç«‹å³ä¿å­˜è¯æ® <a href="https://www.youtube.com/watch?v=ph8LyNIT9sg">è§†é¢‘</a> <a href="https://blog.us.playstation.com/2020/03/18/unveiling-new-details-of-playstation-5-hardware-technical-specs/">åšå®¢</a>ï¼Œç­‰PS5ä¸Šå¸‚ï¼Œæ‹¿å‡ºä¸Šé¢çš„è¯æ®å»å‘Šç´¢å°¼æ¬ºè¯ˆï¼Œäººè¶Šå¤šï¼Œèµ”æ¬¾è¶Šå¤šï¼Œåˆ«æˆ‘æˆ‘æ²¡å‘Šè¯‰ä½ å‘è´¢æœºä¼šå“¦ã€‚</p>
<p>PS5 å¾ˆå¤šæŠ€æœ¯éƒ½æ˜¯å’Œ AMD å…±åŒç ”å‘ï¼Œå‡å¦‚ RDNA2 æ˜¾å¡ä¸Šå¸‚äº†ï¼ŒåŒ…å«äº† PS5 GPU æŸäº›åŠŸèƒ½ï¼Œå¹¶ä¸è¡¨ç¤º PS5 æŠ„çš„ AMD/PC çš„ä½œä¸šã€‚</p>
<p>PS5 æ”¯æŒå‘ä¸‹ PS4 å…¼å®¹ï¼ŒPS4 å‘ä¸‹å…¼å®¹æ˜¯ä¸ AMD ä¸€èµ·åˆä½œå¼€å‘ï¼Œä½†å› ä¸ºæ¯ä¸ªæ¸¸æˆéƒ½ä¸ä¸€æ ·ï¼Œå‘ä¸‹å…¼å®¹ä¹Ÿéœ€è¦å¯¹åº”æ¸¸æˆåšå‡ºç›¸åº”çš„ä¿®æ”¹ï¼Œå¦‚åŒæ¯å½“ä¸€ä¸ªæ–°æ¸¸æˆå‡ºæ¥ï¼ŒAMD/NVéƒ½ä¼šå‡ºä¸€ç‰ˆä¼˜åŒ–ç‰¹å®šæ¸¸æˆçš„é©±åŠ¨ã€‚</p>
<p>ç´¢å°¼å·²æµ‹è¯• PS4 æŒ‰æ—¶é—´æ’åºå‰100çš„æ¸¸æˆï¼Œå‡ ä¹æ‰€æœ‰<code>Almost all of them</code>æ¸¸æˆéƒ½èƒ½ PS5 ä¸Šå¸‚æ—¶è¿è¡Œã€‚</p>
<p>PS5 æ”¯æŒå…‰çº¿è¿½è¸ªï¼Œä¸ªåˆ«æ¸¸æˆå®ç°éå¸¸ä½çš„ä»£ä»·è¿è¡Œäº†ä»¥åå°„ä¸ºåŸºç¡€çš„å…‰çº¿è¿½è¸ªã€‚</p>
<p>PS5 æ”¯æŒ AMD SmartShift, PS5 çš„ CPU GPU çš„åŠŸè€—å°±æ˜¯è··è··æ¿ï¼ŒCPU åŠŸè€—å¢é«˜ï¼ŒGPU åŠŸè€—å°±ä¼šé™ä½ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<p>Zen 2 CPU 3.5GHz, RDNA 2 GPU 2.23GHz<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>ï¼Œå¹¶ä¸” GPU å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¼šä¿æŒæˆ–æ¥è¿‘ 2.23GHz é™„è¿‘ï¼Œé€šå¸¸é™ä½10%åŠŸè€—ï¼Œåªéœ€è¦é™ä½å‡ ä¸ªç™¾åˆ†ç‚¹çš„é¢‘ç‡ï¼Œæ‰€ä»¥ PS5 é™é¢‘æƒ…å†µéå¸¸å°‘ã€‚</p>
<h2 id="3d-éŸ³é¢‘">3D éŸ³é¢‘</h2>
<p>ç”»é¢è™½ç„¶å¾ˆé‡è¦ï¼Œä½†æ˜¯éŸ³é¢‘ä¹Ÿæ¯”ä½ æƒ³çš„è¦é‡è¦ï¼ŒPS5 ä½¿ç”¨ RDNA2 çš„ CU è¿›è¡Œæ”¹é€ ï¼Œå®ç°äº†ç±»ä¼¼ PS3 SPUçš„èƒ½åŠ›ï¼ŒTempest Engine è®©ä½ ç”¨æ™®é€šç”µè§†æœºæ‰¬å£°å™¨ä¹Ÿèƒ½æœ‰ 3D éŸ³æ•ˆï¼ˆå½“ç„¶å¸¦è€³æœºæ›´å¥½ï¼‰ï¼Œå®ç°å¬å£°è¾©ä½ã€‚</p>
<p>å…¶ä»–æ›´è¯¦ç»†çš„ä»‹ç»è¯·çœ‹A9VGçš„ä¸“æ ã€‚<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></p>
<h2 id="æ‰‹æŸ„">æ‰‹æŸ„</h2>
<p>å¥½ä¸å¥½çœ‹ï¼Œè§ä»è§æ™ºï¼Œä½†æ˜¯æ‰‹æŸ„èƒŒé¢çš„å›¾æ²¡æœ‰æ”¾å‡ºæ¥ï¼Œå¸Œæœ›èƒŒé¢æœ‰æƒŠå–œ<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup>
<img src="https://live.staticflickr.com/65535/49747503557_566da5ebc8_3k.jpg" alt="img"></p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://www.playstation.com/en-us/explore/ps5/">https://www.playstation.com/en-us/explore/ps5/</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a href="https://blog.us.playstation.com/2020/03/18/unveiling-new-details-of-playstation-5-hardware-technical-specs/">https://blog.us.playstation.com/2020/03/18/unveiling-new-details-of-playstation-5-hardware-technical-specs/</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a href="https://www.a9vg.com/article/71038">https://www.a9vg.com/article/71038</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p><a href="https://blog.us.playstation.com/2020/04/07/introducing-dualsense-the-new-wireless-game-controller-for-playstation-5/">https://blog.us.playstation.com/2020/04/07/introducing-dualsense-the-new-wireless-game-controller-for-playstation-5/</a>&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content></item><item><title>æˆ‘å–œæ¬¢çš„PS4æ¸¸æˆ</title><link>https://vicfree.com/2020/02/my-favourite-ps4-games/</link><pubDate>Sat, 29 Feb 2020 23:50:47 +0800</pubDate><guid>https://vicfree.com/2020/02/my-favourite-ps4-games/</guid><description>PS4æ—¶ä»£å°±è¦ç»“æŸäº†ï¼Œä¸»æœºå¤§çº¦æ¯éš”6å¹´å·¦å³å°±ä¼šæ¢ä»£ï¼Œæ¥ä»»è€…PS5å°†åœ¨2020å¹´åº•å‘å”®ï¼Œè€Œä¸”PS5ä¼šæœ‰å‘ä¸‹å…¼å®¹ï¼Œå‘ä¸‹å…¼å®¹è¿™ä¸ªäº‹ï¼Œç´¢å°¼åœ¨PS4æ—¶</description><content type="html"><![CDATA[<p>PS4æ—¶ä»£å°±è¦ç»“æŸäº†ï¼Œä¸»æœºå¤§çº¦æ¯éš”6å¹´å·¦å³å°±ä¼šæ¢ä»£ï¼Œæ¥ä»»è€…PS5å°†åœ¨2020å¹´åº•å‘å”®ï¼Œè€Œä¸”PS5ä¼šæœ‰å‘ä¸‹å…¼å®¹ï¼Œå‘ä¸‹å…¼å®¹è¿™ä¸ªäº‹ï¼Œç´¢å°¼åœ¨PS4æ—¶ä»£å¯åšçš„çœŸçš„ä¸ç®—å¥½ã€‚PS5å‘ä¸‹å…¼å®¹ç†æƒ³æƒ…å†µæ˜¯ï¼šPS5å…¼å®¹PS1-PS4å…¨å®¶æ¡¶ï¼Œä½†è‹¥åªå…¼å®¹PS4ï¼Œè¦è¿™æ ·æˆ‘å°±è¦å”±è¡°PS5å•¦ã€‚è¯è¯´ä»Šå¤©éƒ½2æœˆåº•äº†ï¼Œæ–°Xboxéƒ½å·®å‘å¸ƒä»·æ ¼äº†ï¼Œä½ çœ‹ç´¢å°¼å˜´å¯çœŸä¸¥å®å•Šï¼Œè¿™æ˜¯æƒ³TMæä¸ªå¤§æ–°é—»å—ã€‚</p>
<p>è¯´èµ·æˆ‘çš„æ¸¸æˆç»å†ï¼Œæˆ‘åœ¨PS4ä¸­æœŸæ—¶æ‰è´­ä¹°äº†PS4ï¼Œåœ¨æ­¤ä¹‹å‰ä¸€ç›´æ˜¯æ‹¿ç¬”è®°æœ¬ç”µè„‘ç©çš„ï¼Œå¾ˆå¤šå­¦ç”Ÿéƒ½æœ‰ç±»ä¼¼çš„ç»å†å§ã€‚æˆ‘é‚£æ˜¯ä¸€å°åƒåœ¾çš„i5-480M+GT540Mï¼Œæœ‰å•¥ä¸èƒ½ç©çš„ï¼Œé™ç‰¹æ•ˆå•Šã€‚15å¸§èƒ½ç©ï¼Œ20å¸§æµç•…ï¼Œé‚£ä¸ªæ—¶å€™çœŸçš„ç©äº†ä¸å°‘çš„æ¸¸æˆã€‚</p>
<p>è¿™ä¸ªæ¸…å•æˆ‘åªæ¨èæˆ‘ç©è¿‡çš„ï¼Œæˆ‘è®¤ä¸ºå¥½ç©çš„æ‰ä¼šåˆ—å‡ºæ¥ï¼Œå…³äºä¸€ä¸ªæ¸¸æˆå¥½ä¸å¥½ç©ï¼Œæˆ‘åªèƒ½ä»¥è‡ªèº«çš„ä½“éªŒå’Œç»å†åšå‚è€ƒçš„ï¼Œå¹¶ä¸èƒ½ä»£è¡¨æ‰€æœ‰äººã€‚</p>
<p>å¥½å¼€å§‹å§</p>
<ul>
<li>Metal Gear Solid V: The Phantom Pain <a href="http://www.vgtime.com/game/201.jhtml">åˆé‡‘è£…é€¼/æ½œé¾™è°å½±</a></li>
</ul>
<blockquote>
<p>è¿™ä¸ªåˆé‡‘è£…é€¼5ï¼Œå‰ä¸€å°æ—¶å…¶å®æˆ‘æ˜¯æ‹’ç»çš„ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰åˆé‡‘è£…å¤‡1-4çš„ç»å†ï¼Œå®Œå…¨ä¸€è„¸æ‡µé€¼ï¼Œä½†ç©ä¸‹å»åå‘ç°ï¼Œè£…é€¼è£…çš„çœŸå¥½ï¼Œåšèµ·äº†åˆé‡‘äººçŠ¯ï¼Œæ¸¸æˆä¸æ³¨é‡æ‰‹é€Ÿä¸ååº”ï¼Œæ‰‹æ®‹ä¹Ÿèƒ½ç©å‡ºèŠ±æ ·ã€‚</p>
</blockquote>
<ul>
<li>Life Is Strange <a href="http://www.vgtime.com/game/187.jhtml">å¥‡å¼‚äººç”Ÿ</a></li>
</ul>
<blockquote>
<p>ä¸»è§’MAXçªç„¶è·å¾—äº†æ—¶å…‰å€’æµçš„èƒ½åŠ›ï¼Œç”¨è¿™ä¸ªèƒ½åŠ›åœ¨æ¸¸æˆä¸­è§£å†³å„ç§è°œé¢˜ã€‚æ¸¸æˆç»“å±€ä¹Ÿæ˜¯éå¸¸æ£’ï¼Œæ˜¯çš„ï¼Œæˆ‘ä¸ç®¡ç©å‡ æ¬¡æˆ‘éƒ½ä¼šé€‰è¿™ä¸ªç»“å±€ã€‚è®°å¿†ä½¿äººæˆä¸ºäººï¼Œæ²¡æœ‰è®°å¿†äººç±»å•¥éƒ½ä¸æ˜¯ã€‚
-Don&rsquo;t you forget about me&hellip;
-Never</p>
</blockquote>
<ul>
<li>Call of Duty 4: Modern Warfare <a href="http://www.vgtime.com/game/2354.jhtml">ä½¿å‘½å¬å”¤4ï¼šç°ä»£æˆ˜äº‰</a></li>
</ul>
<blockquote>
<p>è¿™ä¸ªæ¸¸æˆæœ‰<code>Remastered</code>é‡åˆ¶ç‰ˆäº†ï¼Œåœ¨ç¬¬ä¸€æ¬¡ç©åˆ°è¿™æ¸¸æˆçœŸçš„æ˜¯æƒŠäº†ï¼Œç¬¬ä¸€æ¬¡å‘ç°æ¸¸æˆçš„è¡¨ç°åŠ›è¿˜èƒ½è¿™ä¹ˆç²¾å½©ã€‚ç”»é¢ã€å‰§æƒ…å’Œç©æ³•ï¼Œå—¯ï¼ŒçœŸçš„çˆ½ã€‚</p>
</blockquote>
<ul>
<li>Call of Duty: Modern Warfare 2 <a href="http://www.vgtime.com/game/2589.jhtml">ä½¿å‘½å¬å”¤ï¼šç°ä»£æˆ˜äº‰2</a></li>
</ul>
<blockquote>
<p>ç°ä»£æˆ˜äº‰2æ˜¯ä¸Šä¸€æ¡çš„ç»­ä½œï¼Œéƒ½æ˜¯ä¸€ä¸ªå›¢é˜Ÿåšçš„ï¼Œä¸€æ ·çš„æ£’ã€‚</p>
</blockquote>
<ul>
<li>BATMAN: ARKHAM KNIGHT <a href="http://www.vgtime.com/game/27.jhtml">è™è ä¾  é˜¿å¡å§†éª‘å£«</a></li>
</ul>
<blockquote>
<p>æˆ‘ä¸ºå•¥ä¸æå¦ä¸¤éƒ¨çš„é˜¿å¡å§†å‘¢ï¼Ÿå› ä¸ºç”»é¢ï¼Œè¿™ä¸€ä»£çš„ç”»é¢å› ä¸ºè¿›å…¥äº†PS4æ—¶ä»£ï¼Œç”»é¢æå‡å·¨å¤§ï¼Œèƒ½è®©ä½ ä½“éªŒåšè™è ä¾ çš„æ„Ÿè§‰ï¼Œè€Œä¸”è™è ä¾ çš„æ¸¸æˆä¸­æ¼”å‡ºçœŸçš„å¾ˆæ£’ã€‚<strong>è°œè¯­äººï¼Œæ»šå‡ºå“¥è°­ã€‚</strong></p>
</blockquote>
<ul>
<li>The Witcher 3: Wild Hunt <a href="http://www.vgtime.com/game/361.jhtml">çŒé­”äºº3 ç‹‚çŒ</a></li>
</ul>
<blockquote>
<p>ä¹ æƒ¯æ¥è¯´ï¼Œåº”è¯¥å«å·«å¸ˆ3ï¼Œä½†æ˜¯å†™å‡ºæ¥å°±è¦ä¸¥è°¨å’Œè£…é€¼å•¦ã€‚ä½“éªŒæ°æ´›ç‰¹åœ¨çŒé­”äººçš„ä¸–ç•Œé—²é€›å†’é™©<del>æ‰“æ¡©</del>çš„æ•…äº‹ã€‚ä¹°ä¸€é€ä¸€ï¼Œè¿˜é€é™¶æ£®ç‰¹åœ°å›¾ï¼Œè ¢é©´YESã€‚</p>
</blockquote>
<ul>
<li>Titanfall 2 <a href="http://www.vgtime.com/game/3611.jhtml">æ³°å¦å¤©é™2</a></li>
</ul>
<blockquote>
<p>è¿˜æ˜¯å‡ºè‡ªCOD ç°ä»£æˆ˜äº‰1/2çš„å›¢é˜Ÿï¼Œè™½ç„¶ä»–ä»¬çš„ç»å†å¾ˆå¿å¿‘ï¼Œä½†æ˜¯æ¸¸æˆæ°´å¹³ä¸€ç›´ä¿æŒçš„å¾ˆå¥½ï¼Œè¿™ä¸ªç®€ç›´æœ‰ç‚¹å¥‡è¿¹ã€‚æƒ³åˆ°å¥½è±åç”µå½±ï¼Œç¬¬ä¸€éƒ¨éƒ½æ˜¯æ¥è¿‘æ»¡åˆ†ï¼Œç¬¬ä¸‰éƒ¨åŸºæœ¬ä¸Šå°±æ˜¯çƒ‚ç‰‡äº†ã€‚ä¸€éƒ¨æ¯”ä¸€éƒ¨å¥½çš„ï¼Œç®€ç›´å±ˆæŒ‡å¯æ•°ï¼Œ<code>Mad Max</code>ç–¯ç‹‚éº¦å…‹æ–¯å°±æ˜¯è¶Šæ‹è¶Šå¥½çš„é‚£ä¸ªã€‚</p>
</blockquote>
<ul>
<li>God of War <a href="http://www.vgtime.com/game/4310.jhtml">æˆ˜ç¥</a></li>
</ul>
<blockquote>
<p>æˆ˜ç¥3å…è´¹é€äº†ï¼Œæˆ‘éƒ½ç©ä¸ä¸‹å»ï¼Œå°±è¿™ä¸ªçœŸçš„å¥½ç©ï¼Œæ¸¸æˆè®¾è®¡å¾ˆæ£’ï¼Œæ‰‹æ®‹ä¹Ÿèƒ½æ‰“çš„ä¸‹å»ï¼Œä¸åŠé€€ã€‚ç¼ºç‚¹å°±æ˜¯å‰§æƒ…å¤ªçŸ­ï¼Œå¼€ä¸ªå¤´ã€‚</p>
</blockquote>
<ul>
<li>What Remains of Edith Finch <a href="http://www.vgtime.com/game/546.jhtml">ä¼Šè¿ªä¸èŠ¬å¥‡çš„è®°å¿†</a></li>
</ul>
<blockquote>
<p>è¿™ä¸ªæ¸¸æˆçœŸçš„æ˜¯è‰ºæœ¯ï¼Œç®€ç›´å¤ªç¾å¤ªæ£’äº†ã€‚</p>
</blockquote>
<ul>
<li>Red Dead Redemption 2 <a href="http://www.vgtime.com/game/4446.jhtml">è’é‡å¤§é•–å®¢ æ•‘èµ2</a></li>
</ul>
<blockquote>
<p>è¯´åˆ°è¿™ä¸ªæ¸¸æˆï¼Œç©æ³•çœŸçš„å¤ªè¿½æ±‚çœŸå®ï¼Œæœ‰ç‚¹ç´¯ã€‚ä½†æ˜¯å®ƒè¥é€ äº†ä¸€ä¸ªéå¸¸çœŸå®çš„ä¸–ç•Œï¼Œä½ å¯ä»¥å…¨èº«å¿ƒå»ä½“éªŒè¿™ä¸ªä¸–ç•Œã€‚Ræ˜Ÿç‰©ç†åšçš„çœŸçš„æ˜¯ç¬¬ä¸€ï¼Œæ²¡è¯è¯´ã€‚</p>
</blockquote>
<ul>
<li><del>èµ›åšæœ‹å…‹2077 <a href="http://www.vgtime.com/game/73.jhtml">Cyberpunk 2077</a></del></li>
</ul>
<blockquote>
<p><del>è™½ç„¶è¿˜æ²¡å‘å”®ï¼Œä½†æ˜¯æˆ‘çŸ¥é“æˆ‘ä¼šå¾ˆå–œæ¬¢å®ƒçš„ã€‚</del></p>
</blockquote>
<p>è§è¯†æµ…è–„ï¼Œåªèƒ½å†™è¿™ä¹ˆå¤šäº†ã€‚</p>
]]></content></item><item><title>ç¬¬ä¸€ç¯‡æµ‹è¯•æ–‡ç« </title><link>https://vicfree.com/2020/02/my-first-post/</link><pubDate>Tue, 25 Feb 2020 19:26:13 +0800</pubDate><guid>https://vicfree.com/2020/02/my-first-post/</guid><description>Hello World! You MotherFucker! å›½é™…æƒ¯ä¾‹çš„æ ‡å‡†hello worldå¼€å§‹ã€‚</description><content type="html"><![CDATA[<p>Hello World!</p>
<p>You MotherFucker!</p>
<p>å›½é™…æƒ¯ä¾‹çš„æ ‡å‡†hello worldå¼€å§‹ã€‚</p>
]]></content></item></channel></rss>