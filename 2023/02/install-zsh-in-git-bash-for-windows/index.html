<!doctype html><html lang=zh-hans><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-33RTKT44MP"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-33RTKT44MP",{anonymize_ip:!1})}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="Windows 安装 Zsh in Git Bash"><meta itemprop=description content="参考： https://dominikrys.com/posts/zsh-in-git-bash-on-windows/ http://i.lckiss.com/?p=6268 https://zhuanlan.zhihu.com/p/455925403 为啥要用 Zsh 最近搞网络和这个博客，Windows 的终端越来越不顺手，常用工具还是 Linux 强，刚开始用 Scoop 安装了 Git Bash，自带了很多工具，"><meta itemprop=datePublished content="2023-02-20T22:17:36+08:00"><meta itemprop=dateModified content="2023-02-20T22:17:36+08:00"><meta itemprop=wordCount content="3835"><meta itemprop=keywords content="Github,zsh,"><meta property="og:title" content="Windows 安装 Zsh in Git Bash"><meta property="og:description" content="参考： https://dominikrys.com/posts/zsh-in-git-bash-on-windows/ http://i.lckiss.com/?p=6268 https://zhuanlan.zhihu.com/p/455925403 为啥要用 Zsh 最近搞网络和这个博客，Windows 的终端越来越不顺手，常用工具还是 Linux 强，刚开始用 Scoop 安装了 Git Bash，自带了很多工具，"><meta property="og:type" content="article"><meta property="og:url" content="https://vicfree.com/2023/02/install-zsh-in-git-bash-for-windows/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-20T22:17:36+08:00"><meta property="article:modified_time" content="2023-02-20T22:17:36+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Windows 安装 Zsh in Git Bash"><meta name=twitter:description content="参考： https://dominikrys.com/posts/zsh-in-git-bash-on-windows/ http://i.lckiss.com/?p=6268 https://zhuanlan.zhihu.com/p/455925403 为啥要用 Zsh 最近搞网络和这个博客，Windows 的终端越来越不顺手，常用工具还是 Linux 强，刚开始用 Scoop 安装了 Git Bash，自带了很多工具，"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Windows 安装 Zsh in Git Bash</title><link rel=stylesheet href=https://vicfree.com/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://vicfree.com>Victor</a></div><nav class="site-nav hide-in-mobile"><a href=https://vicfree.com/posts/>Blog</a>
<a href=https://vicfree.com/tags/>Tags</a>
<a href=https://vicfree.com/about/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/realDonaldTrump target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://t.me/JhKgAA6Hx1 target=_blank rel="noopener me" title=Telegram><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.198 2.433a2.242 2.242.0 00-1.022.215l-8.609 3.33c-2.068.8-4.133 1.598-5.724 2.21a405.15 405.15.0 01-2.849 1.09c-.42.147-.99.332-1.473.901-.728.968.193 1.798.919 2.286 1.61.516 3.275 1.009 4.654 1.472.509 1.793.997 3.592 1.48 5.388.16.36.506.494.864.498l-.002.018s.281.028.555-.038a2.1 2.1.0 00.933-.517c.345-.324 1.28-1.244 1.811-1.764l3.999 2.952.032.018s.442.311 1.09.355c.324.022.75-.04 1.116-.308.37-.27.613-.702.728-1.196.342-1.492 2.61-12.285 2.997-14.072l-.01.042c.27-1.006.17-1.928-.455-2.474a1.654 1.654.0 00-1.034-.407z"/></svg></a><a href=http://www.vicfree.com/qqgroup target=_blank rel="noopener me" title=Qq><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path transform="scale(0.04) translate(75 40)" stroke-width="50" d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741.0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792.0.0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a><a href=https://github.com/openwrt/openwrt target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://vicfree.com/posts/>Blog</a></li><li><a href=https://vicfree.com/tags/>Tags</a></li><li><a href=https://vicfree.com/about/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Feb 20, 2023</span></div><h1>Windows 安装 Zsh in Git Bash</h1></header><div class=content><p>参考：</p><p><a href=https://dominikrys.com/posts/zsh-in-git-bash-on-windows/>https://dominikrys.com/posts/zsh-in-git-bash-on-windows/</a></p><p><a href="http://i.lckiss.com/?p=6268">http://i.lckiss.com/?p=6268</a></p><p><a href=https://zhuanlan.zhihu.com/p/455925403>https://zhuanlan.zhihu.com/p/455925403</a></p><h2 id=为啥要用-zsh>为啥要用 <code>Zsh</code><a href=#为啥要用-zsh class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>最近搞网络和这个博客，Windows 的终端越来越不顺手，常用工具还是 Linux 强，刚开始用 <a href=https://scoop.sh/>Scoop</a> 安装了 <a href=https://gitforwindows.org/>Git Bash</a>，自带了很多工具，真的不够也可以用 Scoop 安装。</p><p>但是最近玩 <a href=https://www.kali.org/>Kali Linux</a> 才发现它自带 <a href=https://zsh.sourceforge.io/>Zsh</a> 超级顺手，最心动的当然是<a href=https://github.com/zsh-users/zsh-autosuggestions>历史命令自动补全/zsh-autosuggestions</a>，上网一查发现支持这个功能的 Shell 屈指可数，就三个：Zsh, Fish, PowerShell 安装 PSReadLine 模块。</p><p>PowerShell 自带的那些命令，真的是难记，也用 Scoop 安装过 <a href=https://ohmyposh.dev/>Oh My Posh</a>, 算了，放弃。</p><p>然后发现网上 Windows 安装 Zsh, 要么是 WSL, 要么是 <a href=https://www.msys2.org/>MSYS2</a>, WSL 访问本地文件还是有点繁琐<code>cd /mnt/c/Users/</code>, MSYS2 需要安装 Zsh 插件 <code>pacman -S zsh git vim</code>, 最后一个办法就是本文想介绍的。</p><p><img src=/images/Zsh.png alt=img title="Zsh Shell"></p><h2 id=安装-git-bash-和-zsh>安装 Git Bash 和 Zsh<a href=#安装-git-bash-和-zsh class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><ol><li><p>下载 <code>Git For Windows</code>, 从下面选择适合你的:</p><ul><li><a href=https://scoop.sh/>Scoop</a> <code>scoop install git</code></li><li><a href=https://git-scm.com/>Git官网</a>下载 <a href=https://git-scm.com/download/win>https://git-scm.com/download/win</a>, 下载点击安装，安装过程一切默认。</li><li><a href=https://www.microsoft.com/store/productId/9NBLGGH4NNS1>Windows10/11 商店</a>自带 <a href=https://aka.ms/getwinget>winget</a>, <code>winget install -e --id Git.Git</code></li></ul></li><li><p>下载 <code>Zsh</code> 插件</p><ul><li>打开 <a href="https://packages.msys2.org/package/zsh?repo=msys&variant=x86_64">https://packages.msys2.org/package/zsh?repo=msys&variant=x86_64</a></li><li>点击下载 File: <a href=https://mirror.msys2.org/msys/x86_64/zsh-5.9-2-x86_64.pkg.tar.zst>https://mirror.msys2.org/msys/x86_64/zsh-5.9-2-x86_64.pkg.tar.zst</a></li></ul><blockquote><p>Git Bash(Git For Windows) 是基于 MSYS2 MINGW64 环境的，所以我们只要手动下载 MSYS2 的 Zsh 插件手动解压到 Git 目录即可。</p></blockquote></li><li><p>将 <code>*.tar.zst</code> 解压缩成 <code>*.tar</code>, 这样可以用任意压缩软件打开 <code>*.tar</code>. 有下面两个办法：</p><ul><li>下载 Windows 解压工具 <a href=https://peazip.github.io/>PeaZip</a> 或者 <a href=https://github.com/mcmilk/7-Zip-zstd/releases>7-Zip 插件</a></li><li>WSL 安装 ztsd 解压，<code>sudo apt update && sudo apt install zstd -y</code> 然后 <code>unzstd filename.tar.zst</code></li></ul></li><li><p>将压缩包所有文件 (主要是 <code>etc</code> <code>usr</code>) 解压到你的 Git 安装目录，注意是合并文件夹，不会提示覆盖文件。</p><ul><li><code>%USERPROFILE%\scoop\apps\git\current\</code></li><li><code>C:\Program Files\Git\</code></li></ul></li><li><p>打开 Git Bash 运行 <code>Zsh</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>zsh
</span></span></code></pre></div></li><li><p><strong>重要</strong> 如果你不小心跳过了 <code>Zsh</code> 配置页面，你可以使用下面命令重新配置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>autoload -U zsh-newuser-install
</span></span><span class=line><span class=cl>zsh-newuser-install -f
</span></span></code></pre></div><ul><li>按 <code>1</code> &ldquo;Continue to the main menu.&rdquo; 进入配置页面</li><li>按 <code>1</code> 配置命令历史，按 <code>1-3</code> 来修改命令历史大小和位置，按 <code>0</code> 返回。</li><li>按 <code>2</code> 配置补全，按 <code>1</code> 选择 &ldquo;Use the new completion system&rdquo;, 有提示等待确认就按<code>回车</code>，按 <code>0</code> 返回，再次提示是否保存按 <code>y</code></li><li>按 <code>0</code> 保存，完成</li></ul></li><li><p><code>Zsh</code> 设置为默认的 Shell, 有两种办法:</p><ol><li><strong>推荐</strong>，在 <code>%USERPROFILE%\scoop\apps\git\current\usr\bin\bash.exe -i -l -c zsh</code>, 末尾加入 <code>-i -l -c zsh</code>.</li><li>不推荐，新建 <code>.profile</code> 到<strong>用户文件夹</strong> <code>%USERPROFILE%</code>, 使用文本编辑器 <code>nano ~/.profile</code> 粘贴下面的内容，<code>Crtl+S</code> 保存。<blockquote><p>也可添加到以下文件 <code>.profile</code> > <code>.bash_profile</code> > <code>.bashrc</code>, 优先级越高，兼容越好，还能手动切换到 bash.</p></blockquote></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -x /usr/bin/zsh.exe<span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl><span class=nb>exec</span> zsh
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div></li></ol><h2 id=安装zsh插件>安装Zsh插件<a href=#安装zsh插件 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><ol><li><p>先 clone 所有库，到你电脑本地磁盘上，如<strong>用户文件夹</strong> <code>%USERPROFILE%</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/zsh-users/zsh-completions
</span></span><span class=line><span class=cl>git clone https://github.com/zsh-users/zsh-syntax-highlighting
</span></span><span class=line><span class=cl>git clone https://github.com/zsh-users/zsh-autosuggestions
</span></span></code></pre></div></li><li><p>使用你顺手的编辑器打开 <code>.zshrc</code>, 添加下面这些东西，到第一行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> ~/zsh-autosuggestions/zsh-autosuggestions.zsh
</span></span><span class=line><span class=cl><span class=nb>source</span> ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</span></span><span class=line><span class=cl><span class=nb>source</span> ~/zsh-completions/zsh-completions.plugin.zsh
</span></span></code></pre></div></li><li><p>如果你修改了 <code>Git Clone</code> 目录，请自己修改上面的路径，比如 <code>/c/Users/xxxx/xxxx</code></p></li></ol><h2 id=自定义zshrc并添加-git-branch>自定义<code>.zshrc</code>，并添加 Git Branch.<a href=#自定义zshrc并添加-git-branch class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><ol><li><p>修改PROMPT，里面详细含义请看这里<a href=https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html>https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>PROMPT</span><span class=o>=</span><span class=s1>$&#39;\n%F{%(#.blue.green)}┌──(%B%F{%(#.red.blue)}%*&#39;$&#39;%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/…/%4~.%5~)%b%F{%(#.blue.green)}]\n└─%B%(#.%F{red}#.%F{blue}$)%b%F{reset} &#39;</span>
</span></span></code></pre></div></li><li><p>修改Title，为文件路径，某些老的终端软件不支持\e，所以要替换，\033=\e, \007=\a, \012=\n, \015=\r.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>case</span> <span class=nv>$TERM</span> in xterm*<span class=o>)</span>
</span></span><span class=line><span class=cl>    precmd <span class=o>()</span> <span class=o>{</span>print -Pn <span class=s2>&#34;\e]0;%~\a&#34;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=p>;;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span>
</span></span></code></pre></div></li><li><p>添加 Git Branch 信息-方法1，使用 Git 命令</p><blockquote><p><del>和<strong>Windows Terminal</strong>一起使用时，Zsh输入框为空时<a href=https://github.com/msys2/MSYS2-packages/issues/2820>改变窗口大小会导致卡死</a>。</del></p></blockquote><blockquote><p>重新修改了代码，使用<a href=https://code.mendhak.com/simple-bash-prompt-for-developers-ps1-git/>这位兄弟的代码</a>,我增加了<code>if [ -d ./.git ]; then</code>，再让 <em>New Bing</em> 帮我合并两个function为一个。bash 和 zsh 通用。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>function</span> parse_git_branch <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> -d ./.git <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>branch</span><span class=o>=</span><span class=k>$(</span>git branch --no-color 2&gt; /dev/null <span class=p>|</span> sed -e <span class=s1>&#39;/^[^*]/d&#39;</span> -e <span class=s2>&#34;s/* \(.*\)/\1/&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>dirty</span><span class=o>=</span><span class=k>$(</span>git status --porcelain 2&gt; /dev/null <span class=p>|</span> wc -l<span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[</span> <span class=nv>$dirty</span> -gt <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34; on </span><span class=nv>$branch</span><span class=s2>*&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34; on </span><span class=nv>$branch</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>setopt prompt_subst
</span></span><span class=line><span class=cl><span class=nv>RPROMPT</span><span class=o>=</span>%F<span class=o>{</span>yellow<span class=o>}</span><span class=se>\$</span><span class=o>(</span>parse_git_branch<span class=o>)</span>%f
</span></span></code></pre></div></li><li><p>添加 Git Branch 信息-方法2，使用 <code>Zsh</code> 自带的 <code>vcs_info</code> 模块。同时包含了 1-3 的修改。</p><blockquote><p>因为引用 <code>vcs_info</code> 会导致响应速度下降，推荐使用方法1.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>autoload -Uz vcs_info
</span></span><span class=line><span class=cl><span class=k>case</span> <span class=nv>$TERM</span> in xterm*<span class=o>)</span>
</span></span><span class=line><span class=cl>    precmd <span class=o>()</span> <span class=o>{</span>vcs_info <span class=o>&amp;&amp;</span> print -Pn <span class=s2>&#34;\e]0;%~\a&#34;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=p>;;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:vcs_info:git:*&#39;</span> formats <span class=s1>&#39;on %b&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>setopt prompt_subst
</span></span><span class=line><span class=cl><span class=nv>PROMPT</span><span class=o>=</span><span class=s1>$&#39;\n%F{%(#.blue.green)}┌──(%B%F{%(#.red.blue)}%*&#39;$&#39;%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/…/%4~.%5~)%b%F{%(#.blue.green)}]\n└─%B%(#.%F{red}#.%F{blue}$)%b%F{reset} &#39;</span>
</span></span><span class=line><span class=cl><span class=nv>RPROMPT</span><span class=o>=</span>%F<span class=o>{</span>yellow<span class=o>}</span><span class=se>\$</span>vcs_info_msg_0_%f
</span></span></code></pre></div></li><li><p>强制关闭 <code>Zsh</code>时, 导致生成了 <code>.zsh-histfile.lock</code> 会使得 <code>Zsh</code> 打开卡住，添加下面这个解决。</p><pre tabindex=0><code>setopt HIST_FCNTL_LOCK
</code></pre></li></ol><h2 id=添加-zsh-至-windows-terminal>添加 Zsh 至 Windows Terminal<a href=#添加-zsh-至-windows-terminal class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><blockquote><p>设置 -> 新增空配置 -> 填入命令行<code>bash.exe -i -l -c zsh</code>，其他可填可不填，看你心情。</p></blockquote><blockquote><p>-i = &ndash;interactive, -l = &ndash;login, -c = execute command</p></blockquote><pre tabindex=0><code>{
    &#34;closeOnExit&#34;: &#34;always&#34;,
    &#34;commandline&#34;: &#34;%USERPROFILE%\\scoop\\apps\\git\\current\\usr\\bin\\bash.exe -i -l -c zsh&#34;,
    &#34;guid&#34;: &#34;{9e15491f-01ea-44bf-878c-c90f7749c9a8}&#34;,
    &#34;hidden&#34;: false,
    &#34;icon&#34;: &#34;%USERPROFILE%\\scoop\\apps\\git\\current\\usr\\share\\git\\git-for-windows.ico&#34;,
    &#34;name&#34;: &#34;Git Bash&#34;,
    &#34;startingDirectory&#34;: &#34;%USERPROFILE%&#34;
},
</code></pre><blockquote><p>其实上面可以填 <code>zsh.exe -i -l</code>, 但是在初始化 <code>/etc/profile</code> 和 <code>/mingw64/share/git/completion/git-completion.bash</code>，脚本呢有句话 <code>ERROR: this script is obsolete, please see git-completion.zsh</code></p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -n <span class=si>${</span><span class=nv>ZSH_VERSION</span><span class=p>-</span><span class=si>}</span> <span class=o>&amp;&amp;</span> -z <span class=si>${</span><span class=nv>GIT_SOURCING_ZSH_COMPLETION</span><span class=p>-</span><span class=si>}</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>	<span class=nb>echo</span> <span class=s2>&#34;ERROR: this script is obsolete, please see git-completion.zsh&#34;</span> 1&gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h2 id=美化zsh>美化Zsh<a href=#美化zsh class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><ul><li><p>安装 oh-my-zsh，可以美化Zsh，且包含了上面很多功能，但是因为功能多，导致速度不是很快。我是重实用，不中美观的。</p></li><li><p>但是你想安装就使用这个命令安装：</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sh -c <span class=s2>&#34;</span><span class=k>$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class=k>)</span><span class=s2>&#34;</span>
</span></span></code></pre></div><h2 id=高大全zshrc模板>高大全.zshrc模板<a href=#高大全zshrc模板 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><blockquote><p>复制在右下角</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># History configurations</span>
</span></span><span class=line><span class=cl><span class=c1># https://manpages.debian.org/bullseye/zsh-common/zshparam.1.en.html</span>
</span></span><span class=line><span class=cl><span class=nv>HISTFILE</span><span class=o>=</span>~/.zsh-history
</span></span><span class=line><span class=cl><span class=nv>HISTSIZE</span><span class=o>=</span><span class=m>1000</span>
</span></span><span class=line><span class=cl><span class=nv>SAVEHIST</span><span class=o>=</span><span class=m>2000</span>
</span></span><span class=line><span class=cl><span class=nv>HISTORY_IGNORE</span><span class=o>=</span><span class=s1>&#39;(history*|h|ls|ll|la|l|cd|pwd|exit|cd ..)&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># configure key keybindings</span>
</span></span><span class=line><span class=cl><span class=c1># https://manpages.debian.org/bullseye/zsh-common/zshzle.1.en.html</span>
</span></span><span class=line><span class=cl>bindkey -e                                        <span class=c1># emacs key bindings</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39; &#39;</span> magic-space                           <span class=c1># do history expansion on space</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^U&#39;</span> backward-kill-line                   <span class=c1># ctrl + U</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[3;5~&#39;</span> kill-word                       <span class=c1># ctrl + Supr</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[3~&#39;</span> delete-char                       <span class=c1># delete</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[1;5C&#39;</span> forward-word                    <span class=c1># ctrl + -&gt;</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[1;5D&#39;</span> backward-word                   <span class=c1># ctrl + &lt;-</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[5~&#39;</span> beginning-of-buffer-or-history    <span class=c1># page up</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[6~&#39;</span> end-of-buffer-or-history          <span class=c1># page down</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[H&#39;</span> beginning-of-line                  <span class=c1># home</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[F&#39;</span> end-of-line                        <span class=c1># end</span>
</span></span><span class=line><span class=cl>bindkey <span class=s1>&#39;^[[Z&#39;</span> undo                               <span class=c1># shift + tab undo last action</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># zsh options, case insensitive and underscores are ignored</span>
</span></span><span class=line><span class=cl><span class=c1># https://zsh.sourceforge.io/Doc/Release/Options.html</span>
</span></span><span class=line><span class=cl><span class=c1>#setopt APPEND_HISTORY      # append their history list to the history file, rather than replace it.</span>
</span></span><span class=line><span class=cl>setopt INC_APPEND_HISTORY   <span class=c1># history lines are added to the $HISTFILE incrementally</span>
</span></span><span class=line><span class=cl>setopt HIST_FCNTL_LOCK      <span class=c1># add zsh history file lock avoid corruption</span>
</span></span><span class=line><span class=cl>setopt HIST_IGNORE_ALL_DUPS <span class=c1># history list duplicates an older one, the older command is removed from the list</span>
</span></span><span class=line><span class=cl><span class=c1># setopt hist_ignore_dups   # ignore duplicated commands history list</span>
</span></span><span class=line><span class=cl>setopt HIST_IGNORE_SPACE    <span class=c1># ignore commands that start with space</span>
</span></span><span class=line><span class=cl>setopt HIST_VERIFY          <span class=c1># show command with history expansion to user before running it</span>
</span></span><span class=line><span class=cl>setopt AUTO_CD              <span class=c1># change directory just by typing its name</span>
</span></span><span class=line><span class=cl>setopt INTERACTIVE_COMMENTS <span class=c1># allow comments in interactive mode</span>
</span></span><span class=line><span class=cl>setopt NUMERIC_GLOB_SORT    <span class=c1># sort filenames numerically when it makes sense</span>
</span></span><span class=line><span class=cl>setopt PROMPT_SUBST         <span class=c1># prompt extend function, for git branch display</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># xterm set the title</span>
</span></span><span class=line><span class=cl><span class=c1># \033=\e, \007=\a, \012=\n, \015=\r, https://manpages.debian.org/bullseye/manpages/ascii.7.en.html</span>
</span></span><span class=line><span class=cl><span class=c1># https://manpages.debian.org/bullseye/xterm/xterm.1.en.html</span>
</span></span><span class=line><span class=cl><span class=c1># https://web.archive.org/web/20221206072000/https://tldp.org/HOWTO/Xterm-Title-4.html</span>
</span></span><span class=line><span class=cl><span class=k>case</span> <span class=nv>$TERM</span> in xterm*<span class=o>)</span>
</span></span><span class=line><span class=cl>    precmd <span class=o>()</span> <span class=o>{</span>print -Pn <span class=s2>&#34;\e]0;%~\a&#34;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=p>;;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Shows Git branch name in prompt.</span>
</span></span><span class=line><span class=cl><span class=c1># https://code.mendhak.com/simple-bash-prompt-for-developers-ps1-git/</span>
</span></span><span class=line><span class=cl><span class=k>function</span> parse_git_branch <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> -d ./.git <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>branch</span><span class=o>=</span><span class=k>$(</span>git branch --no-color 2&gt; /dev/null <span class=p>|</span> sed -e <span class=s1>&#39;/^[^*]/d&#39;</span> -e <span class=s2>&#34;s/* \(.*\)/\1/&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>dirty</span><span class=o>=</span><span class=k>$(</span>git status --porcelain 2&gt; /dev/null <span class=p>|</span> wc -l<span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[</span> <span class=nv>$dirty</span> -gt <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34; on </span><span class=nv>$branch</span><span class=s2>*&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34; on </span><span class=nv>$branch</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html</span>
</span></span><span class=line><span class=cl><span class=nv>RPROMPT</span><span class=o>=</span>%F<span class=o>{</span>yellow<span class=o>}</span><span class=se>\$</span><span class=o>(</span>parse_git_branch<span class=o>)</span>%f
</span></span><span class=line><span class=cl><span class=nv>PROMPT</span><span class=o>=</span><span class=s1>$&#39;\n%F{%(#.blue.green)}┌──(%B%F{%(#.red.blue)}%*&#39;$&#39;%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/…/%4~.%5~)%b%F{%(#.blue.green)}]\n└─%B%(#.%F{red}#.%F{blue}$)%b%F{reset} &#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable color support of ls, less and man, and also add handy aliases</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -x /usr/bin/dircolors <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>test</span> -r ~/.dircolors <span class=o>&amp;&amp;</span> <span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>dircolors -b ~/.dircolors<span class=k>)</span><span class=s2>&#34;</span> <span class=o>||</span> <span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>dircolors -b<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LS_COLORS</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$LS_COLORS</span><span class=s2>:ow=30;44:&#34;</span> <span class=c1># fix ls color for folders with 777 permissions</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>ls</span><span class=o>=</span><span class=s1>&#39;ls --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1>#alias dir=&#39;dir --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1>#alias vdir=&#39;vdir --color=auto&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>grep</span><span class=o>=</span><span class=s1>&#39;grep --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>fgrep</span><span class=o>=</span><span class=s1>&#39;fgrep --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>egrep</span><span class=o>=</span><span class=s1>&#39;egrep --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>diff</span><span class=o>=</span><span class=s1>&#39;diff --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>ip</span><span class=o>=</span><span class=s1>&#39;ip --color=auto&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_mb</span><span class=o>=</span><span class=s1>$&#39;\E[1;31m&#39;</span>     <span class=c1># begin blink</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_md</span><span class=o>=</span><span class=s1>$&#39;\E[1;36m&#39;</span>     <span class=c1># begin bold</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_me</span><span class=o>=</span><span class=s1>$&#39;\E[0m&#39;</span>        <span class=c1># reset bold/blink</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_so</span><span class=o>=</span><span class=s1>$&#39;\E[01;33m&#39;</span>    <span class=c1># begin reverse video</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_se</span><span class=o>=</span><span class=s1>$&#39;\E[0m&#39;</span>        <span class=c1># reset reverse video</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_us</span><span class=o>=</span><span class=s1>$&#39;\E[1;32m&#39;</span>     <span class=c1># begin underline</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_ue</span><span class=o>=</span><span class=s1>$&#39;\E[0m&#39;</span>        <span class=c1># reset underline</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Take advantage of $LS_COLORS for completion as well</span>
</span></span><span class=line><span class=cl>    zstyle <span class=s1>&#39;:completion:*&#39;</span> list-colors <span class=s2>&#34;</span><span class=si>${</span><span class=p>(s.:.)LS_COLORS</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    zstyle <span class=s1>&#39;:completion:*:*:kill:*:processes&#39;</span> list-colors <span class=s1>&#39;=(#b) #([0-9]#)*=0=01;31&#39;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># some useful aliases</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>ll</span><span class=o>=</span><span class=s1>&#39;ls -laFh&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>la</span><span class=o>=</span><span class=s1>&#39;ls -A&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>l</span><span class=o>=</span><span class=s1>&#39;ls -AF1&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>pwd</span><span class=o>=</span><span class=s1>&#39;pwd -W&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># be paranoid</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>cp</span><span class=o>=</span><span class=s1>&#39;cp -i&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>mv</span><span class=o>=</span><span class=s1>&#39;mv -i&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>rm</span><span class=o>=</span><span class=s1>&#39;rm -i&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> extract <span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=o>[</span> -f <span class=nv>$1</span> <span class=o>]</span> <span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>       <span class=k>case</span> <span class=nv>$1</span> in
</span></span><span class=line><span class=cl>           *.tar.bz2<span class=o>)</span>   tar xvjf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tar.gz<span class=o>)</span>    tar xvzf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.bz2<span class=o>)</span>       bunzip2 <span class=nv>$1</span>     <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.rar<span class=o>)</span>       unrar x <span class=nv>$1</span>     <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.gz<span class=o>)</span>        gunzip <span class=nv>$1</span>      <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tar<span class=o>)</span>       tar xvf <span class=nv>$1</span>     <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tbz2<span class=o>)</span>      tar xvjf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tgz<span class=o>)</span>       tar xvzf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.zip<span class=o>)</span>       unzip <span class=nv>$1</span>       <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.Z<span class=o>)</span>         uncompress <span class=nv>$1</span>  <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.7z<span class=o>)</span>        7z x <span class=nv>$1</span>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *<span class=o>)</span>           <span class=nb>echo</span> <span class=s2>&#34;don&#39;t know how to extract &#39;</span><span class=nv>$1</span><span class=s2>&#39;...&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>       <span class=k>esac</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span>
</span></span><span class=line><span class=cl>       <span class=nb>echo</span> <span class=s2>&#34;&#39;</span><span class=nv>$1</span><span class=s2>&#39; is not a valid file!&#34;</span>
</span></span><span class=line><span class=cl>   <span class=k>fi</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable syntax-highlighting</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -f ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    . ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</span></span><span class=line><span class=cl>    <span class=nv>ZSH_HIGHLIGHT_HIGHLIGHTERS</span><span class=o>=(</span>main brackets pattern<span class=o>)</span>
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>default<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>unknown-token<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>white,underline
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>reserved-word<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>cyan,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>suffix-alias<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green,underline
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>global-alias<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>precommand<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green,underline
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>commandseparator<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>blue,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>autodirectory<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green,underline
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>path<span class=o>]=</span>bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>path_pathseparator<span class=o>]=</span>
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>path_prefix_pathseparator<span class=o>]=</span>
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>globbing<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>blue,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>history-expansion<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>blue,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>command-substitution<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>command-substitution-delimiter<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>process-substitution<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>process-substitution-delimiter<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>single-hyphen-option<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>double-hyphen-option<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>back-quoted-argument<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>back-quoted-argument-delimiter<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>blue,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>single-quoted-argument<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>yellow
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>double-quoted-argument<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>yellow
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>dollar-quoted-argument<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>yellow
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>rc-quote<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>dollar-double-quoted-argument<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>back-double-quoted-argument<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>back-dollar-quoted-argument<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>assign<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>redirection<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>blue,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>comment<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>black,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>named-fd<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>numeric-fd<span class=o>]=</span>none
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>arg0<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>cyan
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>bracket-error<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>red,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>bracket-level-1<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>blue,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>bracket-level-2<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>green,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>bracket-level-3<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>magenta,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>bracket-level-4<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>yellow,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>bracket-level-5<span class=o>]=</span><span class=nv>fg</span><span class=o>=</span>cyan,bold
</span></span><span class=line><span class=cl>    ZSH_HIGHLIGHT_STYLES<span class=o>[</span>cursor-matchingbracket<span class=o>]=</span>standout
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable auto-suggestions based on the history</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -f ~/zsh-autosuggestions/zsh-autosuggestions.zsh <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    . ~/zsh-autosuggestions/zsh-autosuggestions.zsh
</span></span><span class=line><span class=cl>    <span class=c1># change suggestion color</span>
</span></span><span class=line><span class=cl>    <span class=nv>ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE</span><span class=o>=</span><span class=s1>&#39;fg=#9e9e9e&#39;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># enable extend completion</span>
</span></span><span class=line><span class=cl><span class=nv>fpath</span><span class=o>=(</span>~/zsh-completions/src <span class=nv>$fpath</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># old way add funtion</span>
</span></span><span class=line><span class=cl><span class=c1>#source ~/zsh-autosuggestions/zsh-autosuggestions.zsh</span>
</span></span><span class=line><span class=cl><span class=c1>#source ~/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</span>
</span></span><span class=line><span class=cl><span class=c1>#source ~/zsh-completions/zsh-completions.plugin.zsh</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># compinit https://manpages.debian.org/bullseye/zsh-common/zshcompsys.1.en.html</span>
</span></span><span class=line><span class=cl><span class=c1># zstyle https://manpages.debian.org/bullseye/zsh-common/zshmodules.1.en.html</span>
</span></span><span class=line><span class=cl>zstyle :compinstall filename <span class=s1>&#39;~/.zshrc&#39;</span>
</span></span><span class=line><span class=cl>autoload -Uz compinit
</span></span><span class=line><span class=cl>compinit -d ~/.zcompdump
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*:*:*:*:*&#39;</span> menu <span class=k>select</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> auto-description <span class=s1>&#39;specify: %d&#39;</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> completer _expand _complete
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> format <span class=s1>&#39;Completing %d&#39;</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> group-name <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> list-colors <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> list-prompt %SAt %p: Hit TAB <span class=k>for</span> more, or the character to insert%s
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> matcher-list <span class=s1>&#39;m:{a-zA-Z}={A-Za-z}&#39;</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> rehash <span class=nb>true</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> <span class=k>select</span>-prompt %SScrolling active: current selection at %p%s
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> use-compctl <span class=nb>false</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*&#39;</span> verbose <span class=nb>true</span>
</span></span><span class=line><span class=cl>zstyle <span class=s1>&#39;:completion:*:kill:*&#39;</span> <span class=nb>command</span> <span class=s1>&#39;ps -u $USER -o pid,%cpu,tty,cputime,cmd&#39;</span>
</span></span></code></pre></div><blockquote><p>顺便放出我的 <code>.bashrc</code></p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># export LANG=C.UTF-8</span>
</span></span><span class=line><span class=cl><span class=c1># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span>
</span></span><span class=line><span class=cl><span class=c1># https://manpages.debian.org/bullseye/bash/bash.1.en.html</span>
</span></span><span class=line><span class=cl><span class=nv>HISTFILE</span><span class=o>=</span>~/.bash-history
</span></span><span class=line><span class=cl><span class=nv>HISTSIZE</span><span class=o>=</span><span class=m>1000</span>
</span></span><span class=line><span class=cl><span class=nv>HISTFILESIZE</span><span class=o>=</span><span class=m>2000</span>
</span></span><span class=line><span class=cl><span class=nv>HISTCONTROL</span><span class=o>=</span>ignorespace:erasedups
</span></span><span class=line><span class=cl><span class=nv>HISTIGNORE</span><span class=o>=</span><span class=s2>&#34;history*:h:exit:ls:ll:la:l💿pwd:cd ..&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html</span>
</span></span><span class=line><span class=cl><span class=c1># https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html</span>
</span></span><span class=line><span class=cl><span class=c1># append to the history file, don&#39;t overwrite it</span>
</span></span><span class=line><span class=cl><span class=nb>shopt</span> -s histappend
</span></span><span class=line><span class=cl><span class=c1># check the window size after each command and, if necessary,</span>
</span></span><span class=line><span class=cl><span class=c1># update the values of LINES and COLUMNS.</span>
</span></span><span class=line><span class=cl><span class=nb>shopt</span> -s checkwinsize
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># https://unix.stackexchange.com/a/18443</span>
</span></span><span class=line><span class=cl><span class=k>function</span> historymerge <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>history</span> -n<span class=p>;</span> <span class=nb>history</span> -w<span class=p>;</span> <span class=nb>history</span> -c<span class=p>;</span> <span class=nb>history</span> -r<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> historymerge EXIT
</span></span><span class=line><span class=cl><span class=nv>PROMPT_COMMAND</span><span class=o>=</span><span class=s2>&#34;history -a; </span><span class=nv>$PROMPT_COMMAND</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Shows Git branch name in prompt.</span>
</span></span><span class=line><span class=cl><span class=c1># https://code.mendhak.com/simple-bash-prompt-for-developers-ps1-git/</span>
</span></span><span class=line><span class=cl><span class=c1>#function parse_git_dirty {</span>
</span></span><span class=line><span class=cl><span class=c1>#    if [ -d ./.git ]; then</span>
</span></span><span class=line><span class=cl><span class=c1>#        [[ $(git status --porcelain 2&gt; /dev/null) ]] &amp;&amp; echo &#34;*&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>#    fi</span>
</span></span><span class=line><span class=cl><span class=c1>#}</span>
</span></span><span class=line><span class=cl><span class=c1>#function parse_git_branch {</span>
</span></span><span class=line><span class=cl><span class=c1>#    if [ -d ./.git ]; then</span>
</span></span><span class=line><span class=cl><span class=c1>#        git branch --no-color 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#34;s/* \(.*\)/ on \1$(parse_git_dirty)/&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>#    fi</span>
</span></span><span class=line><span class=cl><span class=c1>#}</span>
</span></span><span class=line><span class=cl><span class=k>function</span> parse_git_branch <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> -d ./.git <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>branch</span><span class=o>=</span><span class=k>$(</span>git branch --no-color 2&gt; /dev/null <span class=p>|</span> sed -e <span class=s1>&#39;/^[^*]/d&#39;</span> -e <span class=s2>&#34;s/* \(.*\)/\1/&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>dirty</span><span class=o>=</span><span class=k>$(</span>git status --porcelain 2&gt; /dev/null <span class=p>|</span> wc -l<span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[</span> <span class=nv>$dirty</span> -gt <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34; on </span><span class=nv>$branch</span><span class=s2>*&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34; on </span><span class=nv>$branch</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Define prompt colors</span>
</span></span><span class=line><span class=cl><span class=nv>prompt_color</span><span class=o>=</span><span class=s1>&#39;\[\033[;35m\]&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>info_color</span><span class=o>=</span><span class=s1>&#39;\[\033[1;32m\]&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># \033=\e, \007=\a, \012=\n, \015=\r, https://manpages.debian.org/bullseye/manpages/ascii.7.en.html</span>
</span></span><span class=line><span class=cl><span class=c1># https://manpages.debian.org/bullseye/xterm/xterm.1.en.html</span>
</span></span><span class=line><span class=cl><span class=c1># https://web.archive.org/web/20221206072000/https://tldp.org/HOWTO/Xterm-Title-4.html</span>
</span></span><span class=line><span class=cl><span class=c1># https://manpages.debian.org/bullseye/bash/bash.1.en.html</span>
</span></span><span class=line><span class=cl><span class=nv>PS1</span><span class=o>=</span><span class=s1>&#39;\[\033]0;\w\007\]\n&#39;</span><span class=nv>$prompt_color</span><span class=s1>&#39;┌──(&#39;</span><span class=nv>$info_color</span><span class=s1>&#39;\t&#39;</span><span class=nv>$prompt_color</span><span class=s1>&#39;)-[\[\033[0;1m\]\w&#39;</span><span class=nv>$prompt_color</span><span class=s1>&#39;]\[\033[;33m\]$(parse_git_branch)\012&#39;</span><span class=nv>$prompt_color</span><span class=s1>&#39;└─&#39;</span><span class=nv>$info_color</span><span class=s1>&#39;\$\[\033[0m\] &#39;</span>
</span></span><span class=line><span class=cl><span class=c1>#PS1=$prompt_color&#39;\[\033]0;\w\007\]\n┌──(&#39;$info_color&#39;\t&#39;$prompt_color&#39;)-[\[\033[0;1m\]\w&#39;$prompt_color&#39;]\[\033[;33m\]$(GIT_PS1_SHOWUNTRACKEDFILES=1 GIT_PS1_SHOWDIRTYSTATE=1 __git_ps1)\012&#39;$prompt_color&#39;└─&#39;$info_color&#39;\$\[\033[0m\] &#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>unset</span> prompt_color
</span></span><span class=line><span class=cl><span class=nb>unset</span> info_color
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable color support of ls, less and man, and also add handy aliases</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -x /usr/bin/dircolors <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>test</span> -r ~/.dircolors <span class=o>&amp;&amp;</span> <span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>dircolors -b ~/.dircolors<span class=k>)</span><span class=s2>&#34;</span> <span class=o>||</span> <span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>dircolors -b<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LS_COLORS</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$LS_COLORS</span><span class=s2>:ow=30;44:&#34;</span> <span class=c1># fix ls color for folders with 777 permissions</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>ls</span><span class=o>=</span><span class=s1>&#39;ls --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1>#alias dir=&#39;dir --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1>#alias vdir=&#39;vdir --color=auto&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>grep</span><span class=o>=</span><span class=s1>&#39;grep --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>fgrep</span><span class=o>=</span><span class=s1>&#39;fgrep --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>egrep</span><span class=o>=</span><span class=s1>&#39;egrep --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>diff</span><span class=o>=</span><span class=s1>&#39;diff --color=auto&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>alias</span> <span class=nv>ip</span><span class=o>=</span><span class=s1>&#39;ip --color=auto&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_mb</span><span class=o>=</span><span class=s1>$&#39;\E[1;31m&#39;</span>     <span class=c1># begin blink</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_md</span><span class=o>=</span><span class=s1>$&#39;\E[1;36m&#39;</span>     <span class=c1># begin bold</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_me</span><span class=o>=</span><span class=s1>$&#39;\E[0m&#39;</span>        <span class=c1># reset bold/blink</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_so</span><span class=o>=</span><span class=s1>$&#39;\E[01;33m&#39;</span>    <span class=c1># begin reverse video</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_se</span><span class=o>=</span><span class=s1>$&#39;\E[0m&#39;</span>        <span class=c1># reset reverse video</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_us</span><span class=o>=</span><span class=s1>$&#39;\E[1;32m&#39;</span>     <span class=c1># begin underline</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>LESS_TERMCAP_ue</span><span class=o>=</span><span class=s1>$&#39;\E[0m&#39;</span>        <span class=c1># reset underline</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># some more ls aliases</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>ll</span><span class=o>=</span><span class=s1>&#39;ls -laFh&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>la</span><span class=o>=</span><span class=s1>&#39;ls -A&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>l</span><span class=o>=</span><span class=s1>&#39;ls -AF1&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>pwd</span><span class=o>=</span><span class=s1>&#39;pwd -W&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># be paranoid</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>cp</span><span class=o>=</span><span class=s1>&#39;cp -i&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>mv</span><span class=o>=</span><span class=s1>&#39;mv -i&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>rm</span><span class=o>=</span><span class=s1>&#39;rm -i&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> extract <span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=o>[</span> -f <span class=nv>$1</span> <span class=o>]</span> <span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>       <span class=k>case</span> <span class=nv>$1</span> in
</span></span><span class=line><span class=cl>           *.tar.bz2<span class=o>)</span>   tar xvjf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tar.gz<span class=o>)</span>    tar xvzf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.bz2<span class=o>)</span>       bunzip2 <span class=nv>$1</span>     <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.rar<span class=o>)</span>       unrar x <span class=nv>$1</span>     <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.gz<span class=o>)</span>        gunzip <span class=nv>$1</span>      <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tar<span class=o>)</span>       tar xvf <span class=nv>$1</span>     <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tbz2<span class=o>)</span>      tar xvjf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.tgz<span class=o>)</span>       tar xvzf <span class=nv>$1</span>    <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.zip<span class=o>)</span>       unzip <span class=nv>$1</span>       <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.Z<span class=o>)</span>         uncompress <span class=nv>$1</span>  <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *.7z<span class=o>)</span>        7z x <span class=nv>$1</span>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>           *<span class=o>)</span>           <span class=nb>echo</span> <span class=s2>&#34;don&#39;t know how to extract &#39;</span><span class=nv>$1</span><span class=s2>&#39;...&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>       <span class=k>esac</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span>
</span></span><span class=line><span class=cl>       <span class=nb>echo</span> <span class=s2>&#34;&#39;</span><span class=nv>$1</span><span class=s2>&#39; is not a valid file!&#34;</span>
</span></span><span class=line><span class=cl>   <span class=k>fi</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span></code></pre></div></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://vicfree.com/tags/github>Github</a></span><span class=tag><a href=https://vicfree.com/tags/zsh>zsh</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>3835 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2023-02-20 14:17 +0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://vicfree.com/2023/03/stable-diffusion-amd-gpu-rocm-ubuntu/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Stable Diffusion 使用 AMD ROCm 显卡加速</span></a>
<a class=prev-post href=https://vicfree.com/2023/02/ipv6-explained-and-setup-in-openwrt/><span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>IPv6 原理及如何设置 OpenWrt</span></a></div><div id=comments class=thin><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//vicfree.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2023 <a href=https://vicfree.com>Victor</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://vicfree.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://vicfree.com/js/bundle.min.580988ed2982bcbb74a1773c7abea97b43e4c43b9324e10cda0813ec6ec4bb67.js integrity="sha256-WAmI7SmCvLt0oXc8er6pe0PkxDuTJOEM2ggT7G7Eu2c=" crossorigin=anonymous></script></body></html>